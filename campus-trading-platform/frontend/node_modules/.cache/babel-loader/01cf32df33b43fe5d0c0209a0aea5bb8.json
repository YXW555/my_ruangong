{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\announcement-detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\announcement-detail.vue","mtime":1767617320536},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'AnnouncementDetail',\n  data: function data() {\n    return {\n      announcement: null\n    };\n  },\n  created: function created() {\n    var id = this.$route.query.id;\n\n    if (id) {\n      this.load(id);\n    }\n  },\n  methods: {\n    load: function load(id) {\n      var _this = this;\n\n      this.$api.getAnnouncement({\n        id: id\n      }).then(function (res) {\n        if (res.status_code === 1 && res.data) {\n          _this.announcement = res.data;\n        } else {\n          _this.$message.error(res.msg || '加载公告失败');\n        }\n      }).catch(function () {\n        _this.$message.error('网络错误，加载公告失败');\n      });\n    },\n    formatTime: function formatTime(t) {\n      if (!t) return '';\n      return t.toString().substring(0, 19).replace('T', ' ');\n    },\n    getFirstImageFromContent: function getFirstImageFromContent(html) {\n      if (!html) return null;\n      var m = html.match(/<img\\s+[^>]*src=[\"']([^\"']+)[\"'][^>]*>/i);\n      return m ? m[1] : null;\n    },\n    roleLabel: function roleLabel(role) {\n      if (role === 2) return '管理员';\n      if (role === 1) return '商家';\n      return '公告发布者';\n    }\n  },\n  computed: {\n    thumbnail: function thumbnail() {\n      if (!this.announcement) return null;\n      return this.getFirstImageFromContent(this.announcement.content);\n    }\n  }\n};",{"version":3,"sources":["announcement-detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAqBA,eAAA;AACA,EAAA,IAAA,EAAA,oBADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AADA,KAAA;AAGA,GANA;AAOA,EAAA,OAPA,qBAOA;AACA,QAAA,EAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,EAAA;;AACA,QAAA,EAAA,EAAA;AACA,WAAA,IAAA,CAAA,EAAA;AACA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,gBACA,EADA,EACA;AAAA;;AACA,WAAA,IAAA,CAAA,eAAA,CAAA;AAAA,QAAA,EAAA,EAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,WAAA,KAAA,CAAA,IAAA,GAAA,CAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,IAAA,QAAA;AACA;AACA,OANA,EAMA,KANA,CAMA,YAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,aAAA;AACA,OARA;AASA,KAXA;AAYA,IAAA,UAZA,sBAYA,CAZA,EAYA;AACA,UAAA,CAAA,CAAA,EAAA,OAAA,EAAA;AACA,aAAA,CAAA,CAAA,QAAA,GAAA,SAAA,CAAA,CAAA,EAAA,EAAA,EAAA,OAAA,CAAA,GAAA,EAAA,GAAA,CAAA;AACA,KAfA;AAgBA,IAAA,wBAhBA,oCAgBA,IAhBA,EAgBA;AACA,UAAA,CAAA,IAAA,EAAA,OAAA,IAAA;AACA,UAAA,CAAA,GAAA,IAAA,CAAA,KAAA,CAAA,yCAAA,CAAA;AACA,aAAA,CAAA,GAAA,CAAA,CAAA,CAAA,CAAA,GAAA,IAAA;AACA,KApBA;AAqBA,IAAA,SArBA,qBAqBA,IArBA,EAqBA;AACA,UAAA,IAAA,KAAA,CAAA,EAAA,OAAA,KAAA;AACA,UAAA,IAAA,KAAA,CAAA,EAAA,OAAA,IAAA;AACA,aAAA,OAAA;AACA;AAzBA,GAbA;AAwCA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,UAAA,CAAA,KAAA,YAAA,EAAA,OAAA,IAAA;AACA,aAAA,KAAA,wBAAA,CAAA,KAAA,YAAA,CAAA,OAAA,CAAA;AACA;AAJA;AAxCA,CAAA","sourcesContent":["<template>\r\n  <div class=\"announcement-detail page-card\">\r\n    <el-card class=\"mt-16\" v-if=\"announcement\">\r\n      <div style=\"display:flex;justify-content:space-between;align-items:flex-start;\">\r\n        <div style=\"display:flex;align-items:center;\">\r\n          <img v-if=\"thumbnail\" :src=\"thumbnail\" style=\"width:56px;height:56px;object-fit:cover;border-radius:6px;margin-right:12px\" />\r\n          <div>\r\n            <div style=\"font-size:18px;font-weight:700\">{{ announcement.title }}</div>\r\n            <div style=\"color:#909399;font-size:12px;margin-top:4px;\">\r\n              {{ formatTime(announcement.createTime) }} · {{ roleLabel(announcement.creatorRole) }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"mt-12\" v-html=\"announcement.content\"></div>\r\n    </el-card>\r\n    <div v-else class=\"mt-40\" style=\"text-align:center;color:#909399\">正在加载公告...</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'AnnouncementDetail',\r\n  data() {\r\n    return {\r\n      announcement: null\r\n    };\r\n  },\r\n  created() {\r\n    const id = this.$route.query.id;\r\n    if (id) {\r\n      this.load(id);\r\n    }\r\n  },\r\n  methods: {\r\n    load(id) {\r\n      this.$api.getAnnouncement({ id }).then(res => {\r\n        if (res.status_code === 1 && res.data) {\r\n          this.announcement = res.data;\r\n        } else {\r\n          this.$message.error(res.msg || '加载公告失败');\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('网络错误，加载公告失败');\r\n      });\r\n    },\r\n    formatTime(t) {\r\n      if (!t) return '';\r\n      return t.toString().substring(0, 19).replace('T', ' ');\r\n    },\r\n    getFirstImageFromContent(html) {\r\n      if (!html) return null;\r\n      const m = html.match(/<img\\s+[^>]*src=[\"']([^\"']+)[\"'][^>]*>/i);\r\n      return m ? m[1] : null;\r\n    },\r\n    roleLabel(role) {\r\n      if (role === 2) return '管理员';\r\n      if (role === 1) return '商家';\r\n      return '公告发布者';\r\n    }\r\n  },\r\n  computed: {\r\n    thumbnail() {\r\n      if (!this.announcement) return null;\r\n      return this.getFirstImageFromContent(this.announcement.content);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.announcement-detail {\r\n  max-width: 980px;\r\n  margin: 24px auto;\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src/components/page"}]}