{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\index.vue","mtime":1767415739108},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// script部分和之前完全一致，无需修改\nimport AppHead from \"../common/AppHeader.vue\";\nimport AppBody from \"../common/AppPageBody.vue\";\nimport AppFoot from \"../common/AppFoot.vue\";\nexport default {\n  name: \"index\",\n  components: {\n    AppHead: AppHead,\n    AppBody: AppBody,\n    AppFoot: AppFoot\n  },\n  data: function data() {\n    return {\n      labelName: '0',\n      idleList: [],\n      currentPage: 1,\n      totalItem: 1,\n      categories: {\n        '1': '数码科技',\n        '2': '生活用品',\n        '3': '运动相关',\n        '4': '图书笔记',\n        '5': '公告'\n      },\n      viewMode: 'card',\n      // 轮播图数据（动态填充置顶商品）\n      bannerList: [],\n      // 猜你喜欢推荐列表\n      recommendList: []\n    };\n  },\n  created: function created() {\n    this.findIdleTiem(1);\n    this.loadRecommendations();\n  },\n  watch: {\n    $route: function $route(to, from) {\n      this.labelName = to.query.labelName || '0';\n      var val = parseInt(to.query.page) ? parseInt(to.query.page) : 1;\n      this.currentPage = parseInt(to.query.page) ? parseInt(to.query.page) : 1;\n      this.findIdleTiem(val);\n    }\n  },\n  methods: {\n    findIdleTiem: function findIdleTiem(page) {\n      var _this = this;\n\n      var loading = this.$loading({\n        lock: true,\n        text: '加载数据中',\n        spinner: 'el-icon-loading',\n        background: 'rgba(0, 0, 0, 0.7)'\n      });\n\n      if (this.labelName > 0) {\n        this.$api.findIdleTiemByLable({\n          idleLabel: this.labelName,\n          page: page,\n          nums: 8\n        }).then(function (res) {\n          var list = res.data.list;\n\n          for (var i = 0; i < list.length; i++) {\n            list[i].timeStr = list[i].releaseTime.substring(0, 10) + \" \" + list[i].releaseTime.substring(11, 19);\n            var pictureList = JSON.parse(list[i].pictureList);\n            list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\n\n            if (list[i].isPinned === undefined) {\n              list[i].isPinned = false;\n            }\n          }\n\n          _this.idleList = list;\n          _this.totalItem = res.data.count; // 更新轮播图商品数据\n\n          _this.updateBannerItems(list);\n        }).catch(function (e) {\n          console.log(e);\n\n          _this.$message.error('获取数据失败，请稍后重试');\n        }).finally(function () {\n          loading.close();\n        });\n      } else {\n        this.$api.findIdleTiem({\n          page: page,\n          nums: 8\n        }).then(function (res) {\n          var list = res.data.list;\n\n          for (var i = 0; i < list.length; i++) {\n            list[i].timeStr = list[i].releaseTime.substring(0, 10) + \" \" + list[i].releaseTime.substring(11, 19);\n            var pictureList = JSON.parse(list[i].pictureList);\n            list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\n\n            if (list[i].isPinned === undefined) {\n              list[i].isPinned = false;\n            }\n          }\n\n          _this.idleList = list;\n          _this.totalItem = res.data.count; // 更新轮播图商品数据\n\n          _this.updateBannerItems(list);\n        }).catch(function (e) {\n          console.log(e);\n\n          _this.$message.error('获取数据失败，请稍后重试');\n        }).finally(function () {\n          loading.close();\n        });\n      }\n    },\n    handleClick: function handleClick(tab, event) {\n      this.$router.replace({\n        query: {\n          page: 1,\n          labelName: this.labelName\n        }\n      });\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.$router.replace({\n        query: {\n          page: val,\n          labelName: this.labelName\n        }\n      });\n    },\n    toDetails: function toDetails(idle) {\n      this.$router.push({\n        path: '/details',\n        query: {\n          id: idle.id\n        }\n      });\n    },\n    getItemCategory: function getItemCategory(label) {\n      return this.categories[label] || '';\n    },\n    // 加载个性化推荐\n    loadRecommendations: function loadRecommendations() {\n      var _this2 = this;\n\n      this.$api.getPersonalizedRecommendations({\n        limit: 8\n      }).then(function (res) {\n        if (res.status_code === 1 && res.data) {\n          // 处理推荐商品数据\n          var list = res.data;\n\n          for (var i = 0; i < list.length; i++) {\n            if (list[i].pictureList) {\n              try {\n                var pictureList = JSON.parse(list[i].pictureList);\n                list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\n              } catch (e) {\n                list[i].imgUrl = '';\n              }\n            } else {\n              list[i].imgUrl = '';\n            }\n          }\n\n          _this2.recommendList = list;\n        }\n      }).catch(function (e) {\n        console.log('加载推荐失败:', e); // 失败时加载热门推荐\n\n        _this2.loadHotRecommendations();\n      });\n    },\n    // 加载热门推荐（备用）\n    loadHotRecommendations: function loadHotRecommendations() {\n      var _this3 = this;\n\n      this.$api.getHotRecommendations({\n        limit: 8\n      }).then(function (res) {\n        if (res.status_code === 1 && res.data) {\n          var list = res.data;\n\n          for (var i = 0; i < list.length; i++) {\n            if (list[i].pictureList) {\n              try {\n                var pictureList = JSON.parse(list[i].pictureList);\n                list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\n              } catch (e) {\n                list[i].imgUrl = '';\n              }\n            } else {\n              list[i].imgUrl = '';\n            }\n          }\n\n          _this3.recommendList = list;\n        }\n      }).catch(function (e) {\n        console.log('加载热门推荐失败:', e);\n      });\n    },\n    handleBannerClick: function handleBannerClick(banner) {\n      if (banner.type === 'item' && banner.item) {\n        // 点击商品，跳转到商品详情\n        this.toDetails(banner.item);\n      } else if (banner.type === 'category') {\n        // 点击分类，跳转到对应分类\n        this.labelName = banner.value;\n        this.$router.replace({\n          query: {\n            page: 1,\n            labelName: banner.value\n          }\n        });\n      }\n    },\n    handleBannerAction: function handleBannerAction(banner) {\n      this.handleBannerClick(banner);\n    },\n    tableRowClassName: function tableRowClassName(_ref) {\n      var row = _ref.row,\n          rowIndex = _ref.rowIndex;\n\n      if (row.isPinned) {\n        return 'pinned-row';\n      }\n\n      return '';\n    },\n    updateBannerItems: function updateBannerItems(itemList) {\n      // 优先获取置顶商品填充到轮播图\n      var pinnedItems = itemList.filter(function (item) {\n        return item.isPinned && item.imgUrl;\n      }); // 如果置顶商品不足3个，用其他有图片的商品补充\n\n      var otherItems = itemList.filter(function (item) {\n        return !item.isPinned && item.imgUrl;\n      }); // 清空并重新构建轮播图数据\n\n      this.bannerList = []; // 最多显示3个轮播项\n\n      var maxBanners = 3;\n      var bannerCount = 0; // 先添加置顶商品\n\n      for (var i = 0; i < pinnedItems.length && bannerCount < maxBanners; i++) {\n        var item = pinnedItems[i];\n        var categoryName = this.getItemCategory(item.idleLabel) || '精选商品';\n        this.bannerList.push({\n          title: item.idleName,\n          subtitle: \"\\u6765\\u81EA\".concat(categoryName, \" \\xB7 \\u7F6E\\u9876\\u63A8\\u8350\"),\n          tags: [categoryName, '置顶', '推荐'],\n          buttonText: '查看详情',\n          type: 'item',\n          item: item\n        });\n        bannerCount++;\n      } // 如果置顶商品不足，用其他商品补充\n\n\n      for (var _i = 0; _i < otherItems.length && bannerCount < maxBanners; _i++) {\n        var _item = otherItems[_i];\n\n        var _categoryName = this.getItemCategory(_item.idleLabel) || '精选商品';\n\n        this.bannerList.push({\n          title: _item.idleName,\n          subtitle: \"\\u6765\\u81EA\".concat(_categoryName, \" \\xB7 \\u70ED\\u95E8\\u63A8\\u8350\"),\n          tags: [_categoryName, '热门', '推荐'],\n          buttonText: '查看详情',\n          type: 'item',\n          item: _item\n        });\n        bannerCount++;\n      } // 如果商品不足3个，用默认活动推广填充\n\n\n      var defaultBanners = [{\n        title: '毕业季闲置专场',\n        subtitle: '低价清仓 好物不浪费',\n        tags: ['毕业季', '清仓', '特价'],\n        buttonText: '立即查看',\n        type: 'category',\n        value: '1'\n      }, {\n        title: '正品数码优选',\n        subtitle: '验货保真 放心交易',\n        tags: ['数码', '正品', '验货'],\n        buttonText: '立即查看',\n        type: 'category',\n        value: '1'\n      }, {\n        title: '图书笔记专区',\n        subtitle: '学长学姐干货 助力学业',\n        tags: ['图书', '笔记', '学习'],\n        buttonText: '立即查看',\n        type: 'category',\n        value: '4'\n      }];\n\n      while (this.bannerList.length < maxBanners) {\n        var defaultIndex = this.bannerList.length;\n\n        if (defaultIndex < defaultBanners.length) {\n          this.bannerList.push(defaultBanners[defaultIndex]);\n        } else {\n          break;\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <app-head></app-head>\n        <app-body>\n            <div style=\"min-height: 85vh;\">\n                <!-- 轮播图组件 - 展示热门商品和活动 -->\n                <div class=\"swiper-container\">\n                    <el-carousel height=\"380px\" indicator-position=\"outside\" arrow=\"hover\" class=\"custom-carousel\" :interval=\"4000\">\n                        <el-carousel-item v-for=\"(banner, index) in bannerList\" :key=\"index\">\n                            <div class=\"carousel-item\" :class=\"'banner-' + (index % 3 + 1)\" @click=\"handleBannerClick(banner)\">\n                                <div class=\"carousel-content\">\n                                    <div class=\"carousel-left\">\n                                        <h2 class=\"carousel-title\">{{banner.title}}</h2>\n                                        <p class=\"carousel-subtitle\">{{banner.subtitle}}</p>\n                                        <div class=\"carousel-tags\">\n                                            <el-tag v-for=\"tag in banner.tags\" :key=\"tag\" size=\"small\" type=\"success\" effect=\"plain\">{{tag}}</el-tag>\n                            </div>\n                                        <el-button type=\"primary\" size=\"medium\" class=\"carousel-btn\" @click.stop=\"handleBannerAction(banner)\">\n                                            {{banner.buttonText || '立即查看'}}\n                                        </el-button>\n                            </div>\n                                    <div class=\"carousel-right\" v-if=\"banner.item\">\n                                        <div class=\"carousel-item-preview\">\n                                            <el-image :src=\"banner.item.imgUrl\" fit=\"cover\" class=\"preview-image\">\n                                                <div slot=\"error\" class=\"image-slot\">\n                                                    <i class=\"el-icon-picture-outline\"></i>\n                                                </div>\n                                            </el-image>\n                                            <div class=\"preview-info\">\n                                                <div class=\"preview-name\">{{banner.item.idleName}}</div>\n                                                <div class=\"preview-price\">¥{{banner.item.idlePrice}}</div>\n                                            </div>\n                                        </div>\n                            </div>\n                            </div>\n                            </div>\n                        </el-carousel-item>\n                    </el-carousel>\n                </div>\n\n                <!-- 猜你喜欢板块 -->\n                <div class=\"recommend-section\" v-if=\"recommendList.length > 0\">\n                    <div class=\"recommend-header\">\n                        <h2 class=\"recommend-title\">\n                            <i class=\"el-icon-star-on\"></i>\n                            猜你喜欢\n                        </h2>\n                        <p class=\"recommend-subtitle\">基于您的浏览和收藏行为，为您精心推荐</p>\n                </div>\n                    <div class=\"recommend-content\">\n                        <el-row :gutter=\"20\">\n                            <el-col :xs=\"12\" :sm=\"8\" :md=\"6\" :lg=\"3\" v-for=\"(item, index) in recommendList\" :key=\"index\">\n                                <el-card class=\"recommend-card\" shadow=\"hover\" @click.native=\"toDetails(item)\">\n                                    <div class=\"recommend-item\">\n                                        <div class=\"recommend-image-container\">\n                                            <el-image\n                                                class=\"recommend-image\"\n                                                :src=\"item.imgUrl\"\n                                                fit=\"cover\">\n                                                <div slot=\"error\" class=\"image-slot\">\n                                                    <i class=\"el-icon-picture-outline\"></i>\n                                                </div>\n                                            </el-image>\n                                        </div>\n                                        <div class=\"recommend-info\">\n                                            <div class=\"recommend-name\" :title=\"item.idleName\">{{item.idleName}}</div>\n                                            <div class=\"recommend-price\" v-if=\"item.idlePrice > 0\">¥{{item.idlePrice}}</div>\n                                            <div class=\"recommend-price free\" v-else>免费</div>\n                                        </div>\n                                    </div>\n                                </el-card>\n                            </el-col>\n                        </el-row>\n                </div>\n                </div>\n\n                <!-- 分类标签 -->\n                <div class=\"category-tabs\">\n                    <el-tabs v-model=\"labelName\" type=\"border-card\" @tab-click=\"handleClick\" class=\"custom-tabs\">\n                        <el-tab-pane label=\"全部\" name=\"0\">\n                            <i class=\"el-icon-s-grid tab-icon\"></i> 全部\n                        </el-tab-pane>\n                        <el-tab-pane label=\"数码科技\" name=\"1\">\n                            <i class=\"el-icon-mobile-phone tab-icon\"></i> 数码科技\n                        </el-tab-pane>\n                        <el-tab-pane label=\"生活用品\" name=\"2\">\n                            <i class=\"el-icon-toilet-paper tab-icon\"></i> 生活用品\n                        </el-tab-pane>\n                        <el-tab-pane label=\"运动相关\" name=\"3\">\n                            <i class=\"el-icon-basketball tab-icon\"></i> 运动相关\n                        </el-tab-pane>\n                        <el-tab-pane label=\"图书笔记\" name=\"4\">\n                            <i class=\"el-icon-notebook-2 tab-icon\"></i> 图书笔记\n                        </el-tab-pane>\n                        <el-tab-pane label=\"公告展示\" name=\"5\">\n                            <i class=\"el-icon-bell tab-icon\"></i> 公告展示\n                        </el-tab-pane>\n                    </el-tabs>\n                </div>\n\n                <!-- 视图切换 -->\n                <div class=\"view-switch-container\">\n                    <div class=\"view-left\">\n                        <span class=\"view-title\">共 <strong>{{totalItem}}</strong> 件商品</span>\n                        <el-tag v-if=\"labelName !== '0'\" type=\"success\" size=\"small\" style=\"margin-left: 10px;\">\n                            {{getItemCategory(labelName)}}\n                        </el-tag>\n                    </div>\n                    <el-button-group size=\"small\">\n                        <el-button\n                            icon=\"el-icon-grid\"\n                            type=\"primary\"\n                            :plain=\"viewMode !== 'card'\"\n                            :disabled=\"viewMode === 'card'\"\n                            @click=\"viewMode = 'card'\"\n                        >卡片视图</el-button>\n                        <el-button\n                            icon=\"el-icon-menu\"\n                            type=\"primary\"\n                            :plain=\"viewMode !== 'table'\"\n                            :disabled=\"viewMode === 'table'\"\n                            @click=\"viewMode = 'table'\"\n                        >表格视图</el-button>\n                    </el-button-group>\n                </div>\n\n                <!-- 商品卡片列表 -->\n                <div class=\"items-container\" v-if=\"viewMode === 'card'\">\n                    <el-row :gutter=\"20\">\n                        <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\" v-for=\"(idle, index) in idleList\" :key=\"index\">\n                            <div class=\"item-card\" @click=\"toDetails(idle)\">\n                                <div class=\"item-image-container\">\n                                    <el-image\n                                        class=\"item-image\"\n                                        :src=\"idle.imgUrl\"\n                                        fit=\"cover\"\n                                        lazy>\n                                        <div slot=\"error\" class=\"image-slot\">\n                                            <i class=\"el-icon-picture-outline\"></i>\n                                            <span>暂无图片</span>\n                                        </div>\n                                    </el-image>\n                                    <div class=\"item-tag\" v-if=\"getItemCategory(idle.idleLabel)\">\n                                        {{getItemCategory(idle.idleLabel)}}\n                                    </div>\n                                    <div class=\"item-pin-badge\" v-if=\"idle.isPinned\">\n                                        <i class=\"el-icon-top\"></i> 置顶\n                                    </div>\n                                    <div class=\"item-overlay\">\n                                        <el-button type=\"text\" icon=\"el-icon-view\" class=\"overlay-btn\">查看详情</el-button>\n                                    </div>\n                                </div>\n                                <div class=\"item-content\">\n                                    <h3 class=\"item-title\" :title=\"idle.idleName\">{{idle.idleName}}</h3>\n                                    <div class=\"item-meta\">\n                                        <div class=\"item-price\" v-show=\"idle.idlePrice !== 0\">\n                                            <span class=\"price-symbol\">¥</span>\n                                            <span class=\"price-value\">{{idle.idlePrice}}</span>\n                                    </div>\n                                        <div class=\"item-place\">\n                                            <i class=\"el-icon-location\"></i> {{idle.idlePlace}}\n                                        </div>\n                                    </div>\n                                    <div class=\"item-footer\">\n                                        <div class=\"item-time\">\n                                            <i class=\"el-icon-time\"></i> {{idle.timeStr}}\n                                        </div>\n                                    <div class=\"user-info\" v-if=\"idle.user\">\n                                            <el-avatar :size=\"24\" :src=\"idle.user && idle.user.avatar || ''\"></el-avatar>\n                                            <span class=\"user-nickname\">{{idle.user && idle.user.nickname || '未知用户'}}</span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </el-col>\n                    </el-row>\n                </div>\n\n                <!-- 商品表格视图 -->\n                <div class=\"table-container\" v-else>\n                    <el-table\n                        :data=\"idleList\"\n                        border\n                        stripe\n                        style=\"width: 100%;\"\n                        @row-click=\"toDetails\"\n                        highlight-current-row\n                        :row-class-name=\"tableRowClassName\"\n                    >\n                        <el-table-column prop=\"idleName\" label=\"商品名称\" min-width=\"200\" align=\"left\">\n                            <template slot-scope=\"scope\">\n                                <div class=\"table-title-cell\">\n                                <div class=\"table-title\">{{scope.row.idleName}}</div>\n                                    <el-tag v-if=\"scope.row.isPinned\" type=\"warning\" size=\"mini\" style=\"margin-left: 8px;\">置顶</el-tag>\n                                </div>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"商品图片\" width=\"120\" align=\"center\">\n                            <template slot-scope=\"scope\">\n                                <el-image :src=\"scope.row.imgUrl\" width=\"80\" height=\"80\" fit=\"cover\" class=\"table-image\">\n                                    <div slot=\"error\" class=\"table-img-slot\">\n                                        <i class=\"el-icon-picture-outline\"></i>\n                                    </div>\n                                </el-image>\n                            </template>\n                        </el-table-column>\n                        <el-table-column prop=\"idlePrice\" label=\"价格\" width=\"120\" align=\"center\">\n                            <template slot-scope=\"scope\">\n                                <span class=\"table-price\">¥{{scope.row.idlePrice || '免费'}}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"分类\" width=\"120\" align=\"center\">\n                            <template slot-scope=\"scope\">\n                                <el-tag type=\"success\" size=\"small\" effect=\"plain\">{{getItemCategory(scope.row.idleLabel)}}</el-tag>\n                            </template>\n                        </el-table-column>\n                        <el-table-column prop=\"idlePlace\" label=\"交易地点\" width=\"150\" align=\"center\">\n                            <template slot-scope=\"scope\">\n                                <i class=\"el-icon-location\"></i> {{scope.row.idlePlace}}\n                            </template>\n                        </el-table-column>\n                        <el-table-column prop=\"timeStr\" label=\"发布时间\" width=\"180\" align=\"center\"></el-table-column>\n                        <el-table-column label=\"发布人\" width=\"140\" align=\"center\">\n                            <template slot-scope=\"scope\">\n                                <div class=\"table-user\">\n                                    <el-avatar :size=\"28\" :src=\"scope.row.user && scope.row.user.avatar || ''\"></el-avatar>\n                                    <span class=\"user-name\">{{scope.row.user && scope.row.user.nickname || '未知用户'}}</span>\n                                </div>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"操作\" width=\"100\" align=\"center\" fixed=\"right\">\n                            <template slot-scope=\"scope\">\n                                <el-button type=\"text\" size=\"small\" icon=\"el-icon-view\" @click.stop=\"toDetails(scope.row)\">查看</el-button>\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                </div>\n\n                <!-- 分页 -->\n                <div class=\"pagination-container\">\n                    <el-pagination\n                        background\n                        @current-change=\"handleCurrentChange\"\n                        :current-page.sync=\"currentPage\"\n                        :page-size=\"8\"\n                        layout=\"prev, pager, next, jumper, ->, total\"\n                        :total=\"totalItem\">\n                    </el-pagination>\n                </div>\n            </div>\n            <app-foot></app-foot>\n        </app-body>\n    </div>\n</template>\n\n<script>\n    // script部分和之前完全一致，无需修改\n    import AppHead from '../common/AppHeader.vue';\n    import AppBody from '../common/AppPageBody.vue'\n    import AppFoot from '../common/AppFoot.vue'\n\n    export default {\n        name: \"index\",\n        components: {\n            AppHead,\n            AppBody,\n            AppFoot\n        },\n        data() {\n            return {\n                labelName: '0',\n                idleList: [],\n                currentPage: 1,\n                totalItem: 1,\n                categories: {\n                    '1': '数码科技',\n                    '2': '生活用品',\n                    '3': '运动相关',\n                    '4': '图书笔记',\n                    '5': '公告'\n                },\n                viewMode: 'card',\n                // 轮播图数据（动态填充置顶商品）\n                bannerList: [],\n                // 猜你喜欢推荐列表\n                recommendList: []\n            };\n        },\n        created() {\n            this.findIdleTiem(1);\n            this.loadRecommendations();\n        },\n        watch:{\n            $route(to,from){\n                this.labelName=to.query.labelName || '0';\n                let val=parseInt(to.query.page)?parseInt(to.query.page):1;\n                this.currentPage=parseInt(to.query.page)?parseInt(to.query.page):1;\n                this.findIdleTiem(val);\n            }\n        },\n        methods: {\n            findIdleTiem(page){\n                const loading = this.$loading({\n                    lock: true,\n                    text: '加载数据中',\n                    spinner: 'el-icon-loading',\n                    background: 'rgba(0, 0, 0, 0.7)'\n                });\n                if(this.labelName>0){\n                    this.$api.findIdleTiemByLable({\n                        idleLabel:this.labelName,\n                        page: page,\n                        nums: 8\n                    }).then(res => {\n                        let list = res.data.list;\n                        for (let i = 0; i < list.length; i++) {\n                            list[i].timeStr = list[i].releaseTime.substring(0, 10) + \" \" + list[i].releaseTime.substring(11, 19);\n                            let pictureList = JSON.parse(list[i].pictureList);\n                            list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\n                            if (list[i].isPinned === undefined) {\n                                list[i].isPinned = false;\n                            }\n                        }\n                        this.idleList = list;\n                        this.totalItem=res.data.count;\n                        // 更新轮播图商品数据\n                        this.updateBannerItems(list);\n                    }).catch(e => {\n                        console.log(e)\n                        this.$message.error('获取数据失败，请稍后重试');\n                    }).finally(()=>{\n                        loading.close();\n                    })\n                }else{\n                    this.$api.findIdleTiem({\n                        page: page,\n                        nums: 8\n                    }).then(res => {\n                        let list = res.data.list;\n                        for (let i = 0; i < list.length; i++) {\n                            list[i].timeStr = list[i].releaseTime.substring(0, 10) + \" \" + list[i].releaseTime.substring(11, 19);\n                            let pictureList = JSON.parse(list[i].pictureList);\n                            list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\n                            if (list[i].isPinned === undefined) {\n                                list[i].isPinned = false;\n                            }\n                        }\n                        this.idleList = list;\n                        this.totalItem=res.data.count;\n                        // 更新轮播图商品数据\n                        this.updateBannerItems(list);\n                    }).catch(e => {\n                        console.log(e)\n                        this.$message.error('获取数据失败，请稍后重试');\n                    }).finally(()=>{\n                        loading.close();\n                    })\n                }\n            },\n            handleClick(tab, event) {\n                this.$router.replace({query: {page: 1,labelName:this.labelName}});\n            },\n            handleCurrentChange(val) {\n                this.$router.replace({query: {page: val,labelName:this.labelName}});\n            },\n            toDetails(idle) {\n                this.$router.push({path: '/details', query: {id: idle.id}});\n            },\n            getItemCategory(label) {\n                return this.categories[label] || '';\n            },\n            // 加载个性化推荐\n            loadRecommendations() {\n                this.$api.getPersonalizedRecommendations({\n                    limit: 8\n                }).then(res => {\n                    if (res.status_code === 1 && res.data) {\n                        // 处理推荐商品数据\n                        let list = res.data;\n                        for (let i = 0; i < list.length; i++) {\n                            if (list[i].pictureList) {\n                                try {\n                                    let pictureList = JSON.parse(list[i].pictureList);\n                                    list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\n                                } catch (e) {\n                                    list[i].imgUrl = '';\n                                }\n                            } else {\n                                list[i].imgUrl = '';\n                            }\n                        }\n                        this.recommendList = list;\n                    }\n                }).catch(e => {\n                    console.log('加载推荐失败:', e);\n                    // 失败时加载热门推荐\n                    this.loadHotRecommendations();\n                });\n            },\n            // 加载热门推荐（备用）\n            loadHotRecommendations() {\n                this.$api.getHotRecommendations({\n                    limit: 8\n                }).then(res => {\n                    if (res.status_code === 1 && res.data) {\n                        let list = res.data;\n                        for (let i = 0; i < list.length; i++) {\n                            if (list[i].pictureList) {\n                                try {\n                                    let pictureList = JSON.parse(list[i].pictureList);\n                                    list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\n                                } catch (e) {\n                                    list[i].imgUrl = '';\n                                }\n                            } else {\n                                list[i].imgUrl = '';\n                            }\n                        }\n                        this.recommendList = list;\n                    }\n                }).catch(e => {\n                    console.log('加载热门推荐失败:', e);\n                });\n            },\n            handleBannerClick(banner) {\n                if (banner.type === 'item' && banner.item) {\n                    // 点击商品，跳转到商品详情\n                    this.toDetails(banner.item);\n                } else if (banner.type === 'category') {\n                    // 点击分类，跳转到对应分类\n                    this.labelName = banner.value;\n                    this.$router.replace({query: {page: 1, labelName: banner.value}});\n                }\n            },\n            handleBannerAction(banner) {\n                this.handleBannerClick(banner);\n            },\n            tableRowClassName({row, rowIndex}) {\n                if (row.isPinned) {\n                    return 'pinned-row';\n                }\n                return '';\n            },\n            updateBannerItems(itemList) {\n                // 优先获取置顶商品填充到轮播图\n                const pinnedItems = itemList.filter(item => item.isPinned && item.imgUrl);\n\n                // 如果置顶商品不足3个，用其他有图片的商品补充\n                const otherItems = itemList.filter(item => !item.isPinned && item.imgUrl);\n\n                // 清空并重新构建轮播图数据\n                this.bannerList = [];\n\n                // 最多显示3个轮播项\n                const maxBanners = 3;\n                let bannerCount = 0;\n\n                // 先添加置顶商品\n                for (let i = 0; i < pinnedItems.length && bannerCount < maxBanners; i++) {\n                    const item = pinnedItems[i];\n                    const categoryName = this.getItemCategory(item.idleLabel) || '精选商品';\n                    this.bannerList.push({\n                        title: item.idleName,\n                        subtitle: `来自${categoryName} · 置顶推荐`,\n                        tags: [categoryName, '置顶', '推荐'],\n                        buttonText: '查看详情',\n                        type: 'item',\n                        item: item\n                    });\n                    bannerCount++;\n                }\n\n                // 如果置顶商品不足，用其他商品补充\n                for (let i = 0; i < otherItems.length && bannerCount < maxBanners; i++) {\n                    const item = otherItems[i];\n                    const categoryName = this.getItemCategory(item.idleLabel) || '精选商品';\n                    this.bannerList.push({\n                        title: item.idleName,\n                        subtitle: `来自${categoryName} · 热门推荐`,\n                        tags: [categoryName, '热门', '推荐'],\n                        buttonText: '查看详情',\n                        type: 'item',\n                        item: item\n                    });\n                    bannerCount++;\n                }\n\n                // 如果商品不足3个，用默认活动推广填充\n                const defaultBanners = [\n                    {\n                        title: '毕业季闲置专场',\n                        subtitle: '低价清仓 好物不浪费',\n                        tags: ['毕业季', '清仓', '特价'],\n                        buttonText: '立即查看',\n                        type: 'category',\n                        value: '1'\n                    },\n                    {\n                        title: '正品数码优选',\n                        subtitle: '验货保真 放心交易',\n                        tags: ['数码', '正品', '验货'],\n                        buttonText: '立即查看',\n                        type: 'category',\n                        value: '1'\n                    },\n                    {\n                        title: '图书笔记专区',\n                        subtitle: '学长学姐干货 助力学业',\n                        tags: ['图书', '笔记', '学习'],\n                        buttonText: '立即查看',\n                        type: 'category',\n                        value: '4'\n                    }\n                ];\n\n                while (this.bannerList.length < maxBanners) {\n                    const defaultIndex = this.bannerList.length;\n                    if (defaultIndex < defaultBanners.length) {\n                        this.bannerList.push(defaultBanners[defaultIndex]);\n                    } else {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    /* style部分和之前完全一致，无需修改 */\n    :root {\n        --main-color: #4fc08d;\n        --main-light: #e8f5e9;\n        --main-deep: #2d8259;\n        --main-hover: #3ba674;\n        --price-color: #f56c6c;\n        --text-color: #303133;\n        --text-light: #606266;\n        --text-gray: #909399;\n    }\n\n    /* 猜你喜欢推荐板块 */\n    .recommend-section {\n        margin: 30px 0;\n        padding: 25px;\n        background: linear-gradient(135deg, #f5f7fa 0%, #ffffff 100%);\n        border-radius: 16px;\n        box-shadow: 0 4px 20px 0 rgba(79, 192, 141, 0.1);\n    }\n    .recommend-header {\n        text-align: center;\n        margin-bottom: 25px;\n    }\n    .recommend-title {\n        font-size: 24px;\n        font-weight: 600;\n        color: var(--main-deep);\n        margin: 0 0 8px 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n    }\n    .recommend-title i {\n        color: #ffd700;\n        font-size: 26px;\n    }\n    .recommend-subtitle {\n        font-size: 14px;\n        color: var(--text-light);\n        margin: 0;\n    }\n    .recommend-content {\n        margin-top: 20px;\n    }\n    .recommend-card {\n        cursor: pointer;\n        transition: all 0.3s ease;\n        border-radius: 12px;\n        overflow: hidden;\n        margin-bottom: 15px;\n    }\n    .recommend-card:hover {\n        transform: translateY(-5px);\n        box-shadow: 0 8px 20px rgba(79, 192, 141, 0.2);\n    }\n    .recommend-item {\n        display: flex;\n        flex-direction: column;\n    }\n    .recommend-image-container {\n        width: 100%;\n        height: 150px;\n        overflow: hidden;\n        border-radius: 8px;\n        background: #f5f7fa;\n    }\n    .recommend-image {\n        width: 100%;\n        height: 100%;\n        transition: transform 0.3s ease;\n    }\n    .recommend-card:hover .recommend-image {\n        transform: scale(1.1);\n    }\n    .recommend-info {\n        padding: 12px 0 0 0;\n    }\n    .recommend-name {\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--text-color);\n        margin-bottom: 8px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        line-height: 1.4;\n    }\n    .recommend-price {\n        font-size: 18px;\n        font-weight: 700;\n        color: var(--price-color);\n    }\n    .recommend-price.free {\n        color: var(--main-color);\n    }\n\n    .swiper-container {\n        margin: 0 0 30px 0;\n        border-radius: 16px;\n        overflow: hidden;\n        box-shadow: 0 4px 20px 0 rgba(79, 192, 141, 0.2);\n    }\n    .custom-carousel {\n        --el-carousel-indicator-active-color: var(--main-color);\n    }\n    .custom-carousel :deep(.el-carousel__arrow) {\n        background-color: rgba(255, 255, 255, 0.8);\n        color: var(--main-color);\n    }\n    .custom-carousel :deep(.el-carousel__arrow:hover) {\n        background-color: var(--main-color);\n        color: white;\n    }\n    .carousel-item {\n        width: 100%;\n        height: 100%;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n    }\n    .carousel-item.banner-1 {\n        background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);\n    }\n    .carousel-item.banner-2 {\n        background: linear-gradient(135deg, #e1f5fe 0%, #b3e5fc 100%);\n    }\n    .carousel-item.banner-3 {\n        background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);\n    }\n    .carousel-content {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: 100%;\n        padding: 40px 60px;\n        color: var(--text-color);\n    }\n    .carousel-left {\n        flex: 1;\n        z-index: 2;\n    }\n    .carousel-title {\n        font-size: 36px;\n        font-weight: 700;\n        margin-bottom: 15px;\n        color: var(--text-color);\n        animation: fadeInUp 0.6s ease;\n    }\n    .carousel-subtitle {\n        font-size: 20px;\n        margin-bottom: 20px;\n        color: var(--text-light);\n        animation: fadeInUp 0.8s ease;\n    }\n    .carousel-tags {\n        margin-bottom: 25px;\n        display: flex;\n        gap: 10px;\n        animation: fadeInUp 1s ease;\n    }\n    .carousel-tags .el-tag {\n        background: rgba(79, 192, 141, 0.1);\n        border-color: rgba(79, 192, 141, 0.3);\n        color: var(--main-deep);\n        font-weight: 500;\n    }\n    .carousel-btn {\n        background: var(--main-color) !important;\n        color: white !important;\n        border: none !important;\n        padding: 12px 30px;\n        font-size: 16px;\n        font-weight: 600;\n        border-radius: 25px;\n        box-shadow: 0 4px 15px rgba(79, 192, 141, 0.3);\n        transition: all 0.3s ease;\n        animation: fadeInUp 1.2s ease;\n    }\n    .carousel-btn:hover {\n        background: var(--main-hover) !important;\n        transform: translateY(-2px);\n        box-shadow: 0 6px 20px rgba(79, 192, 141, 0.4);\n    }\n    .carousel-right {\n        flex: 0 0 300px;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n    .carousel-item-preview {\n        background: rgba(255, 255, 255, 0.95);\n        border-radius: 12px;\n        overflow: hidden;\n        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);\n        transition: transform 0.3s ease;\n        animation: fadeInRight 1s ease;\n    }\n    .carousel-item:hover .carousel-item-preview {\n        transform: scale(1.05);\n    }\n    .preview-image {\n        width: 300px;\n        height: 200px;\n    }\n    .preview-info {\n        padding: 15px;\n        color: var(--text-color);\n    }\n    .preview-name {\n        font-size: 16px;\n        font-weight: 600;\n        margin-bottom: 8px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n    .preview-price {\n        font-size: 24px;\n        font-weight: 700;\n        color: var(--price-color);\n    }\n    @keyframes fadeInUp {\n        from {\n            opacity: 0;\n            transform: translateY(20px);\n        }\n        to {\n            opacity: 1;\n            transform: translateY(0);\n        }\n    }\n    @keyframes fadeInRight {\n        from {\n            opacity: 0;\n            transform: translateX(30px);\n        }\n        to {\n            opacity: 1;\n            transform: translateX(0);\n        }\n    }\n\n    .page-header {\n        text-align: center;\n        padding: 20px 0;\n        margin-bottom: 20px;\n        background: linear-gradient(to right, #e8f5e9, #d4edda);\n        border-radius: 12px;\n        box-shadow: 0 2px 8px rgba(79, 192, 141, 0.1);\n    }\n    .page-title {\n        font-size: 28px;\n        font-weight: 700;\n        color: var(--text-color);\n        margin-bottom: 5px;\n    }\n    .highlight {\n        color: var(--main-color);\n        background: linear-gradient(90deg, var(--main-deep), var(--main-color));\n        -webkit-background-clip: text;\n        background-clip: text;\n        color: transparent;\n    }\n    .page-description {\n        font-size: 16px;\n        color: var(--text-light);\n        margin: 10px 0 0;\n    }\n\n    .category-tabs {\n        margin-bottom: 20px;\n    }\n    .custom-tabs {\n        border-radius: 12px;\n        overflow: hidden;\n        box-shadow: 0 2px 12px 0 rgba(79, 192, 141, 0.1);\n        --el-tabs-border-color: var(--main-light);\n        --el-tabs-active-color: var(--main-color);\n    }\n    .tab-icon {\n        margin-right: 5px;\n        color: var(--main-color);\n    }\n\n    .view-switch-container {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin: 20px 0 25px 0;\n        padding: 15px 20px;\n        background: #fff;\n        border-radius: 12px;\n        box-shadow: 0 2px 8px rgba(79, 192, 141, 0.1);\n    }\n    .view-left {\n        display: flex;\n        align-items: center;\n    }\n    .view-title {\n        font-size: 16px;\n        color: var(--text-color);\n        font-weight: 500;\n    }\n    .view-title strong {\n        color: var(--main-color);\n        font-size: 18px;\n        margin: 0 5px;\n    }\n    .el-button-group {\n        --el-button-primary-border-color: var(--main-color);\n        --el-button-primary-text-color: var(--main-color);\n    }\n\n    .items-container {\n        padding: 0 10px;\n    }\n    .item-card {\n        height: 100%;\n        border-radius: 16px;\n        overflow: hidden;\n        box-shadow: 0 4px 15px 0 rgba(79, 192, 141, 0.12);\n        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n        margin-bottom: 25px;\n        background: #fff;\n        cursor: pointer;\n        border: 1px solid #f0f0f0;\n    }\n    .item-card:hover {\n        transform: translateY(-8px);\n        box-shadow: 0 12px 30px rgba(79, 192, 141, 0.25);\n        border-color: var(--main-color);\n    }\n    .item-image-container {\n        position: relative;\n        height: 220px;\n        overflow: hidden;\n        background: #f5f7fa;\n    }\n    .item-image {\n        width: 100%;\n        height: 100%;\n        transition: transform 0.5s ease;\n    }\n    .item-card:hover .item-image {\n        transform: scale(1.1);\n    }\n    .item-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.4);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        opacity: 0;\n        transition: opacity 0.3s ease;\n    }\n    .item-card:hover .item-overlay {\n        opacity: 1;\n    }\n    .overlay-btn {\n        color: white !important;\n        font-size: 16px;\n        font-weight: 600;\n    }\n    .overlay-btn i {\n        margin-right: 5px;\n    }\n    .item-tag {\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        background: rgba(79, 192, 141, 0.9);\n        color: white;\n        padding: 2px 8px;\n\tborder-radius: 12px;\n        font-size: 12px;\n    }\n    .item-pin-badge {\n        position: absolute;\n        top: 10px;\n        left: 10px;\n        background: rgba(251, 191, 36, 0.95);\n        color: white;\n        padding: 4px 8px;\n        border-radius: 12px;\n        font-size: 12px;\n        font-weight: 600;\n        display: flex;\n        align-items: center;\n        gap: 4px;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        z-index: 10;\n    }\n    .item-pin-badge i {\n        font-size: 14px;\n    }\n    .item-content {\n        padding: 18px;\n    }\n    .item-title {\n        font-size: 16px;\n        font-weight: 600;\n        color: var(--text-color);\n        margin: 0 0 12px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        line-height: 1.5;\n        transition: color 0.3s ease;\n    }\n    .item-card:hover .item-title {\n        color: var(--main-color);\n    }\n    .item-meta {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 12px;\n    }\n    .item-price {\n        display: flex;\n        align-items: baseline;\n        font-weight: 700;\n        color: var(--price-color);\n    }\n    .price-symbol {\n        font-size: 14px;\n        margin-right: 2px;\n    }\n    .price-value {\n        font-size: 22px;\n    }\n    .item-place {\n        font-size: 13px;\n        color: var(--text-light);\n        display: flex;\n        align-items: center;\n    }\n    .item-place i {\n        margin-right: 4px;\n    }\n    .item-footer {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding-top: 12px;\n        border-top: 1px solid #f0f0f0;\n    }\n    .item-time {\n        font-size: 12px;\n        color: var(--text-gray);\n        display: flex;\n        align-items: center;\n    }\n    .item-time i {\n        margin-right: 4px;\n    }\n    .user-info {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n    }\n    .user-nickname {\n        font-size: 13px;\n        color: var(--text-light);\n        max-width: 80px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n    }\n\n    .table-container {\n        padding: 0 10px;\n        margin-bottom: 20px;\n    }\n    .el-table {\n        --el-table-header-text-color: var(--main-deep);\n        --el-table-row-hover-bg-color: var(--main-light);\n        --el-table-current-row-bg-color: #d4edda;\n        border-radius: 12px;\n        overflow: hidden;\n        box-shadow: 0 2px 12px rgba(79, 192, 141, 0.1);\n    }\n    .el-table :deep(.pinned-row) {\n        background-color: #fff9e6;\n    }\n    .table-title-cell {\n        display: flex;\n        align-items: center;\n    }\n    .table-title {\n        font-size: 15px;\n        color: var(--text-color);\n        font-weight: 500;\n    }\n    .table-image {\n        border-radius: 8px;\n        overflow: hidden;\n    }\n    .table-price {\n        color: var(--price-color);\n        font-weight: 700;\n        font-size: 16px;\n    }\n    .table-user {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-size: 14px;\n    }\n    .user-name {\n        color: var(--text-color);\n    }\n    .table-img-slot {\n        width: 80px;\n        height: 80px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: #f5f7fa;\n        color: var(--text-gray);\n        border-radius: 8px;\n    }\n\n    .pagination-container {\n        display: flex;\n        justify-content: center;\n        padding: 30px 0;\n    }\n    .el-pagination {\n        --el-pagination-button-active-bg-color: var(--main-color);\n        --el-pagination-button-active-border-color: var(--main-color);\n    }\n\n    .image-slot {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        width: 100%;\n        height: 100%;\n        background: #f5f7fa;\n        color: var(--text-gray);\n    }\n\n    @media (max-width: 768px) {\n        .carousel-content {\n            flex-direction: column;\n            padding: 30px 20px;\n            text-align: center;\n        }\n        .carousel-title {\n            font-size: 28px;\n        }\n        .carousel-subtitle {\n            font-size: 16px;\n        }\n        .carousel-right {\n            flex: 0 0 auto;\n            margin-top: 20px;\n        }\n        .carousel-item-preview {\n            max-width: 250px;\n        }\n        .preview-image {\n            width: 250px;\n            height: 150px;\n        }\n        .view-switch-container {\n            flex-direction: column;\n            gap: 15px;\n            align-items: flex-start;\n        }\n        .item-image-container {\n            height: 180px;\n        }\n        .swiper-container {\n            margin-bottom: 20px;\n        }\n        .custom-carousel {\n            height: 300px !important;\n        }\n    }\n</style>\n"],"sourceRoot":"src/components/page"}]}