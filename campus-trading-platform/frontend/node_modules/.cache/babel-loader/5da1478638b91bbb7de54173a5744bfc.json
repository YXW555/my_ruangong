{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\main.js","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\main.js","mtime":1767084583806},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"D:\\\\Git\\\\my_ruangong\\\\campus-trading-platform\\\\frontend\\\\node_modules\\\\core-js\\\\modules\\\\es6.array.iterator.js\";\nimport \"D:\\\\Git\\\\my_ruangong\\\\campus-trading-platform\\\\frontend\\\\node_modules\\\\core-js\\\\modules\\\\es6.promise.js\";\nimport \"D:\\\\Git\\\\my_ruangong\\\\campus-trading-platform\\\\frontend\\\\node_modules\\\\core-js\\\\modules\\\\es6.object.assign.js\";\nimport \"D:\\\\Git\\\\my_ruangong\\\\campus-trading-platform\\\\frontend\\\\node_modules\\\\core-js\\\\modules\\\\es7.promise.finally.js\";\nimport Vue from 'vue';\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport 'babel-polyfill';\nimport api from \"./api/index.js\";\nVue.prototype.$api = api;\nvar globalData = {\n  userInfo: {\n    nickname: ''\n  }\n};\nvar sta = {\n  isLogin: false,\n  adminName: ''\n};\nVue.prototype.$sta = sta;\nVue.prototype.$globalData = globalData; // 关闭生产提示\n\nVue.config.productionTip = false; // 全局引入ElementUI\n\nVue.use(ElementUI, {\n  size: 'medium'\n}); // 路由守卫 登录拦截\n\nrouter.beforeEach(function (to, from, next) {\n  document.title = \"\".concat(to.meta.title);\n  console.log('路由守卫 - 目标路径:', to.path, '来源路径:', from.path);\n  var nickname = Vue.prototype.$globalData.userInfo.nickname; // 需要登录的页面列表\n\n  var authRequiredPaths = ['/me', '/message', '/release', '/order', '/auto-reply']; // 检查是否需要登录\n\n  if (authRequiredPaths.includes(to.path)) {\n    console.log('需要登录验证的页面:', to.path, '当前用户昵称:', nickname);\n\n    if (!nickname) {\n      // 用户未登录，尝试获取用户信息\n      console.log('用户未登录，尝试获取用户信息...');\n      api.getUserInfo().then(function (res) {\n        console.log('getUserInfo响应:', res);\n\n        if (res.status_code !== 1) {\n          // 未登录，跳转到登录页\n          console.log('用户未登录，跳转到登录页');\n          next('/login');\n        } else {\n          // 已登录，更新用户信息并继续\n          res.data.signInTime = res.data.signInTime.substring(0, 10);\n          Vue.prototype.$globalData.userInfo = res.data;\n          console.log('用户已登录，允许访问:', to.path);\n          next(); // 允许访问目标页面\n        }\n      }).catch(function (e) {\n        console.error('获取用户信息失败:', e); // 获取用户信息失败，跳转到登录页\n\n        next('/login');\n      });\n    } else {\n      // 用户已登录，直接允许访问\n      console.log('用户已登录，直接允许访问:', to.path);\n      next();\n    }\n  } else {\n    // 不需要登录的页面，直接允许访问\n    next();\n  }\n}); // 创建Vue实例并挂载，仅此一份！\n\nnew Vue({\n  router: router,\n  render: function render(h) {\n    return h(App);\n  }\n}).$mount('#app');",{"version":3,"sources":["D:/Git/my_ruangong/campus-trading-platform/frontend/src/main.js"],"names":["Vue","App","router","ElementUI","api","prototype","$api","globalData","userInfo","nickname","sta","isLogin","adminName","$sta","$globalData","config","productionTip","use","size","beforeEach","to","from","next","document","title","meta","console","log","path","authRequiredPaths","includes","getUserInfo","then","res","status_code","data","signInTime","substring","catch","e","error","render","h","$mount"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport 'babel-polyfill';\n\nimport api from './api/index.js';\nVue.prototype.$api = api;\n\nlet globalData={\n    userInfo:{\n        nickname:''\n    }\n};\nlet sta={\n    isLogin:false,\n    adminName:''\n};\nVue.prototype.$sta = sta;\nVue.prototype.$globalData=globalData;\n\n// 关闭生产提示\nVue.config.productionTip = false;\n\n// 全局引入ElementUI\nVue.use(ElementUI, {\n    size: 'medium'\n});\n\n// 路由守卫 登录拦截\nrouter.beforeEach((to, from, next) => {\n    document.title = `${to.meta.title}`;\n    console.log('路由守卫 - 目标路径:', to.path, '来源路径:', from.path);\n\n    const nickname = Vue.prototype.$globalData.userInfo.nickname;\n\n    // 需要登录的页面列表\n    const authRequiredPaths = ['/me', '/message', '/release', '/order', '/auto-reply'];\n\n    // 检查是否需要登录\n    if (authRequiredPaths.includes(to.path)) {\n        console.log('需要登录验证的页面:', to.path, '当前用户昵称:', nickname);\n        if (!nickname) {\n            // 用户未登录，尝试获取用户信息\n            console.log('用户未登录，尝试获取用户信息...');\n            api.getUserInfo().then(res=>{\n                console.log('getUserInfo响应:',res);\n                if(res.status_code!==1){\n                    // 未登录，跳转到登录页\n                    console.log('用户未登录，跳转到登录页');\n                    next('/login');\n                }else {\n                    // 已登录，更新用户信息并继续\n                    res.data.signInTime=res.data.signInTime.substring(0,10);\n                    Vue.prototype.$globalData.userInfo=res.data;\n                    console.log('用户已登录，允许访问:', to.path);\n                    next(); // 允许访问目标页面\n                }\n            }).catch(e=>{\n                console.error('获取用户信息失败:', e);\n                // 获取用户信息失败，跳转到登录页\n                next('/login');\n            });\n        } else {\n            // 用户已登录，直接允许访问\n            console.log('用户已登录，直接允许访问:', to.path);\n            next();\n        }\n    } else {\n        // 不需要登录的页面，直接允许访问\n        next();\n    }\n});\n\n// 创建Vue实例并挂载，仅此一份！\nnew Vue({\n    router,\n    render: h => h(App)\n}).$mount('#app');\n"]}]}