{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\order.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\order.vue","mtime":1767423992981},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:/Git/my_ruangong/campus-trading-platform/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AppHead from \"../common/AppHeader.vue\";\nimport AppBody from \"../common/AppPageBody.vue\";\nimport AppFoot from \"../common/AppFoot.vue\";\nimport { initMap as _initMap, geocodeAddress, addMarker, calculateDistance as _calculateDistance, formatDistance, fitMapView, openNavigation } from \"../../utils/mapUtil\";\nexport default {\n  name: \"order\",\n  components: {\n    AppHead: AppHead,\n    AppBody: AppBody,\n    AppFoot: AppFoot\n  },\n  data: function data() {\n    return {\n      isLoading: false,\n      orderInfo: null,\n      productImage: '',\n      sellerName: '',\n      sellerAvatar: '',\n      buyerName: '',\n      buyerAvatar: '',\n      currentUserId: null,\n      isBuyer: false,\n      isSeller: false,\n      // 申请售后相关\n      afterSaleDialogVisible: false,\n      afterSaleSubmitting: false,\n      afterSaleForm: {\n        applicationType: null,\n        problemDescription: '',\n        refundAmount: 0,\n        evidenceImages: []\n      },\n      evidenceFileList: [],\n      afterSaleRules: {\n        applicationType: [{\n          required: true,\n          message: '请选择申请类型',\n          trigger: 'change'\n        }],\n        problemDescription: [{\n          required: true,\n          message: '请填写问题描述',\n          trigger: 'blur'\n        }, {\n          min: 10,\n          max: 500,\n          message: '问题描述长度在10到500个字符',\n          trigger: 'blur'\n        }]\n      },\n      afterSaleInfo: null,\n      // 售后申请信息\n      // 卖家审核售后相关\n      sellerReviewDialogVisible: false,\n      sellerReviewSubmitting: false,\n      sellerReviewForm: {\n        reviewResult: 1,\n        rejectReason: '',\n        sellerEvidenceImages: []\n      },\n      sellerReviewRules: {\n        reviewResult: [{\n          required: true,\n          message: '请选择审核结果',\n          trigger: 'change'\n        }],\n        rejectReason: [{\n          required: true,\n          message: '拒绝申请时必须填写拒绝原因',\n          trigger: 'blur'\n        }]\n      },\n      sellerEvidenceUploadList: [],\n      // 地图相关\n      map: null,\n      sellerLocation: null,\n      // 卖家位置 {lng, lat, address}\n      buyerLocation: null,\n      // 买家位置 {lng, lat, address}\n      buyerAddressText: '',\n      // 买家地址原始文本（即使解析失败也显示）\n      distanceKm: null,\n      // 距离（公里）\n      distanceText: '',\n      // 距离文本\n      geocoder: null // 地址解析器\n\n    };\n  },\n  computed: {\n    // 是否显示交易地点导航（待发货或待收货时显示）\n    showLocationNavigation: function showLocationNavigation() {\n      if (!this.orderInfo) return false; // 订单状态：1-待发货，2-待收货\n      // 且已支付\n\n      return (this.orderInfo.orderStatus === 1 || this.orderInfo.orderStatus === 2) && this.orderInfo.paymentStatus === 1 && this.orderInfo.idleItem && this.orderInfo.idleItem.idlePlace;\n    }\n  },\n  created: function created() {\n    this.currentUserId = this.getCookie('shUserId');\n    this.loadOrderInfo();\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    // 等待DOM更新后再初始化地图\n    this.$nextTick(function () {\n      if (_this.showLocationNavigation) {\n        _this.initMap();\n      }\n    });\n  },\n  watch: {\n    showLocationNavigation: function showLocationNavigation(newVal) {\n      var _this2 = this;\n\n      if (newVal) {\n        this.$nextTick(function () {\n          _this2.initMap();\n        });\n      } else {\n        this.destroyMap();\n      }\n    }\n  },\n  methods: {\n    loadOrderInfo: function loadOrderInfo() {\n      var _this3 = this;\n\n      var orderId = this.$route.query.id;\n\n      if (!orderId) {\n        this.$message.error('订单ID不存在');\n        this.$router.push('/index');\n        return;\n      }\n\n      this.isLoading = true;\n      this.$api.getOrder({\n        id: orderId\n      }).then(function (res) {\n        if (res.status_code === 1 && res.data) {\n          _this3.orderInfo = res.data; // 判断当前用户是买家还是卖家\n\n          if (_this3.currentUserId) {\n            var currentUserIdNum = parseInt(_this3.currentUserId);\n            _this3.isBuyer = _this3.orderInfo.userId === currentUserIdNum;\n            _this3.isSeller = _this3.orderInfo.idleItem && _this3.orderInfo.idleItem.userId === currentUserIdNum;\n          } // 处理商品图片\n\n\n          if (_this3.orderInfo.idleItem && _this3.orderInfo.idleItem.pictureList) {\n            try {\n              var pictureList = JSON.parse(_this3.orderInfo.idleItem.pictureList);\n\n              if (pictureList && pictureList.length > 0) {\n                _this3.productImage = pictureList[0];\n              }\n            } catch (e) {\n              console.error('解析商品图片失败:', e);\n            }\n          } // 处理卖家信息\n\n\n          if (_this3.orderInfo.idleItem) {\n            if (_this3.orderInfo.idleItem.user) {\n              _this3.sellerName = _this3.orderInfo.idleItem.user.nickname || '未知卖家';\n              _this3.sellerAvatar = _this3.orderInfo.idleItem.user.avatar || '';\n            } else if (_this3.orderInfo.idleItem.userId) {\n              // 如果没有user对象，但有userId，尝试获取用户信息\n              _this3.loadSellerInfo(_this3.orderInfo.idleItem.userId);\n            }\n          } // 加载售后申请信息\n\n\n          _this3.loadAfterSaleInfo(); // 处理买家信息\n\n\n          if (_this3.orderInfo.user) {\n            _this3.buyerName = _this3.orderInfo.user.nickname || '未知买家';\n            _this3.buyerAvatar = _this3.orderInfo.user.avatar || '';\n          } // 加载买家地址（无论是否显示地图都需要加载，用于显示）\n\n\n          _this3.loadBuyerAddressForDisplay(); // 如果显示地图，初始化地图\n\n\n          if (_this3.showLocationNavigation) {\n            _this3.$nextTick(function () {\n              _this3.initMap();\n            });\n          }\n        } else {\n          _this3.$message.error(res.msg || '订单不存在');\n\n          _this3.orderInfo = null;\n        }\n      }).catch(function (e) {\n        console.error('获取订单信息失败:', e);\n\n        _this3.$message.error('获取订单信息失败');\n\n        _this3.orderInfo = null;\n      }).finally(function () {\n        _this3.isLoading = false;\n      });\n    },\n    goToPay: function goToPay() {\n      var _this4 = this;\n\n      if (!this.orderInfo || !this.orderInfo.id) {\n        this.$message.error('订单信息不存在');\n        return;\n      } // 确认支付\n\n\n      this.$confirm('确认支付 ¥' + this.orderInfo.orderPrice + ' 吗？', '确认支付', {\n        confirmButtonText: '确认支付',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        // 调用模拟支付接口\n        _this4.$api.simulatePay({\n          orderId: _this4.orderInfo.id\n        }).then(function (res) {\n          if (res.status_code === 1) {\n            _this4.$message.success('支付成功！'); // 跳转到支付成功页面\n\n\n            _this4.$router.push({\n              path: '/alipay/pay',\n              query: {\n                orderNumber: _this4.orderInfo.orderNumber,\n                price: _this4.orderInfo.orderPrice,\n                orderId: _this4.orderInfo.id\n              }\n            });\n          } else {\n            _this4.$message.error(res.msg || '支付失败，请稍后重试');\n          }\n        }).catch(function (e) {\n          console.error('支付失败:', e);\n\n          _this4.$message.error('支付失败，请稍后重试');\n        });\n      }).catch(function () {// 用户取消支付\n      });\n    },\n    goBack: function goBack() {\n      this.$router.go(-1);\n    },\n    loadSellerInfo: function loadSellerInfo(userId) {\n      // 如果后端没有返回user信息，可以尝试通过API获取\n      // 这里暂时不实现，因为通常后端应该返回完整的user信息\n      console.log('卖家ID:', userId);\n    },\n    getCookie: function getCookie(cname) {\n      var name = cname + \"=\";\n      var ca = document.cookie.split(';');\n\n      for (var i = 0; i < ca.length; i++) {\n        var c = ca[i].trim();\n        if (c.indexOf(name) === 0) return c.substring(name.length, c.length);\n      }\n\n      return \"\";\n    },\n    goToChat: function goToChat() {\n      if (!this.orderInfo || !this.orderInfo.idleItem) {\n        this.$message.error('商品信息不存在');\n        return;\n      }\n\n      var sellerId = this.orderInfo.idleItem.userId;\n      var idleId = this.orderInfo.idleItem.id;\n\n      if (!sellerId) {\n        this.$message.error('卖家信息不存在');\n        return;\n      } // 跳转到私信页面\n\n\n      this.$router.push({\n        path: '/chat',\n        query: {\n          targetUserId: sellerId,\n          idleId: idleId\n        }\n      });\n    },\n    goToChatWithBuyer: function goToChatWithBuyer() {\n      if (!this.orderInfo || !this.orderInfo.userId) {\n        this.$message.error('买家信息不存在');\n        return;\n      }\n\n      var buyerId = this.orderInfo.userId;\n      var idleId = this.orderInfo.idleItem ? this.orderInfo.idleItem.id : null; // 跳转到私信页面\n\n      this.$router.push({\n        path: '/chat',\n        query: {\n          targetUserId: buyerId,\n          idleId: idleId\n        }\n      });\n    },\n    confirmShip: function confirmShip() {\n      var _this5 = this;\n\n      this.$confirm('确认已发货吗？', '确认发货', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this5.$api.updateOrder({\n          id: _this5.orderInfo.id,\n          orderStatus: 2 // 待收货\n\n        }).then(function (res) {\n          if (res.status_code === 1) {\n            _this5.$message.success('发货成功！');\n\n            _this5.loadOrderInfo(); // 刷新订单信息\n\n          } else {\n            _this5.$message.error(res.msg || '发货失败');\n          }\n        }).catch(function (e) {\n          console.error('发货失败:', e);\n\n          _this5.$message.error('发货失败，请稍后重试');\n        });\n      }).catch(function () {});\n    },\n    confirmReceive: function confirmReceive() {\n      var _this6 = this;\n\n      this.$confirm('确认已收到商品吗？', '确认收货', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this6.$api.updateOrder({\n          id: _this6.orderInfo.id,\n          orderStatus: 3 // 已完成\n\n        }).then(function (res) {\n          if (res.status_code === 1) {\n            _this6.$message.success('确认收货成功！');\n\n            _this6.loadOrderInfo(); // 刷新订单信息\n\n          } else {\n            _this6.$message.error(res.msg || '确认收货失败');\n          }\n        }).catch(function (e) {\n          console.error('确认收货失败:', e);\n\n          _this6.$message.error('确认收货失败，请稍后重试');\n        });\n      }).catch(function () {});\n    },\n    getStatusType: function getStatusType(status) {\n      var types = {\n        0: 'warning',\n        // 待付款\n        1: 'info',\n        // 待发货\n        2: 'primary',\n        // 待收货\n        3: 'success',\n        // 已完成\n        4: 'danger' // 已取消\n\n      };\n      return types[status] || 'info';\n    },\n    getStatusText: function getStatusText(status) {\n      var texts = {\n        0: '待付款',\n        1: '待发货',\n        2: '待收货',\n        3: '已完成',\n        4: '已取消'\n      };\n      return texts[status] || '未知状态';\n    },\n    formatTime: function formatTime(time) {\n      if (!time) return '';\n      return time.toString().substring(0, 19).replace('T', ' ');\n    },\n    openAfterSaleDialog: function openAfterSaleDialog() {\n      var _this7 = this;\n\n      // 检查是否已有售后申请\n      if (this.orderInfo && this.orderInfo.id) {\n        this.$api.getAfterSaleByOrderId({\n          orderId: this.orderInfo.id\n        }).then(function (res) {\n          if (res.status_code === 1 && res.data) {\n            _this7.$message.warning('该订单已有售后申请，请勿重复申请');\n          } else {\n            // 初始化表单\n            _this7.afterSaleForm.refundAmount = _this7.orderInfo ? _this7.orderInfo.orderPrice : 0;\n            _this7.afterSaleDialogVisible = true;\n          }\n        }).catch(function (e) {\n          console.error('检查售后申请失败:', e);\n          _this7.afterSaleForm.refundAmount = _this7.orderInfo ? _this7.orderInfo.orderPrice : 0;\n          _this7.afterSaleDialogVisible = true;\n        });\n      }\n    },\n    resetAfterSaleForm: function resetAfterSaleForm() {\n      if (this.$refs.afterSaleForm) {\n        this.$refs.afterSaleForm.resetFields();\n      }\n\n      this.afterSaleForm = {\n        applicationType: null,\n        problemDescription: '',\n        refundAmount: 0,\n        evidenceImages: []\n      };\n      this.evidenceFileList = [];\n    },\n    beforeAfterSaleUpload: function beforeAfterSaleUpload(file) {\n      var isImage = file.type.startsWith('image/');\n      var isLt5M = file.size / 1024 / 1024 < 5;\n\n      if (!isImage) {\n        this.$message.error('只能上传图片文件!');\n        return false;\n      }\n\n      if (!isLt5M) {\n        this.$message.error('图片大小不能超过 5MB!');\n        return false;\n      }\n\n      return true;\n    },\n    beforeEvidenceUpload: function beforeEvidenceUpload(file) {\n      var isImage = file.type.startsWith('image/');\n      var isLt5M = file.size / 1024 / 1024 < 5;\n\n      if (!isImage) {\n        this.$message.error('只能上传图片文件!');\n        return false;\n      }\n\n      if (!isLt5M) {\n        this.$message.error('图片大小不能超过5MB!');\n        return false;\n      }\n\n      return true;\n    },\n    handleEvidenceSuccess: function handleEvidenceSuccess(res, file) {\n      var imageUrl = '';\n\n      if (res.status_code === 1 && res.data) {\n        imageUrl = res.data;\n      } else if (typeof res === 'string') {\n        try {\n          var parsed = JSON.parse(res);\n\n          if (parsed.status_code === 1 && parsed.data) {\n            imageUrl = parsed.data;\n          }\n        } catch (e) {\n          console.error('解析上传响应失败:', e);\n        }\n      }\n\n      if (imageUrl) {\n        this.afterSaleForm.evidenceImages.push(imageUrl);\n        this.$message.success('图片上传成功');\n      } else {\n        this.$message.error('图片上传失败');\n      }\n    },\n    handleEvidenceRemove: function handleEvidenceRemove(file, fileList) {\n      // 从证据图片列表中移除\n      if (file.response && file.response.data) {\n        var index = this.afterSaleForm.evidenceImages.indexOf(file.response.data);\n\n        if (index > -1) {\n          this.afterSaleForm.evidenceImages.splice(index, 1);\n        }\n      } else if (file.url) {\n        var _index = this.afterSaleForm.evidenceImages.indexOf(file.url);\n\n        if (_index > -1) {\n          this.afterSaleForm.evidenceImages.splice(_index, 1);\n        }\n      }\n    },\n    submitAfterSale: function submitAfterSale() {\n      var _this8 = this;\n\n      this.$refs.afterSaleForm.validate(function (valid) {\n        if (!valid) {\n          return false;\n        }\n\n        if (_this8.afterSaleForm.evidenceImages.length === 0) {\n          _this8.$message.warning('请至少上传一张证据图片');\n\n          return;\n        }\n\n        _this8.afterSaleSubmitting = true;\n        var formData = {\n          orderId: _this8.orderInfo.id,\n          applicationType: _this8.afterSaleForm.applicationType,\n          problemDescription: _this8.afterSaleForm.problemDescription,\n          evidenceImages: JSON.stringify(_this8.afterSaleForm.evidenceImages),\n          refundAmount: _this8.afterSaleForm.refundAmount\n        };\n\n        _this8.$api.applyAfterSale(formData).then(function (res) {\n          if (res.status_code === 1) {\n            _this8.$message.success('售后申请提交成功，等待卖家审核');\n\n            _this8.afterSaleDialogVisible = false;\n\n            _this8.loadOrderInfo(); // 刷新订单信息\n\n          } else {\n            _this8.$message.error(res.msg || '申请失败，请稍后重试');\n          }\n        }).catch(function (e) {\n          console.error('提交售后申请失败:', e);\n\n          _this8.$message.error('申请失败，请稍后重试');\n        }).finally(function () {\n          _this8.afterSaleSubmitting = false;\n        });\n      });\n    },\n    loadAfterSaleInfo: function loadAfterSaleInfo() {\n      var _this9 = this;\n\n      if (!this.orderInfo || !this.orderInfo.id) return;\n      this.$api.getAfterSaleByOrderId({\n        orderId: this.orderInfo.id\n      }).then(function (res) {\n        if (res.status_code === 1 && res.data) {\n          _this9.afterSaleInfo = res.data;\n        } else {\n          _this9.afterSaleInfo = null;\n        }\n      }).catch(function (e) {\n        console.error('加载售后申请信息失败:', e);\n        _this9.afterSaleInfo = null;\n      });\n    },\n    openSellerReviewDialog: function openSellerReviewDialog() {\n      if (!this.afterSaleInfo) {\n        this.$message.warning('售后申请信息不存在');\n        return;\n      }\n\n      this.sellerReviewForm.reviewResult = 1;\n      this.sellerReviewForm.rejectReason = '';\n      this.sellerReviewForm.sellerEvidenceImages = [];\n      this.sellerEvidenceUploadList = [];\n      this.sellerReviewDialogVisible = true;\n    },\n    resetSellerReviewForm: function resetSellerReviewForm() {\n      if (this.$refs.sellerReviewForm) {\n        this.$refs.sellerReviewForm.resetFields();\n      }\n\n      this.sellerReviewForm = {\n        reviewResult: 1,\n        rejectReason: '',\n        sellerEvidenceImages: []\n      };\n      this.sellerEvidenceUploadList = [];\n    },\n    handleSellerEvidenceUploadSuccess: function handleSellerEvidenceUploadSuccess(response, file, fileList) {\n      if (response.status_code === 1 && response.data) {\n        this.sellerReviewForm.sellerEvidenceImages.push(response.data);\n        this.$message.success('图片上传成功');\n      } else {\n        this.$message.error('图片上传失败');\n      }\n    },\n    handleSellerEvidenceUploadRemove: function handleSellerEvidenceUploadRemove(file, fileList) {\n      if (file.response && file.response.data) {\n        var index = this.sellerReviewForm.sellerEvidenceImages.indexOf(file.response.data);\n\n        if (index > -1) {\n          this.sellerReviewForm.sellerEvidenceImages.splice(index, 1);\n        }\n      } else if (file.url) {\n        var _index2 = this.sellerReviewForm.sellerEvidenceImages.indexOf(file.url);\n\n        if (_index2 > -1) {\n          this.sellerReviewForm.sellerEvidenceImages.splice(_index2, 1);\n        }\n      }\n    },\n    submitSellerReview: function submitSellerReview() {\n      var _this10 = this;\n\n      this.$refs.sellerReviewForm.validate(function (valid) {\n        if (!valid) {\n          return false;\n        }\n\n        if (_this10.sellerReviewForm.reviewResult === 2 && !_this10.sellerReviewForm.rejectReason) {\n          _this10.$message.warning('拒绝申请时必须填写拒绝原因');\n\n          return;\n        }\n\n        _this10.sellerReviewSubmitting = true;\n        var formData = {\n          id: _this10.afterSaleInfo.id,\n          reviewResult: _this10.sellerReviewForm.reviewResult,\n          rejectReason: _this10.sellerReviewForm.rejectReason || null,\n          sellerEvidenceImages: _this10.sellerReviewForm.sellerEvidenceImages.length > 0 ? JSON.stringify(_this10.sellerReviewForm.sellerEvidenceImages) : null\n        };\n\n        _this10.$api.reviewAfterSale(formData).then(function (res) {\n          if (res.status_code === 1) {\n            _this10.$message.success('审核成功');\n\n            _this10.sellerReviewDialogVisible = false;\n\n            _this10.loadAfterSaleInfo(); // 刷新售后申请信息\n\n\n            _this10.loadOrderInfo(); // 刷新订单信息\n\n          } else {\n            _this10.$message.error(res.msg || '审核失败，请稍后重试');\n          }\n        }).catch(function (e) {\n          console.error('审核售后申请失败:', e);\n\n          _this10.$message.error('审核失败，请稍后重试');\n        }).finally(function () {\n          _this10.sellerReviewSubmitting = false;\n        });\n      });\n    },\n    getAfterSaleStatusText: function getAfterSaleStatusText(status) {\n      var statuses = {\n        0: '待卖家审核',\n        1: '卖家已同意',\n        2: '卖家已拒绝',\n        3: '待管理员审核（卖家同意）',\n        4: '待管理员审核（卖家拒绝）',\n        5: '管理员已同意退款',\n        6: '管理员已驳回'\n      };\n      return statuses[status] || '未知状态';\n    },\n    getAfterSaleStatusType: function getAfterSaleStatusType(status) {\n      if (status === 0 || status === 3 || status === 4) return 'warning';\n      if (status === 1 || status === 5) return 'success';\n      if (status === 2 || status === 6) return 'error';\n      return 'info';\n    },\n    getApplicationTypeText: function getApplicationTypeText(type) {\n      var types = {\n        1: '质量问题',\n        2: '描述不符',\n        3: '未收到货',\n        4: '其他'\n      };\n      return types[type] || '未知';\n    },\n    getEvidenceImages: function getEvidenceImages(imagesStr) {\n      if (!imagesStr) return [];\n\n      try {\n        return JSON.parse(imagesStr);\n      } catch (e) {\n        return [];\n      }\n    },\n    getFundStatusText: function getFundStatusText(status) {\n      if (status === null || status === undefined) {\n        return '未知';\n      }\n\n      var statuses = {\n        0: '平台担保中',\n        1: '已释放给卖家'\n      };\n      return statuses[status] || '未知';\n    },\n    getFundStatusType: function getFundStatusType(status) {\n      if (status === null || status === undefined) {\n        return 'info';\n      }\n\n      if (status === 0) {\n        return 'warning'; // 平台担保中\n      } else if (status === 1) {\n        return 'success'; // 已释放\n      }\n\n      return 'info';\n    },\n    getFundReleaseDate: function getFundReleaseDate(finishTime) {\n      if (!finishTime) return '';\n\n      try {\n        var finish = new Date(finishTime);\n        var releaseDate = new Date(finish);\n        releaseDate.setDate(releaseDate.getDate() + 7); // 加7天\n\n        return releaseDate.toLocaleDateString('zh-CN', {\n          year: 'numeric',\n          month: '2-digit',\n          day: '2-digit'\n        });\n      } catch (e) {\n        return '';\n      }\n    },\n    // ========== 地图相关方法 ==========\n    // 初始化地图\n    initMap: function () {\n      var _initMap2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this11 = this;\n\n        var container;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.$refs.mapContainer) {\n                  _context.next = 3;\n                  break;\n                }\n\n                console.warn('地图容器不存在，等待DOM更新');\n                return _context.abrupt(\"return\");\n\n              case 3:\n                // 确保容器有高度\n                container = document.getElementById('order-map-container');\n\n                if (container) {\n                  _context.next = 7;\n                  break;\n                }\n\n                console.error('找不到地图容器元素');\n                return _context.abrupt(\"return\");\n\n              case 7:\n                _context.prev = 7;\n\n                // 销毁旧地图\n                if (this.map) {\n                  this.map.destroy();\n                  this.map = null;\n                }\n\n                console.log('开始初始化地图，容器ID: order-map-container'); // 动态加载地图API并创建地图实例\n\n                _context.next = 12;\n                return _initMap('order-map-container', {\n                  zoom: 13\n                });\n\n              case 12:\n                this.map = _context.sent;\n                console.log('地图实例创建成功:', this.map); // 等待地图加载完成\n\n                this.map.on('complete', function () {\n                  console.log('地图加载完成，开始解析地址'); // 解析地址并显示标记\n\n                  _this11.geocodeAddresses();\n                }); // 如果地图已经加载完成，直接解析地址\n\n                if (this.map.getStatus() === 'complete') {\n                  console.log('地图已加载完成，直接解析地址');\n                  this.geocodeAddresses();\n                }\n\n                _context.next = 22;\n                break;\n\n              case 18:\n                _context.prev = 18;\n                _context.t0 = _context[\"catch\"](7);\n                console.error('地图初始化失败:', _context.t0);\n                this.$message.error('地图初始化失败: ' + _context.t0.message);\n\n              case 22:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[7, 18]]);\n      }));\n\n      function initMap() {\n        return _initMap2.apply(this, arguments);\n      }\n\n      return initMap;\n    }(),\n    // 解析地址\n    geocodeAddresses: function () {\n      var _geocodeAddresses = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var sellerAddress, sellerLoc, sellerMarker, buyerAddress, buyerLoc, buyerMarker;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.map) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                console.error('地图实例不存在，无法解析地址');\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                console.log('开始解析地址，地图实例:', this.map); // 解析卖家地址\n\n                sellerAddress = this.orderInfo.idleItem.idlePlace;\n\n                if (!sellerAddress) {\n                  _context2.next = 23;\n                  break;\n                }\n\n                _context2.prev = 6;\n                console.log('开始解析卖家地址:', sellerAddress);\n                _context2.next = 10;\n                return geocodeAddress(sellerAddress);\n\n              case 10:\n                sellerLoc = _context2.sent;\n                console.log('卖家地址解析成功，位置:', sellerLoc);\n                this.sellerLocation = sellerLoc; // 添加标记\n\n                sellerMarker = addMarker(this.map, sellerLoc, '卖家位置', 'seller');\n\n                if (sellerMarker) {\n                  console.log('卖家标记已添加:', sellerMarker); // 立即调整到卖家位置（如果只有卖家地址）\n                  // 不等待，直接设置，确保地图显示正确位置\n\n                  this.map.setCenter([sellerLoc.lng, sellerLoc.lat]);\n                  this.map.setZoom(15);\n                  console.log('地图已调整到卖家位置:', [sellerLoc.lng, sellerLoc.lat]);\n                } else {\n                  console.error('卖家标记添加失败');\n                }\n\n                _context2.next = 21;\n                break;\n\n              case 17:\n                _context2.prev = 17;\n                _context2.t0 = _context2[\"catch\"](6);\n                console.error('卖家地址解析失败:', _context2.t0);\n                this.$message.warning('卖家地址解析失败: ' + _context2.t0.message);\n\n              case 21:\n                _context2.next = 24;\n                break;\n\n              case 23:\n                console.warn('卖家未填写发货地址');\n\n              case 24:\n                _context2.next = 26;\n                return this.loadBuyerAddress();\n\n              case 26:\n                buyerAddress = _context2.sent;\n\n                if (!buyerAddress) {\n                  _context2.next = 45;\n                  break;\n                }\n\n                _context2.prev = 28;\n                console.log('开始解析买家地址:', buyerAddress);\n                _context2.next = 32;\n                return geocodeAddress(buyerAddress);\n\n              case 32:\n                buyerLoc = _context2.sent;\n                console.log('买家地址解析成功，位置:', buyerLoc);\n                this.buyerLocation = buyerLoc; // 添加标记\n\n                buyerMarker = addMarker(this.map, buyerLoc, '买家位置', 'buyer');\n\n                if (buyerMarker) {\n                  console.log('买家标记已添加:', buyerMarker); // 更新地图视野（包含两个位置）\n                  // 立即更新，不延迟\n\n                  this.updateMapView(); // 计算距离\n\n                  this.calculateDistance();\n                  console.log('距离计算完成');\n                } else {\n                  console.error('买家标记添加失败');\n                }\n\n                _context2.next = 43;\n                break;\n\n              case 39:\n                _context2.prev = 39;\n                _context2.t1 = _context2[\"catch\"](28);\n                console.error('买家地址解析失败:', _context2.t1);\n                this.$message.warning('买家地址解析失败，但已显示原始地址');\n\n              case 43:\n                _context2.next = 46;\n                break;\n\n              case 45:\n                console.warn('买家地址为空');\n\n              case 46:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[6, 17], [28, 39]]);\n      }));\n\n      function geocodeAddresses() {\n        return _geocodeAddresses.apply(this, arguments);\n      }\n\n      return geocodeAddresses;\n    }(),\n    // 加载买家地址（用于地图解析）\n    loadBuyerAddress: function () {\n      var _loadBuyerAddress = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                console.log('开始加载买家地址，订单ID:', this.orderInfo.id);\n                _context3.next = 4;\n                return this.$api.getOrderAddress({\n                  orderId: this.orderInfo.id\n                });\n\n              case 4:\n                res = _context3.sent;\n                console.log('获取订单地址API响应:', res);\n\n                if (!(res.status_code === 1 && res.data)) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                if (!res.data.detailAddress) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                console.log('找到买家地址:', res.data.detailAddress); // 保存原始地址文本，即使解析失败也显示\n\n                this.buyerAddressText = res.data.detailAddress;\n                return _context3.abrupt(\"return\", res.data.detailAddress);\n\n              case 13:\n                console.warn('订单地址数据存在，但detailAddress为空:', res.data);\n\n              case 14:\n                _context3.next = 17;\n                break;\n\n              case 16:\n                console.warn('订单地址API返回失败或数据为空:', res);\n\n              case 17:\n                return _context3.abrupt(\"return\", null);\n\n              case 20:\n                _context3.prev = 20;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.error('加载买家地址异常:', _context3.t0);\n                return _context3.abrupt(\"return\", null);\n\n              case 24:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 20]]);\n      }));\n\n      function loadBuyerAddress() {\n        return _loadBuyerAddress.apply(this, arguments);\n      }\n\n      return loadBuyerAddress;\n    }(),\n    // 加载买家地址（仅用于显示，不用于地图解析）\n    loadBuyerAddressForDisplay: function () {\n      var _loadBuyerAddressForDisplay = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                console.log('开始加载买家地址用于显示，订单ID:', this.orderInfo.id);\n                _context4.next = 4;\n                return this.$api.getOrderAddress({\n                  orderId: this.orderInfo.id\n                });\n\n              case 4:\n                res = _context4.sent;\n                console.log('获取订单地址API响应（显示用）:', res);\n\n                if (res.status_code === 1 && res.data && res.data.detailAddress) {\n                  console.log('找到买家地址用于显示:', res.data.detailAddress);\n                  this.buyerAddressText = res.data.detailAddress;\n                } else {\n                  console.warn('未找到买家地址:', res);\n                  this.buyerAddressText = '';\n                }\n\n                _context4.next = 13;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error('加载买家地址异常（显示用）:', _context4.t0);\n                this.buyerAddressText = '';\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 9]]);\n      }));\n\n      function loadBuyerAddressForDisplay() {\n        return _loadBuyerAddressForDisplay.apply(this, arguments);\n      }\n\n      return loadBuyerAddressForDisplay;\n    }(),\n    // 更新地图视野\n    updateMapView: function updateMapView() {\n      var _this12 = this;\n\n      if (!this.map) {\n        console.warn('updateMapView: 地图实例不存在');\n        return;\n      }\n\n      var locations = [];\n\n      if (this.sellerLocation) {\n        locations.push(this.sellerLocation);\n        console.log('添加卖家位置到视野:', this.sellerLocation);\n      }\n\n      if (this.buyerLocation) {\n        locations.push(this.buyerLocation);\n        console.log('添加买家位置到视野:', this.buyerLocation);\n      }\n\n      if (locations.length > 0) {\n        console.log('调整地图视野，包含', locations.length, '个位置');\n        console.log('位置详情:', locations.map(function (loc) {\n          return {\n            lng: loc.lng,\n            lat: loc.lat,\n            address: loc.address\n          };\n        }));\n\n        try {\n          fitMapView(this.map, locations); // 延迟检查地图视野是否已更新\n\n          setTimeout(function () {\n            try {\n              var center = _this12.map.getCenter();\n\n              var zoom = _this12.map.getZoom();\n\n              console.log('地图当前中心点:', center.toString(), '缩放级别:', zoom);\n            } catch (e) {\n              console.error('获取地图中心点失败:', e);\n            }\n          }, 300);\n        } catch (e) {\n          console.error('调整地图视野异常:', e); // 如果失败，至少设置到第一个位置\n\n          if (locations.length > 0 && locations[0].lng && locations[0].lat) {\n            this.map.setCenter([locations[0].lng, locations[0].lat]);\n            this.map.setZoom(15);\n            console.log('使用备用方法设置地图中心:', [locations[0].lng, locations[0].lat]);\n          }\n        }\n      } else {\n        console.warn('updateMapView: 没有可用的位置');\n      }\n    },\n    // 计算距离\n    calculateDistance: function calculateDistance() {\n      if (!this.sellerLocation || !this.buyerLocation) return;\n\n      try {\n        var distance = _calculateDistance(this.sellerLocation, this.buyerLocation);\n\n        if (distance !== null) {\n          this.distanceKm = (distance / 1000).toFixed(2);\n          this.distanceText = formatDistance(distance);\n        }\n      } catch (e) {\n        console.error('距离计算失败:', e);\n      }\n    },\n    // 导航到卖家位置\n    navigateToSeller: function navigateToSeller() {\n      // 优先使用解析后的位置\n      if (this.sellerLocation) {\n        try {\n          openNavigation(this.sellerLocation, 'car');\n          return;\n        } catch (e) {\n          console.error('使用解析位置导航失败:', e);\n        }\n      } // 如果解析失败，使用原始地址\n\n\n      var sellerAddress = this.orderInfo.idleItem && this.orderInfo.idleItem.idlePlace;\n\n      if (sellerAddress) {\n        // 直接使用原始地址进行导航（高德地图会尝试搜索）\n        var url = \"https://uri.amap.com/navigation?to=\".concat(encodeURIComponent(sellerAddress), \"&mode=car&policy=1&src=mypage&callnative=1\");\n        window.open(url, '_blank');\n        this.$message.info('正在使用原始地址进行导航');\n      } else {\n        this.$message.warning('卖家地址未填写');\n      }\n    },\n    // 导航到买家位置\n    navigateToBuyer: function navigateToBuyer() {\n      // 优先使用解析后的位置\n      if (this.buyerLocation) {\n        try {\n          openNavigation(this.buyerLocation, 'car');\n          return;\n        } catch (e) {\n          console.error('使用解析位置导航失败:', e);\n        }\n      } // 如果解析失败，使用原始地址\n\n\n      if (this.buyerAddressText) {\n        // 直接使用原始地址进行导航（高德地图会尝试搜索）\n        var url = \"https://uri.amap.com/navigation?to=\".concat(encodeURIComponent(this.buyerAddressText), \"&mode=car&policy=1&src=mypage&callnative=1\");\n        window.open(url, '_blank');\n        this.$message.info('正在使用原始地址进行导航');\n      } else {\n        this.$message.warning('买家地址未填写');\n      }\n    },\n    // 刷新地图\n    refreshMap: function refreshMap() {\n      this.sellerLocation = null;\n      this.buyerLocation = null;\n      this.buyerAddressText = '';\n      this.distanceKm = null;\n      this.distanceText = '';\n\n      if (this.map) {\n        this.map.clearMap();\n      }\n\n      this.geocodeAddresses();\n      this.$message.success('地图已刷新');\n    },\n    // 销毁地图\n    destroyMap: function destroyMap() {\n      if (this.map) {\n        this.map.destroy();\n        this.map = null;\n      }\n\n      this.sellerLocation = null;\n      this.buyerLocation = null;\n      this.buyerAddressText = '';\n      this.distanceKm = null;\n      this.distanceText = '';\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.destroyMap();\n  }\n};",{"version":3,"sources":["order.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <app-head></app-head>\n        <app-body>\n            <div class=\"order-container\" v-loading=\"isLoading\">\n                <el-card class=\"order-card\" shadow=\"hover\" v-if=\"orderInfo\">\n                    <div slot=\"header\" class=\"card-header\">\n                        <h2 class=\"order-title\">\n                            <i class=\"el-icon-shopping-bag-2\"></i> 订单详情\n                        </h2>\n                </div>\n                \n                    <!-- 订单信息 -->\n                    <div class=\"order-info-section\">\n                        <div class=\"info-row\">\n                            <span class=\"info-label\">订单编号：</span>\n                            <span class=\"info-value\">{{ orderInfo.orderNumber }}</span>\n                            </div>\n                        <div class=\"info-row\">\n                            <span class=\"info-label\">订单状态：</span>\n                            <el-tag :type=\"getStatusType(orderInfo.orderStatus)\" size=\"medium\">\n                                {{ getStatusText(orderInfo.orderStatus) }}\n                        </el-tag>\n                            </div>\n                        <div class=\"info-row\">\n                            <span class=\"info-label\">支付状态：</span>\n                            <el-tag :type=\"orderInfo.paymentStatus === 1 ? 'success' : 'warning'\" size=\"medium\">\n                                {{ orderInfo.paymentStatus === 1 ? '已支付' : '待支付' }}\n                            </el-tag>\n                        </div>\n                        <!-- 资金状态（卖家视角，订单已完成时显示） -->\n                        <div class=\"info-row\" v-if=\"isSeller && orderInfo.orderStatus === 3 && orderInfo.paymentStatus === 1\">\n                            <span class=\"info-label\">资金状态：</span>\n                            <el-tag :type=\"getFundStatusType(orderInfo.fundStatus)\" size=\"medium\">\n                                {{ getFundStatusText(orderInfo.fundStatus) }}\n                            </el-tag>\n                            <span v-if=\"orderInfo.fundStatus === 0 && orderInfo.finishTime\" class=\"fund-hint\">\n                                （预计 {{ getFundReleaseDate(orderInfo.finishTime) }} 释放）\n                            </span>\n                        </div>\n                        <div class=\"info-row\">\n                            <span class=\"info-label\">订单金额：</span>\n                            <span class=\"info-value price\">¥{{ orderInfo.orderPrice }}</span>\n                        </div>\n                        <div class=\"info-row\" v-if=\"orderInfo.createTime\">\n                            <span class=\"info-label\">创建时间：</span>\n                            <span class=\"info-value\">{{ formatTime(orderInfo.createTime) }}</span>\n                        </div>\n                        <div class=\"info-row\" v-if=\"orderInfo.finishTime\">\n                            <span class=\"info-label\">完成时间：</span>\n                            <span class=\"info-value\">{{ formatTime(orderInfo.finishTime) }}</span>\n                    </div>\n                </div>\n                \n                    <!-- 商品信息 -->\n                    <el-divider></el-divider>\n                    <div class=\"product-info-section\" v-if=\"orderInfo.idleItem\">\n                        <h3 class=\"section-title\">商品信息</h3>\n                        <div class=\"product-card\">\n                        <el-image\n                                v-if=\"productImage\"\n                                :src=\"productImage\"\n                                fit=\"cover\"\n                                class=\"product-image\">\n                        </el-image>\n                            <div class=\"product-details\">\n                                <h4 class=\"product-name\">{{ orderInfo.idleItem.idleName }}</h4>\n                                <div class=\"product-price-info\">\n                                    <span class=\"product-price\">¥{{ orderInfo.idleItem.idlePrice }}</span>\n                            </div>\n                        </div>\n                    </div>\n                    </div>\n\n                    <!-- 卖家信息（买家视角） -->\n                    <el-divider></el-divider>\n                    <div class=\"seller-info-section\" v-if=\"orderInfo.idleItem && isBuyer\">\n                        <h3 class=\"section-title\">卖家信息</h3>\n                        <div class=\"seller-card\">\n                            <el-avatar \n                                v-if=\"sellerAvatar\"\n                                :src=\"sellerAvatar\" \n                                :size=\"50\"\n                                class=\"seller-avatar\">\n                            </el-avatar>\n                            <el-avatar \n                                v-else\n                                :size=\"50\"\n                                icon=\"el-icon-user-solid\"\n                                class=\"seller-avatar\">\n                            </el-avatar>\n                            <div class=\"seller-details\">\n                                <div class=\"seller-name\">\n                                    <span class=\"seller-label\">卖家：</span>\n                                    <span class=\"seller-value\">{{ sellerName || '未知卖家' }}</span>\n                                </div>\n                                <div class=\"seller-actions\">\n                        <el-button \n                                        type=\"primary\" \n                                        size=\"small\"\n                                        icon=\"el-icon-chat-line-round\"\n                                        @click=\"goToChat\">\n                                        联系卖家\n                        </el-button>\n                    </div>\n                            </div>\n                        </div>\n                        </div>\n\n                    <!-- 买家信息（卖家视角） -->\n                    <el-divider></el-divider>\n                    <div class=\"buyer-info-section\" v-if=\"orderInfo.user && isSeller\">\n                        <h3 class=\"section-title\">买家信息</h3>\n                        <div class=\"buyer-card\">\n                            <el-avatar \n                                v-if=\"buyerAvatar\"\n                                :src=\"buyerAvatar\" \n                                :size=\"50\"\n                                class=\"buyer-avatar\">\n                            </el-avatar>\n                            <el-avatar \n                                v-else\n                                :size=\"50\"\n                                icon=\"el-icon-user-solid\"\n                                class=\"buyer-avatar\">\n                            </el-avatar>\n                            <div class=\"buyer-details\">\n                                <div class=\"buyer-name\">\n                                    <span class=\"buyer-label\">买家：</span>\n                                    <span class=\"buyer-value\">{{ buyerName || '未知买家' }}</span>\n                                </div>\n                                <div class=\"buyer-actions\">\n                                <el-button\n                                        type=\"primary\"\n                                        size=\"small\"\n                                        icon=\"el-icon-chat-line-round\"\n                                        @click=\"goToChatWithBuyer\">\n                                        联系买家\n                                </el-button>\n                    </div>\n                    </div>\n                                    </div>\n                                    </div>\n\n                    <!-- 交易地点导航（待发货/待收货时显示） -->\n                    <el-divider></el-divider>\n                    <div class=\"location-navigation-section\" v-if=\"showLocationNavigation\">\n                        <h3 class=\"section-title\">\n                            <i class=\"el-icon-location-outline\"></i> 交易地点导航\n                        </h3>\n                        <div class=\"location-info-card\">\n                            <div class=\"location-info-item full-width\">\n                                <span class=\"location-label\">卖家地址：</span>\n                                <span class=\"location-value\" v-if=\"sellerLocation\">{{ sellerLocation.formattedAddress || sellerLocation.address }}</span>\n                                <span class=\"location-value text-warning\" v-else>{{ orderInfo.idleItem.idlePlace || '未填写' }}</span>\n                    </div>\n                            <div class=\"location-info-item full-width\">\n                                <span class=\"location-label\">买家地址：</span>\n                                <span class=\"location-value\" v-if=\"buyerLocation\">{{ buyerLocation.formattedAddress || buyerLocation.address }}</span>\n                                <span class=\"location-value text-warning\" v-else-if=\"buyerAddressText\">{{ buyerAddressText }}</span>\n                                <span class=\"location-value text-warning\" v-else>未填写或解析失败</span>\n                                    </div>\n                            <div class=\"location-info-item\" v-if=\"distanceText\">\n                                <span class=\"location-label\">距离：</span>\n                                <span class=\"location-value\">{{ distanceText }}</span>\n                                    </div>\n                            <div class=\"location-info-item\" v-if=\"distanceKm\">\n                                <span class=\"location-label\">建议：</span>\n                                <el-tag :type=\"distanceKm <= 3 ? 'success' : 'warning'\" size=\"small\">\n                                    {{ distanceKm <= 3 ? '适合面交' : '建议快递' }}\n                                </el-tag>\n                                </div>\n                                    </div>\n                        <el-alert\n                            v-if=\"!sellerLocation || !buyerLocation\"\n                            title=\"地址解析提示\"\n                            type=\"info\"\n                            :closable=\"false\"\n                            show-icon\n                            style=\"margin-bottom: 15px;\">\n                            <div slot=\"default\">\n                                <p style=\"margin: 0; line-height: 1.6; font-size: 13px;\">\n                                    <strong>地址格式建议：</strong><br/>\n                                    • 完整格式：城市+详细地址，例如：\"北京市清华大学\"、\"上海市复旦大学\"<br/>\n                                    • 学校名称：可以直接填写学校名称，例如：\"清华大学\"、\"复旦大学\"<br/>\n                                    • 详细地址：包含城市、区县、街道等，例如：\"北京市海淀区清华大学\"<br/>\n                                    <span style=\"color: #909399;\">如果地址解析失败，请检查地址是否包含城市信息</span>\n                                </p>\n                                    </div>\n                        </el-alert>\n                        <div class=\"map-container\" ref=\"mapContainer\" id=\"order-map-container\"></div>\n                        <div class=\"map-actions\">\n                            <!-- 买家视角：只显示导航到卖家 -->\n                            <el-button \n                                v-if=\"isBuyer\"\n                                type=\"primary\" \n                                size=\"small\"\n                                icon=\"el-icon-location\"\n                                @click=\"navigateToSeller\"\n                                :disabled=\"!sellerLocation && !(orderInfo.idleItem && orderInfo.idleItem.idlePlace)\">\n                                导航到卖家位置\n                            </el-button>\n                            <!-- 卖家视角：只显示导航到买家 -->\n                            <el-button \n                                v-if=\"isSeller\"\n                                type=\"success\" \n                                size=\"small\"\n                                icon=\"el-icon-location\"\n                                @click=\"navigateToBuyer\"\n                                :disabled=\"!buyerLocation && !buyerAddressText\">\n                                导航到买家位置\n                            </el-button>\n                            <el-button \n                                type=\"info\" \n                                size=\"small\"\n                                icon=\"el-icon-refresh\"\n                                @click=\"refreshMap\">\n                                刷新地图\n                            </el-button>\n                                </div>\n                    </div>\n\n                    <!-- 售后申请信息（卖家视角） -->\n                    <el-divider></el-divider>\n                    <div class=\"after-sale-section\" v-if=\"isSeller && afterSaleInfo\">\n                        <h3 class=\"section-title\">售后申请</h3>\n                        <el-alert\n                            :title=\"getAfterSaleStatusText(afterSaleInfo.applicationStatus)\"\n                            :type=\"getAfterSaleStatusType(afterSaleInfo.applicationStatus)\"\n                            :closable=\"false\"\n                            show-icon>\n                        </el-alert>\n                        <div class=\"after-sale-details\" style=\"margin-top: 15px;\">\n                            <el-descriptions :column=\"2\" border size=\"small\">\n                                <el-descriptions-item label=\"申请类型\">\n                                    <el-tag size=\"small\">{{ getApplicationTypeText(afterSaleInfo.applicationType) }}</el-tag>\n                                </el-descriptions-item>\n                                <el-descriptions-item label=\"退款金额\">\n                                    <span style=\"color: #f56c6c; font-weight: bold;\">¥{{ afterSaleInfo.refundAmount }}</span>\n                                </el-descriptions-item>\n                                <el-descriptions-item label=\"问题描述\" :span=\"2\">{{ afterSaleInfo.problemDescription }}</el-descriptions-item>\n                                <el-descriptions-item label=\"申请时间\" :span=\"2\">{{ formatTime(afterSaleInfo.createTime) }}</el-descriptions-item>\n                            </el-descriptions>\n                            \n                            <!-- 证据图片 -->\n                            <div v-if=\"afterSaleInfo.evidenceImages\" style=\"margin-top: 15px;\">\n                                <p style=\"margin-bottom: 10px;\"><strong>买家证据图片：</strong></p>\n                                <div class=\"evidence-images\">\n                                    <el-image\n                                        v-for=\"(img, index) in getEvidenceImages(afterSaleInfo.evidenceImages)\"\n                                        :key=\"index\"\n                                        :src=\"img\"\n                                        :preview-src-list=\"getEvidenceImages(afterSaleInfo.evidenceImages)\"\n                                        fit=\"cover\"\n                                        class=\"evidence-image\">\n                                    </el-image>\n                    </div>\n                                </div>\n                    </div>\n                    </div>\n\n                    <!-- 操作按钮 -->\n                    <el-divider></el-divider>\n                    <div class=\"action-buttons\">\n                        <!-- 买家操作 -->\n                        <template v-if=\"isBuyer\">\n                        <el-button \n                                v-if=\"orderInfo.orderStatus === 0 && orderInfo.paymentStatus === 0\"\n                            type=\"primary\" \n                                size=\"large\"\n                            icon=\"el-icon-wallet\" \n                                @click=\"goToPay\">\n                                立即支付\n                            </el-button>\n                        <el-button \n                                v-if=\"orderInfo.orderStatus === 2\"\n                            type=\"success\" \n                                size=\"large\"\n                            icon=\"el-icon-check\" \n                                @click=\"confirmReceive\">\n                                确认收货\n                            </el-button>\n                            <el-button \n                                v-if=\"orderInfo.orderStatus === 3\"\n                                type=\"warning\" \n                                size=\"large\"\n                                icon=\"el-icon-warning-outline\" \n                                @click=\"openAfterSaleDialog\">\n                                申请售后\n                            </el-button>\n                        </template>\n                        \n                        <!-- 卖家操作 -->\n                        <template v-if=\"isSeller\">\n                            <el-button \n                                v-if=\"afterSaleInfo && (afterSaleInfo.applicationStatus === 0 || afterSaleInfo.applicationStatus === 1 || afterSaleInfo.applicationStatus === 2)\"\n                                type=\"warning\" \n                                size=\"large\"\n                                icon=\"el-icon-s-check\" \n                                @click=\"openSellerReviewDialog\">\n                                审核售后申请\n                            </el-button>\n                            <el-button \n                                v-if=\"orderInfo.orderStatus === 1 && orderInfo.paymentStatus === 1\"\n                                type=\"warning\" \n                                size=\"large\"\n                                icon=\"el-icon-truck\" \n                                @click=\"confirmShip\">\n                                确认发货\n                            </el-button>\n                        </template>\n                        \n                        <el-button \n                            type=\"default\" \n                            size=\"large\"\n                            icon=\"el-icon-back\"\n                            @click=\"goBack\">\n                            返回\n                            </el-button>\n                        </div>\n                </el-card>\n\n                <!-- 订单不存在 -->\n                <el-card v-else class=\"order-card\" shadow=\"hover\">\n                    <div class=\"empty-state\">\n                        <i class=\"el-icon-warning-outline\"></i>\n                        <p>订单不存在或已删除</p>\n                        <el-button type=\"primary\" @click=\"goBack\">返回</el-button>\n                    </div>\n                </el-card>\n            </div>\n            <app-foot></app-foot>\n        </app-body>\n\n        <!-- 申请售后弹窗 -->\n                <el-dialog\n            title=\"申请售后\"\n            :visible.sync=\"afterSaleDialogVisible\"\n                    width=\"600px\"\n            @close=\"resetAfterSaleForm\">\n            <el-form :model=\"afterSaleForm\" :rules=\"afterSaleRules\" ref=\"afterSaleForm\" label-width=\"100px\">\n                <el-form-item label=\"申请类型\" prop=\"applicationType\">\n                    <el-select v-model=\"afterSaleForm.applicationType\" placeholder=\"请选择申请类型\" style=\"width: 100%\">\n                        <el-option label=\"质量问题\" :value=\"1\"></el-option>\n                        <el-option label=\"描述不符\" :value=\"2\"></el-option>\n                        <el-option label=\"未收到货\" :value=\"3\"></el-option>\n                        <el-option label=\"其他\" :value=\"4\"></el-option>\n                    </el-select>\n                </el-form-item>\n                <el-form-item label=\"问题描述\" prop=\"problemDescription\">\n                    <el-input\n                        type=\"textarea\"\n                        :rows=\"4\"\n                        v-model=\"afterSaleForm.problemDescription\"\n                        placeholder=\"请详细描述遇到的问题...\"\n                        maxlength=\"500\"\n                        show-word-limit>\n                    </el-input>\n                </el-form-item>\n                <el-form-item label=\"证据图片\">\n                    <el-upload\n                        class=\"evidence-uploader\"\n                        :action=\"'/api/file'\"\n                        :show-file-list=\"true\"\n                        :file-list=\"evidenceFileList\"\n                        :on-success=\"handleEvidenceSuccess\"\n                        :on-remove=\"handleEvidenceRemove\"\n                        :before-upload=\"beforeEvidenceUpload\"\n                        list-type=\"picture\"\n                        accept=\"image/*\"\n                        multiple>\n                        <el-button size=\"small\" type=\"primary\" icon=\"el-icon-upload\">上传图片</el-button>\n                        <div slot=\"tip\" class=\"el-upload__tip\">支持上传多张图片，每张不超过5MB</div>\n                    </el-upload>\n                </el-form-item>\n                <el-form-item label=\"退款金额\">\n                    <el-input-number\n                        v-model=\"afterSaleForm.refundAmount\"\n                        :precision=\"2\"\n                        :min=\"0\"\n                        :max=\"orderInfo ? orderInfo.orderPrice : 0\"\n                        style=\"width: 100%\">\n                    </el-input-number>\n                    <div style=\"color: #909399; font-size: 12px; margin-top: 5px;\">\n                        最多可申请退款：¥{{ orderInfo ? orderInfo.orderPrice : 0 }}\n                        </div>\n                </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"afterSaleDialogVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"submitAfterSale\" :loading=\"afterSaleSubmitting\">提 交</el-button>\n            </span>\n        </el-dialog>\n\n        <!-- 卖家审核售后申请弹窗 -->\n        <el-dialog\n            title=\"审核售后申请\"\n            :visible.sync=\"sellerReviewDialogVisible\"\n            width=\"600px\"\n            @close=\"resetSellerReviewForm\">\n            <el-form :model=\"sellerReviewForm\" :rules=\"sellerReviewRules\" ref=\"sellerReviewForm\" label-width=\"100px\">\n                <el-form-item label=\"申请类型\">\n                    <el-input :value=\"getApplicationTypeText(afterSaleInfo && afterSaleInfo.applicationType)\" disabled></el-input>\n                </el-form-item>\n                <el-form-item label=\"退款金额\">\n                    <el-input :value=\"'¥' + (afterSaleInfo && afterSaleInfo.refundAmount)\" disabled></el-input>\n                </el-form-item>\n                <el-form-item label=\"问题描述\">\n                    <el-input type=\"textarea\" :value=\"afterSaleInfo && afterSaleInfo.problemDescription\" disabled :rows=\"3\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"审核结果\" prop=\"reviewResult\">\n                    <el-radio-group v-model=\"sellerReviewForm.reviewResult\">\n                        <el-radio :label=\"1\">同意申请</el-radio>\n                        <el-radio :label=\"2\">拒绝申请</el-radio>\n                    </el-radio-group>\n                </el-form-item>\n                <el-form-item label=\"拒绝原因\" prop=\"rejectReason\" v-if=\"sellerReviewForm.reviewResult === 2\">\n                            <el-input\n                                type=\"textarea\"\n                        :rows=\"4\"\n                        placeholder=\"请填写拒绝原因\"\n                        v-model=\"sellerReviewForm.rejectReason\"\n                                maxlength=\"200\"\n                                show-word-limit>\n                            </el-input>\n                </el-form-item>\n                <el-form-item label=\"卖家举证图片\">\n                    <el-upload\n                        :action=\"'/api/file'\"\n                        list-type=\"picture-card\"\n                        :on-success=\"handleSellerEvidenceUploadSuccess\"\n                        :on-remove=\"handleSellerEvidenceUploadRemove\"\n                        :before-upload=\"beforeAfterSaleUpload\"\n                        :file-list=\"sellerEvidenceUploadList\"\n                        :limit=\"3\"\n                        accept=\"image/*\">\n                        <i class=\"el-icon-plus\"></i>\n                    </el-upload>\n                    <div slot=\"tip\" class=\"el-upload__tip\">最多上传3张图片，每张不超过5MB</div>\n                </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"sellerReviewDialogVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"submitSellerReview\" :loading=\"sellerReviewSubmitting\">提 交</el-button>\n            </span>\n                </el-dialog>\n\n        <!-- 空状态提示 -->\n        <el-card v-if=\"!isLoading && !orderInfo\" class=\"order-card\" shadow=\"hover\">\n            <el-empty description=\"订单不存在或加载失败\">\n                <el-button type=\"primary\" @click=\"$router.push('/index')\">返回首页</el-button>\n            </el-empty>\n        </el-card>\n    </div>\n</template>\n\n<script>\n    import AppHead from '../common/AppHeader.vue';\n    import AppBody from '../common/AppPageBody.vue';\n    import AppFoot from '../common/AppFoot.vue';\n    import { \n        initMap, \n        geocodeAddress, \n        addMarker, \n        calculateDistance, \n        formatDistance, \n        fitMapView, \n        openNavigation \n    } from '../../utils/mapUtil';\n\n    export default {\n        name: \"order\",\n        components: {\n            AppHead,\n            AppBody,\n            AppFoot\n        },\n        data() {\n            return {\n                isLoading: false,\n                orderInfo: null,\n                productImage: '',\n                sellerName: '',\n                sellerAvatar: '',\n                buyerName: '',\n                buyerAvatar: '',\n                currentUserId: null,\n                isBuyer: false,\n                isSeller: false,\n                // 申请售后相关\n                afterSaleDialogVisible: false,\n                afterSaleSubmitting: false,\n                afterSaleForm: {\n                    applicationType: null,\n                    problemDescription: '',\n                    refundAmount: 0,\n                    evidenceImages: []\n                },\n                evidenceFileList: [],\n                afterSaleRules: {\n                    applicationType: [\n                        { required: true, message: '请选择申请类型', trigger: 'change' }\n                    ],\n                    problemDescription: [\n                        { required: true, message: '请填写问题描述', trigger: 'blur' },\n                        { min: 10, max: 500, message: '问题描述长度在10到500个字符', trigger: 'blur' }\n                    ]\n                },\n                afterSaleInfo: null, // 售后申请信息\n                // 卖家审核售后相关\n                sellerReviewDialogVisible: false,\n                sellerReviewSubmitting: false,\n                sellerReviewForm: {\n                    reviewResult: 1,\n                    rejectReason: '',\n                    sellerEvidenceImages: []\n                },\n                sellerReviewRules: {\n                    reviewResult: [\n                        { required: true, message: '请选择审核结果', trigger: 'change' }\n                    ],\n                    rejectReason: [\n                        { required: true, message: '拒绝申请时必须填写拒绝原因', trigger: 'blur' }\n                    ]\n                },\n                sellerEvidenceUploadList: [],\n                // 地图相关\n                map: null,\n                sellerLocation: null, // 卖家位置 {lng, lat, address}\n                buyerLocation: null, // 买家位置 {lng, lat, address}\n                buyerAddressText: '', // 买家地址原始文本（即使解析失败也显示）\n                distanceKm: null, // 距离（公里）\n                distanceText: '', // 距离文本\n                geocoder: null // 地址解析器\n            };\n        },\n        computed: {\n            // 是否显示交易地点导航（待发货或待收货时显示）\n            showLocationNavigation() {\n                if (!this.orderInfo) return false;\n                // 订单状态：1-待发货，2-待收货\n                // 且已支付\n                return (this.orderInfo.orderStatus === 1 || this.orderInfo.orderStatus === 2) \n                    && this.orderInfo.paymentStatus === 1\n                    && this.orderInfo.idleItem \n                    && this.orderInfo.idleItem.idlePlace;\n            }\n        },\n        created() {\n            this.currentUserId = this.getCookie('shUserId');\n            this.loadOrderInfo();\n        },\n        mounted() {\n            // 等待DOM更新后再初始化地图\n            this.$nextTick(() => {\n                if (this.showLocationNavigation) {\n                    this.initMap();\n                }\n            });\n        },\n        watch: {\n            showLocationNavigation(newVal) {\n                if (newVal) {\n                    this.$nextTick(() => {\n                        this.initMap();\n                    });\n                        } else {\n                    this.destroyMap();\n                }\n            }\n        },\n        methods: {\n            loadOrderInfo() {\n                const orderId = this.$route.query.id;\n                if (!orderId) {\n                    this.$message.error('订单ID不存在');\n                    this.$router.push('/index');\n                    return;\n                }\n\n                this.isLoading = true;\n                this.$api.getOrder({ id: orderId }).then(res => {\n                    if (res.status_code === 1 && res.data) {\n                        this.orderInfo = res.data;\n                        \n                        // 判断当前用户是买家还是卖家\n                        if (this.currentUserId) {\n                            const currentUserIdNum = parseInt(this.currentUserId);\n                            this.isBuyer = this.orderInfo.userId === currentUserIdNum;\n                            this.isSeller = this.orderInfo.idleItem && \n                                          this.orderInfo.idleItem.userId === currentUserIdNum;\n                        }\n                        \n                        // 处理商品图片\n                        if (this.orderInfo.idleItem && this.orderInfo.idleItem.pictureList) {\n                            try {\n                                const pictureList = JSON.parse(this.orderInfo.idleItem.pictureList);\n                                if (pictureList && pictureList.length > 0) {\n                                    this.productImage = pictureList[0];\n                                }\n                            } catch (e) {\n                                console.error('解析商品图片失败:', e);\n                            }\n                        }\n                        \n                        // 处理卖家信息\n                        if (this.orderInfo.idleItem) {\n                            if (this.orderInfo.idleItem.user) {\n                                this.sellerName = this.orderInfo.idleItem.user.nickname || '未知卖家';\n                                this.sellerAvatar = this.orderInfo.idleItem.user.avatar || '';\n                            } else if (this.orderInfo.idleItem.userId) {\n                                // 如果没有user对象，但有userId，尝试获取用户信息\n                                this.loadSellerInfo(this.orderInfo.idleItem.userId);\n                            }\n                        }\n                        \n                        // 加载售后申请信息\n                        this.loadAfterSaleInfo();\n                        \n                        // 处理买家信息\n                        if (this.orderInfo.user) {\n                            this.buyerName = this.orderInfo.user.nickname || '未知买家';\n                            this.buyerAvatar = this.orderInfo.user.avatar || '';\n                        }\n                        \n                        // 加载买家地址（无论是否显示地图都需要加载，用于显示）\n                        this.loadBuyerAddressForDisplay();\n                        \n                        // 如果显示地图，初始化地图\n                        if (this.showLocationNavigation) {\n                            this.$nextTick(() => {\n                                this.initMap();\n                            });\n                        }\n                    } else {\n                        this.$message.error(res.msg || '订单不存在');\n                        this.orderInfo = null;\n                    }\n                }).catch(e => {\n                    console.error('获取订单信息失败:', e);\n                    this.$message.error('获取订单信息失败');\n                    this.orderInfo = null;\n                }).finally(() => {\n                    this.isLoading = false;\n                });\n            },\n            goToPay() {\n                if (!this.orderInfo || !this.orderInfo.id) {\n                    this.$message.error('订单信息不存在');\n                    return;\n                }\n\n                // 确认支付\n                this.$confirm('确认支付 ¥' + this.orderInfo.orderPrice + ' 吗？', '确认支付', {\n                    confirmButtonText: '确认支付',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    // 调用模拟支付接口\n                    this.$api.simulatePay({\n                        orderId: this.orderInfo.id\n                    }).then(res => {\n                        if (res.status_code === 1) {\n                            this.$message.success('支付成功！');\n                            // 跳转到支付成功页面\n                            this.$router.push({\n                                path: '/alipay/pay',\n                                query: {\n                                    orderNumber: this.orderInfo.orderNumber,\n                                    price: this.orderInfo.orderPrice,\n                                    orderId: this.orderInfo.id\n                                }\n                            });\n                        } else {\n                            this.$message.error(res.msg || '支付失败，请稍后重试');\n                        }\n                    }).catch(e => {\n                        console.error('支付失败:', e);\n                        this.$message.error('支付失败，请稍后重试');\n                    });\n                }).catch(() => {\n                    // 用户取消支付\n                });\n            },\n            goBack() {\n                this.$router.go(-1);\n            },\n            loadSellerInfo(userId) {\n                // 如果后端没有返回user信息，可以尝试通过API获取\n                // 这里暂时不实现，因为通常后端应该返回完整的user信息\n                console.log('卖家ID:', userId);\n            },\n            getCookie(cname) {\n                const name = cname + \"=\";\n                const ca = document.cookie.split(';');\n                for (let i = 0; i < ca.length; i++) {\n                    let c = ca[i].trim();\n                    if (c.indexOf(name) === 0) return c.substring(name.length, c.length);\n                }\n                return \"\";\n            },\n            goToChat() {\n                if (!this.orderInfo || !this.orderInfo.idleItem) {\n                    this.$message.error('商品信息不存在');\n                    return;\n                }\n                const sellerId = this.orderInfo.idleItem.userId;\n                const idleId = this.orderInfo.idleItem.id;\n                if (!sellerId) {\n                    this.$message.error('卖家信息不存在');\n                    return;\n                }\n                // 跳转到私信页面\n                this.$router.push({\n                    path: '/chat',\n                    query: {\n                        targetUserId: sellerId,\n                        idleId: idleId\n                    }\n                });\n            },\n            goToChatWithBuyer() {\n                if (!this.orderInfo || !this.orderInfo.userId) {\n                    this.$message.error('买家信息不存在');\n                    return;\n                }\n                const buyerId = this.orderInfo.userId;\n                const idleId = this.orderInfo.idleItem ? this.orderInfo.idleItem.id : null;\n                // 跳转到私信页面\n                this.$router.push({\n                    path: '/chat',\n                    query: {\n                        targetUserId: buyerId,\n                        idleId: idleId\n                    }\n                });\n            },\n            confirmShip() {\n                this.$confirm('确认已发货吗？', '确认发货', {\n                    confirmButtonText: '确认',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.$api.updateOrder({\n                        id: this.orderInfo.id,\n                        orderStatus: 2 // 待收货\n                    }).then(res => {\n                    if (res.status_code === 1) {\n                            this.$message.success('发货成功！');\n                            this.loadOrderInfo(); // 刷新订单信息\n                        } else {\n                            this.$message.error(res.msg || '发货失败');\n                        }\n                    }).catch(e => {\n                        console.error('发货失败:', e);\n                        this.$message.error('发货失败，请稍后重试');\n                    });\n                }).catch(() => {});\n            },\n            confirmReceive() {\n                this.$confirm('确认已收到商品吗？', '确认收货', {\n                    confirmButtonText: '确认',\n                            cancelButtonText: '取消',\n                            type: 'warning'\n                        }).then(() => {\n                            this.$api.updateOrder({\n                        id: this.orderInfo.id,\n                        orderStatus: 3 // 已完成\n                            }).then(res => {\n                                if (res.status_code === 1) {\n                            this.$message.success('确认收货成功！');\n                            this.loadOrderInfo(); // 刷新订单信息\n                        } else {\n                            this.$message.error(res.msg || '确认收货失败');\n                        }\n                    }).catch(e => {\n                        console.error('确认收货失败:', e);\n                        this.$message.error('确认收货失败，请稍后重试');\n                    });\n                }).catch(() => {});\n            },\n            getStatusType(status) {\n                const types = {\n                    0: 'warning',  // 待付款\n                    1: 'info',     // 待发货\n                    2: 'primary',  // 待收货\n                    3: 'success',  // 已完成\n                    4: 'danger'    // 已取消\n                };\n                return types[status] || 'info';\n            },\n            getStatusText(status) {\n                const texts = {\n                    0: '待付款',\n                    1: '待发货',\n                    2: '待收货',\n                    3: '已完成',\n                    4: '已取消'\n                };\n                return texts[status] || '未知状态';\n            },\n            formatTime(time) {\n                if (!time) return '';\n                return time.toString().substring(0, 19).replace('T', ' ');\n            },\n            openAfterSaleDialog() {\n                // 检查是否已有售后申请\n                if (this.orderInfo && this.orderInfo.id) {\n                    this.$api.getAfterSaleByOrderId({ orderId: this.orderInfo.id }).then(res => {\n                        if (res.status_code === 1 && res.data) {\n                            this.$message.warning('该订单已有售后申请，请勿重复申请');\n                        } else {\n                            // 初始化表单\n                            this.afterSaleForm.refundAmount = this.orderInfo ? this.orderInfo.orderPrice : 0;\n                            this.afterSaleDialogVisible = true;\n                        }\n                    }).catch(e => {\n                        console.error('检查售后申请失败:', e);\n                        this.afterSaleForm.refundAmount = this.orderInfo ? this.orderInfo.orderPrice : 0;\n                        this.afterSaleDialogVisible = true;\n                    });\n                }\n            },\n            resetAfterSaleForm() {\n                if (this.$refs.afterSaleForm) {\n                    this.$refs.afterSaleForm.resetFields();\n                }\n                this.afterSaleForm = {\n                    applicationType: null,\n                    problemDescription: '',\n                    refundAmount: 0,\n                    evidenceImages: []\n                };\n                this.evidenceFileList = [];\n            },\n            beforeAfterSaleUpload(file) {\n                const isImage = file.type.startsWith('image/');\n                const isLt5M = file.size / 1024 / 1024 < 5;\n\n                if (!isImage) {\n                    this.$message.error('只能上传图片文件!');\n                    return false;\n                }\n                if (!isLt5M) {\n                    this.$message.error('图片大小不能超过 5MB!');\n                    return false;\n                }\n                return true;\n            },\n            beforeEvidenceUpload(file) {\n                const isImage = file.type.startsWith('image/');\n                const isLt5M = file.size / 1024 / 1024 < 5;\n\n                if (!isImage) {\n                    this.$message.error('只能上传图片文件!');\n                    return false;\n                }\n                if (!isLt5M) {\n                    this.$message.error('图片大小不能超过5MB!');\n                    return false;\n                }\n                return true;\n            },\n            handleEvidenceSuccess(res, file) {\n                let imageUrl = '';\n                if (res.status_code === 1 && res.data) {\n                    imageUrl = res.data;\n                } else if (typeof res === 'string') {\n                    try {\n                        const parsed = JSON.parse(res);\n                        if (parsed.status_code === 1 && parsed.data) {\n                            imageUrl = parsed.data;\n                        }\n                    } catch (e) {\n                        console.error('解析上传响应失败:', e);\n                    }\n                }\n                \n                if (imageUrl) {\n                    this.afterSaleForm.evidenceImages.push(imageUrl);\n                    this.$message.success('图片上传成功');\n                } else {\n                    this.$message.error('图片上传失败');\n                }\n            },\n            handleEvidenceRemove(file, fileList) {\n                // 从证据图片列表中移除\n                if (file.response && file.response.data) {\n                    const index = this.afterSaleForm.evidenceImages.indexOf(file.response.data);\n                    if (index > -1) {\n                        this.afterSaleForm.evidenceImages.splice(index, 1);\n                    }\n                } else if (file.url) {\n                    const index = this.afterSaleForm.evidenceImages.indexOf(file.url);\n                    if (index > -1) {\n                        this.afterSaleForm.evidenceImages.splice(index, 1);\n                    }\n                }\n            },\n            submitAfterSale() {\n                this.$refs.afterSaleForm.validate((valid) => {\n                    if (!valid) {\n                        return false;\n                    }\n\n                    if (this.afterSaleForm.evidenceImages.length === 0) {\n                        this.$message.warning('请至少上传一张证据图片');\n                        return;\n                    }\n\n                    this.afterSaleSubmitting = true;\n                    const formData = {\n                        orderId: this.orderInfo.id,\n                        applicationType: this.afterSaleForm.applicationType,\n                        problemDescription: this.afterSaleForm.problemDescription,\n                        evidenceImages: JSON.stringify(this.afterSaleForm.evidenceImages),\n                        refundAmount: this.afterSaleForm.refundAmount\n                    };\n\n                    this.$api.applyAfterSale(formData).then(res => {\n                                if (res.status_code === 1) {\n                            this.$message.success('售后申请提交成功，等待卖家审核');\n                            this.afterSaleDialogVisible = false;\n                            this.loadOrderInfo(); // 刷新订单信息\n                        } else {\n                            this.$message.error(res.msg || '申请失败，请稍后重试');\n                        }\n                    }).catch(e => {\n                        console.error('提交售后申请失败:', e);\n                        this.$message.error('申请失败，请稍后重试');\n                    }).finally(() => {\n                        this.afterSaleSubmitting = false;\n                    });\n                });\n            },\n            loadAfterSaleInfo() {\n                if (!this.orderInfo || !this.orderInfo.id) return;\n                this.$api.getAfterSaleByOrderId({ orderId: this.orderInfo.id }).then(res => {\n                    if (res.status_code === 1 && res.data) {\n                        this.afterSaleInfo = res.data;\n                } else {\n                        this.afterSaleInfo = null;\n                    }\n                }).catch(e => {\n                    console.error('加载售后申请信息失败:', e);\n                    this.afterSaleInfo = null;\n                });\n            },\n            openSellerReviewDialog() {\n                if (!this.afterSaleInfo) {\n                    this.$message.warning('售后申请信息不存在');\n                    return;\n                }\n                this.sellerReviewForm.reviewResult = 1;\n                this.sellerReviewForm.rejectReason = '';\n                this.sellerReviewForm.sellerEvidenceImages = [];\n                this.sellerEvidenceUploadList = [];\n                this.sellerReviewDialogVisible = true;\n            },\n            resetSellerReviewForm() {\n                if (this.$refs.sellerReviewForm) {\n                    this.$refs.sellerReviewForm.resetFields();\n                }\n                this.sellerReviewForm = {\n                    reviewResult: 1,\n                    rejectReason: '',\n                    sellerEvidenceImages: []\n                };\n                this.sellerEvidenceUploadList = [];\n            },\n            handleSellerEvidenceUploadSuccess(response, file, fileList) {\n                if (response.status_code === 1 && response.data) {\n                    this.sellerReviewForm.sellerEvidenceImages.push(response.data);\n                    this.$message.success('图片上传成功');\n                    } else {\n                    this.$message.error('图片上传失败');\n                }\n            },\n            handleSellerEvidenceUploadRemove(file, fileList) {\n                if (file.response && file.response.data) {\n                    const index = this.sellerReviewForm.sellerEvidenceImages.indexOf(file.response.data);\n                    if (index > -1) {\n                        this.sellerReviewForm.sellerEvidenceImages.splice(index, 1);\n                    }\n                } else if (file.url) {\n                    const index = this.sellerReviewForm.sellerEvidenceImages.indexOf(file.url);\n                    if (index > -1) {\n                        this.sellerReviewForm.sellerEvidenceImages.splice(index, 1);\n                    }\n                }\n            },\n            submitSellerReview() {\n                this.$refs.sellerReviewForm.validate((valid) => {\n                    if (!valid) {\n                        return false;\n                    }\n                    \n                    if (this.sellerReviewForm.reviewResult === 2 && !this.sellerReviewForm.rejectReason) {\n                        this.$message.warning('拒绝申请时必须填写拒绝原因');\n                    return;\n                }\n                    \n                    this.sellerReviewSubmitting = true;\n                    const formData = {\n                        id: this.afterSaleInfo.id,\n                        reviewResult: this.sellerReviewForm.reviewResult,\n                        rejectReason: this.sellerReviewForm.rejectReason || null,\n                        sellerEvidenceImages: this.sellerReviewForm.sellerEvidenceImages.length > 0 \n                            ? JSON.stringify(this.sellerReviewForm.sellerEvidenceImages) \n                            : null\n                    };\n                    \n                    this.$api.reviewAfterSale(formData).then(res => {\n                    if (res.status_code === 1) {\n                            this.$message.success('审核成功');\n                            this.sellerReviewDialogVisible = false;\n                            this.loadAfterSaleInfo(); // 刷新售后申请信息\n                            this.loadOrderInfo(); // 刷新订单信息\n                    } else {\n                            this.$message.error(res.msg || '审核失败，请稍后重试');\n                    }\n                }).catch(e => {\n                        console.error('审核售后申请失败:', e);\n                        this.$message.error('审核失败，请稍后重试');\n                    }).finally(() => {\n                        this.sellerReviewSubmitting = false;\n                    });\n                });\n            },\n            getAfterSaleStatusText(status) {\n                const statuses = {\n                    0: '待卖家审核',\n                    1: '卖家已同意',\n                    2: '卖家已拒绝',\n                    3: '待管理员审核（卖家同意）',\n                    4: '待管理员审核（卖家拒绝）',\n                    5: '管理员已同意退款',\n                    6: '管理员已驳回'\n                };\n                return statuses[status] || '未知状态';\n            },\n            getAfterSaleStatusType(status) {\n                if (status === 0 || status === 3 || status === 4) return 'warning';\n                if (status === 1 || status === 5) return 'success';\n                if (status === 2 || status === 6) return 'error';\n                return 'info';\n            },\n            getApplicationTypeText(type) {\n                const types = {\n                    1: '质量问题',\n                    2: '描述不符',\n                    3: '未收到货',\n                    4: '其他'\n                };\n                return types[type] || '未知';\n            },\n            getEvidenceImages(imagesStr) {\n                if (!imagesStr) return [];\n                try {\n                    return JSON.parse(imagesStr);\n                } catch (e) {\n                    return [];\n                }\n            },\n            getFundStatusText(status) {\n                if (status === null || status === undefined) {\n                    return '未知';\n                }\n                const statuses = {\n                    0: '平台担保中',\n                    1: '已释放给卖家'\n                };\n                return statuses[status] || '未知';\n            },\n            getFundStatusType(status) {\n                if (status === null || status === undefined) {\n                    return 'info';\n                }\n                if (status === 0) {\n                    return 'warning'; // 平台担保中\n                } else if (status === 1) {\n                    return 'success'; // 已释放\n                }\n                return 'info';\n            },\n            getFundReleaseDate(finishTime) {\n                if (!finishTime) return '';\n                try {\n                    const finish = new Date(finishTime);\n                    const releaseDate = new Date(finish);\n                    releaseDate.setDate(releaseDate.getDate() + 7); // 加7天\n                    return releaseDate.toLocaleDateString('zh-CN', {\n                        year: 'numeric',\n                        month: '2-digit',\n                        day: '2-digit'\n                    });\n                } catch (e) {\n                    return '';\n                }\n            },\n            // ========== 地图相关方法 ==========\n            // 初始化地图\n            async initMap() {\n                if (!this.$refs.mapContainer) {\n                    console.warn('地图容器不存在，等待DOM更新');\n                    return;\n                }\n                \n                // 确保容器有高度\n                const container = document.getElementById('order-map-container');\n                if (!container) {\n                    console.error('找不到地图容器元素');\n                    return;\n                }\n                \n                try {\n                    // 销毁旧地图\n                    if (this.map) {\n                        this.map.destroy();\n                        this.map = null;\n                    }\n                    \n                    console.log('开始初始化地图，容器ID: order-map-container');\n                    \n                    // 动态加载地图API并创建地图实例\n                    this.map = await initMap('order-map-container', {\n                        zoom: 13\n                    });\n                    \n                    console.log('地图实例创建成功:', this.map);\n                    \n                    // 等待地图加载完成\n                    this.map.on('complete', () => {\n                        console.log('地图加载完成，开始解析地址');\n                        // 解析地址并显示标记\n                        this.geocodeAddresses();\n                    });\n                    \n                    // 如果地图已经加载完成，直接解析地址\n                    if (this.map.getStatus() === 'complete') {\n                        console.log('地图已加载完成，直接解析地址');\n                        this.geocodeAddresses();\n                    }\n                } catch (e) {\n                    console.error('地图初始化失败:', e);\n                    this.$message.error('地图初始化失败: ' + e.message);\n                }\n            },\n            // 解析地址\n            async geocodeAddresses() {\n                if (!this.map) {\n                    console.error('地图实例不存在，无法解析地址');\n                    return;\n                }\n                \n                console.log('开始解析地址，地图实例:', this.map);\n                \n                // 解析卖家地址\n                const sellerAddress = this.orderInfo.idleItem.idlePlace;\n                if (sellerAddress) {\n                    try {\n                        console.log('开始解析卖家地址:', sellerAddress);\n                        const sellerLoc = await geocodeAddress(sellerAddress);\n                        console.log('卖家地址解析成功，位置:', sellerLoc);\n                        this.sellerLocation = sellerLoc;\n                        \n                        // 添加标记\n                        const sellerMarker = addMarker(this.map, sellerLoc, '卖家位置', 'seller');\n                        if (sellerMarker) {\n                            console.log('卖家标记已添加:', sellerMarker);\n                            // 立即调整到卖家位置（如果只有卖家地址）\n                            // 不等待，直接设置，确保地图显示正确位置\n                            this.map.setCenter([sellerLoc.lng, sellerLoc.lat]);\n                            this.map.setZoom(15);\n                            console.log('地图已调整到卖家位置:', [sellerLoc.lng, sellerLoc.lat]);\n                } else {\n                            console.error('卖家标记添加失败');\n                        }\n                    } catch (e) {\n                        console.error('卖家地址解析失败:', e);\n                        this.$message.warning('卖家地址解析失败: ' + e.message);\n                    }\n                } else {\n                    console.warn('卖家未填写发货地址');\n                }\n                \n                // 解析买家地址\n                const buyerAddress = await this.loadBuyerAddress();\n                if (buyerAddress) {\n                    try {\n                        console.log('开始解析买家地址:', buyerAddress);\n                        const buyerLoc = await geocodeAddress(buyerAddress);\n                        console.log('买家地址解析成功，位置:', buyerLoc);\n                        this.buyerLocation = buyerLoc;\n                        \n                        // 添加标记\n                        const buyerMarker = addMarker(this.map, buyerLoc, '买家位置', 'buyer');\n                        if (buyerMarker) {\n                            console.log('买家标记已添加:', buyerMarker);\n                            \n                            // 更新地图视野（包含两个位置）\n                            // 立即更新，不延迟\n                            this.updateMapView();\n                            \n                            // 计算距离\n                            this.calculateDistance();\n                            console.log('距离计算完成');\n                        } else {\n                            console.error('买家标记添加失败');\n                        }\n                    } catch (e) {\n                        console.error('买家地址解析失败:', e);\n                        this.$message.warning('买家地址解析失败，但已显示原始地址');\n                    }\n                } else {\n                    console.warn('买家地址为空');\n                }\n            },\n            // 加载买家地址（用于地图解析）\n            async loadBuyerAddress() {\n                try {\n                    console.log('开始加载买家地址，订单ID:', this.orderInfo.id);\n                    const res = await this.$api.getOrderAddress({ orderId: this.orderInfo.id });\n                    console.log('获取订单地址API响应:', res);\n                    if (res.status_code === 1 && res.data) {\n                        if (res.data.detailAddress) {\n                            console.log('找到买家地址:', res.data.detailAddress);\n                            // 保存原始地址文本，即使解析失败也显示\n                            this.buyerAddressText = res.data.detailAddress;\n                            return res.data.detailAddress;\n                    } else {\n                            console.warn('订单地址数据存在，但detailAddress为空:', res.data);\n                        }\n                    } else {\n                        console.warn('订单地址API返回失败或数据为空:', res);\n                    }\n                    return null;\n                } catch (e) {\n                    console.error('加载买家地址异常:', e);\n                    return null;\n                }\n            },\n            // 加载买家地址（仅用于显示，不用于地图解析）\n            async loadBuyerAddressForDisplay() {\n                try {\n                    console.log('开始加载买家地址用于显示，订单ID:', this.orderInfo.id);\n                    const res = await this.$api.getOrderAddress({ orderId: this.orderInfo.id });\n                    console.log('获取订单地址API响应（显示用）:', res);\n                    if (res.status_code === 1 && res.data && res.data.detailAddress) {\n                        console.log('找到买家地址用于显示:', res.data.detailAddress);\n                        this.buyerAddressText = res.data.detailAddress;\n                    } else {\n                        console.warn('未找到买家地址:', res);\n                        this.buyerAddressText = '';\n                    }\n                } catch (e) {\n                    console.error('加载买家地址异常（显示用）:', e);\n                    this.buyerAddressText = '';\n                }\n            },\n            // 更新地图视野\n            updateMapView() {\n                if (!this.map) {\n                    console.warn('updateMapView: 地图实例不存在');\n                    return;\n                }\n                \n                const locations = [];\n                if (this.sellerLocation) {\n                    locations.push(this.sellerLocation);\n                    console.log('添加卖家位置到视野:', this.sellerLocation);\n                }\n                if (this.buyerLocation) {\n                    locations.push(this.buyerLocation);\n                    console.log('添加买家位置到视野:', this.buyerLocation);\n                }\n                \n                if (locations.length > 0) {\n                    console.log('调整地图视野，包含', locations.length, '个位置');\n                    console.log('位置详情:', locations.map(loc => ({ lng: loc.lng, lat: loc.lat, address: loc.address })));\n                    try {\n                        fitMapView(this.map, locations);\n                        // 延迟检查地图视野是否已更新\n                        setTimeout(() => {\n                            try {\n                                const center = this.map.getCenter();\n                                const zoom = this.map.getZoom();\n                                console.log('地图当前中心点:', center.toString(), '缩放级别:', zoom);\n                            } catch (e) {\n                                console.error('获取地图中心点失败:', e);\n                            }\n                        }, 300);\n                    } catch (e) {\n                        console.error('调整地图视野异常:', e);\n                        // 如果失败，至少设置到第一个位置\n                        if (locations.length > 0 && locations[0].lng && locations[0].lat) {\n                            this.map.setCenter([locations[0].lng, locations[0].lat]);\n                            this.map.setZoom(15);\n                            console.log('使用备用方法设置地图中心:', [locations[0].lng, locations[0].lat]);\n                        }\n                    }\n                    } else {\n                    console.warn('updateMapView: 没有可用的位置');\n                }\n            },\n            // 计算距离\n            calculateDistance() {\n                if (!this.sellerLocation || !this.buyerLocation) return;\n                \n                try {\n                    const distance = calculateDistance(this.sellerLocation, this.buyerLocation);\n                    if (distance !== null) {\n                        this.distanceKm = (distance / 1000).toFixed(2);\n                        this.distanceText = formatDistance(distance);\n                    }\n                } catch (e) {\n                    console.error('距离计算失败:', e);\n                }\n            },\n            // 导航到卖家位置\n            navigateToSeller() {\n                // 优先使用解析后的位置\n                if (this.sellerLocation) {\n                    try {\n                        openNavigation(this.sellerLocation, 'car');\n                        return;\n                    } catch (e) {\n                        console.error('使用解析位置导航失败:', e);\n                    }\n                }\n                \n                // 如果解析失败，使用原始地址\n                const sellerAddress = this.orderInfo.idleItem && this.orderInfo.idleItem.idlePlace;\n                if (sellerAddress) {\n                    // 直接使用原始地址进行导航（高德地图会尝试搜索）\n                    const url = `https://uri.amap.com/navigation?to=${encodeURIComponent(sellerAddress)}&mode=car&policy=1&src=mypage&callnative=1`;\n                    window.open(url, '_blank');\n                    this.$message.info('正在使用原始地址进行导航');\n                } else {\n                    this.$message.warning('卖家地址未填写');\n                }\n            },\n            // 导航到买家位置\n            navigateToBuyer() {\n                // 优先使用解析后的位置\n                if (this.buyerLocation) {\n                    try {\n                        openNavigation(this.buyerLocation, 'car');\n                        return;\n                    } catch (e) {\n                        console.error('使用解析位置导航失败:', e);\n                    }\n                }\n                \n                // 如果解析失败，使用原始地址\n                if (this.buyerAddressText) {\n                    // 直接使用原始地址进行导航（高德地图会尝试搜索）\n                    const url = `https://uri.amap.com/navigation?to=${encodeURIComponent(this.buyerAddressText)}&mode=car&policy=1&src=mypage&callnative=1`;\n                    window.open(url, '_blank');\n                    this.$message.info('正在使用原始地址进行导航');\n                } else {\n                    this.$message.warning('买家地址未填写');\n                }\n            },\n            // 刷新地图\n            refreshMap() {\n                this.sellerLocation = null;\n                this.buyerLocation = null;\n                this.buyerAddressText = '';\n                this.distanceKm = null;\n                this.distanceText = '';\n                \n                if (this.map) {\n                    this.map.clearMap();\n                }\n                \n                this.geocodeAddresses();\n                this.$message.success('地图已刷新');\n            },\n            // 销毁地图\n            destroyMap() {\n                if (this.map) {\n                    this.map.destroy();\n                    this.map = null;\n                }\n                this.sellerLocation = null;\n                this.buyerLocation = null;\n                this.buyerAddressText = '';\n                this.distanceKm = null;\n                this.distanceText = '';\n            }\n        },\n        beforeDestroy() {\n            this.destroyMap();\n        }\n    }\n</script>\n\n<style scoped>\n    .order-container {\n        min-height: 85vh;\n        padding: 20px 0;\n    }\n\n    .order-card {\n        max-width: 900px;\n        margin: 0 auto;\n        border-radius: 12px;\n    }\n\n    .card-header {\n        padding: 20px;\n        border-bottom: 1px solid #f0f2f5;\n    }\n\n    .order-title {\n        font-size: 24px;\n        font-weight: 600;\n        color: #303133;\n        margin: 0;\n        display: flex;\n        align-items: center;\n    }\n    \n    .order-title i {\n        margin-right: 10px;\n        color: #409EFF;\n        font-size: 28px;\n    }\n\n    .order-info-section {\n        padding: 20px;\n    }\n\n    .info-row {\n        display: flex;\n        align-items: center;\n        margin-bottom: 20px;\n        font-size: 16px;\n    }\n\n    .info-label {\n        width: 120px;\n        color: #606266;\n        font-weight: 500;\n    }\n\n    .info-value {\n        color: #303133;\n        flex: 1;\n    }\n\n    .info-value.price {\n        font-size: 24px;\n        font-weight: 700;\n        color: #f56c6c;\n    }\n\n    .section-title {\n        font-size: 18px;\n        font-weight: 600;\n        color: #303133;\n        margin-bottom: 15px;\n    }\n\n    .product-info-section {\n        padding: 20px;\n    }\n\n    .product-card {\n        display: flex;\n        padding: 20px;\n        background: #f8f9fa;\n        border-radius: 8px;\n        gap: 20px;\n    }\n    \n    .product-image {\n        width: 120px;\n        height: 120px;\n        border-radius: 8px;\n        flex-shrink: 0;\n    }\n\n    .product-details {\n        flex: 1;\n    }\n    \n    .product-name {\n        font-size: 18px;\n        font-weight: 600;\n        color: #303133;\n        margin: 0 0 15px 0;\n    }\n    \n    .product-price-info {\n        margin-top: 10px;\n    }\n    \n    .product-price {\n        font-size: 22px;\n        font-weight: 700;\n        color: #f56c6c;\n    }\n\n    .seller-info-section {\n        padding: 20px;\n    }\n\n    .seller-card {\n        display: flex;\n        padding: 20px;\n        background: #f8f9fa;\n        border-radius: 8px;\n        gap: 20px;\n        align-items: center;\n    }\n\n    .seller-avatar {\n        flex-shrink: 0;\n    }\n\n    .seller-details {\n        flex: 1;\n    }\n\n    .seller-name {\n        font-size: 16px;\n        margin-bottom: 15px;\n    }\n    \n    .seller-label {\n        color: #606266;\n        font-weight: 500;\n    }\n\n    .seller-value {\n        color: #303133;\n        font-weight: 600;\n        font-size: 18px;\n    }\n    \n    .seller-actions {\n        display: flex;\n        gap: 10px;\n    }\n\n    .buyer-info-section {\n        padding: 20px;\n    }\n\n    .buyer-card {\n        display: flex;\n        padding: 20px;\n        background: #f8f9fa;\n        border-radius: 8px;\n        gap: 20px;\n        align-items: center;\n    }\n    \n    .buyer-avatar {\n        flex-shrink: 0;\n    }\n\n    .buyer-details {\n        flex: 1;\n    }\n\n    .buyer-name {\n        font-size: 16px;\n        margin-bottom: 15px;\n    }\n\n    .buyer-label {\n        color: #606266;\n        font-weight: 500;\n    }\n\n    .buyer-value {\n        color: #303133;\n        font-weight: 600;\n        font-size: 18px;\n    }\n\n    .buyer-actions {\n        display: flex;\n        gap: 10px;\n    }\n    \n    .action-buttons {\n        padding: 20px;\n        display: flex;\n        justify-content: center;\n        gap: 15px;\n    }\n\n    .empty-state {\n        text-align: center;\n        padding: 60px 20px;\n        color: #909399;\n    }\n\n    .empty-state i {\n        font-size: 64px;\n        margin-bottom: 20px;\n        color: #c0c4cc;\n    }\n\n    .empty-state p {\n            font-size: 16px;\n        margin-bottom: 30px;\n    }\n\n    .fund-hint {\n        margin-left: 10px;\n        color: #909399;\n        font-size: 12px;\n    }\n    \n    /* 地图相关样式 */\n    .location-navigation-section {\n        margin-top: 20px;\n        padding: 20px;\n    }\n    \n    .location-info-card {\n        display: flex;\n        gap: 20px;\n        margin-bottom: 15px;\n        padding: 15px;\n        background: #f5f7fa;\n        border-radius: 8px;\n        flex-wrap: wrap;\n    }\n    \n    .location-info-item.full-width {\n        width: 100%;\n        margin-bottom: 8px;\n    }\n    \n    .location-info-item {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n    }\n    \n    .location-label {\n        color: #606266;\n            font-size: 14px;\n        }\n        \n    .location-value {\n        color: #303133;\n        font-weight: 600;\n            font-size: 16px;\n        }\n        \n    .location-value.text-warning {\n        color: #E6A23C;\n        font-weight: normal;\n    }\n    \n    .map-container {\n        width: 100%;\n        height: 400px;\n        border-radius: 8px;\n        overflow: hidden;\n        margin-bottom: 15px;\n        border: 1px solid #e4e7ed;\n    }\n    \n    .map-actions {\n        display: flex;\n            justify-content: center;\n        gap: 10px;\n        flex-wrap: wrap;\n    }\n\n    @media (max-width: 768px) {\n        .order-container {\n            padding: 10px;\n        }\n        \n        .product-card {\n            flex-direction: column;\n        }\n\n        .product-image {\n            width: 100%;\n            height: 200px;\n        }\n    }\n</style>\n"],"sourceRoot":"src/components/page"}]}