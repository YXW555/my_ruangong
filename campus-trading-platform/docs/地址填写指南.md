# 地址填写指南

## 地图导航功能地址格式要求

为了让地图导航功能正常工作，买卖双方需要填写正确格式的地址。

## 推荐地址格式

### 1. 完整格式（推荐）
包含城市和详细地址，例如：
- `北京市清华大学`
- `上海市复旦大学`
- `广州市中山大学`
- `深圳市深圳大学`

### 2. 学校名称格式
直接填写学校名称，系统会尝试自动搜索：
- `清华大学`
- `复旦大学`
- `中山大学`
- `深圳大学`

### 3. 详细地址格式
包含城市、区县、街道等完整信息：
- `北京市海淀区清华大学`
- `上海市杨浦区复旦大学`
- `广州市海珠区中山大学`

## 卖家填写发货地址

在发布商品时，在"发货地区"字段填写：
- **推荐格式**：`城市+学校名称`，例如："北京市清华大学"
- **也可以**：只填写学校名称，例如："清华大学"
- **避免**：只填写"学校"、"宿舍"等模糊地址

## 买家填写收货地址

在下单时，在收货地址中填写：
- **推荐格式**：`城市+详细地址`，例如："北京市清华大学学生宿舍"
- **也可以**：`城市+学校名称`，例如："北京市清华大学"
- **避免**：只填写"学校"、"宿舍"等模糊地址

## 地址解析失败怎么办？

如果地址解析失败，系统会：
1. 首先尝试地理编码（Geocoding）
2. 如果失败，自动尝试POI搜索（根据关键词搜索地点）
3. 如果仍然失败，会显示错误提示

### 常见问题

**Q: 为什么导航按钮是灰色的？**
A: 导航按钮需要地址解析成功后才能使用。请检查：
- 卖家是否填写了发货地址
- 买家是否填写了收货地址
- 地址格式是否正确（建议包含城市信息）

**Q: 地址格式正确但还是解析失败？**
A: 可能的原因：
- 地址中包含特殊字符
- 地址名称在高德地图中不存在
- 网络问题导致API调用失败

**解决方案**：
- 尝试使用更标准的地址名称
- 添加城市前缀，例如："北京市清华大学"而不是"清华大学"
- 检查网络连接

**Q: 如何填写我的学校地址？**
A: 建议格式：
1. 查找你学校在高德地图中的标准名称
2. 使用"城市+学校名称"格式，例如："北京市清华大学"
3. 如果需要更精确，可以添加校区信息，例如："北京市清华大学紫荆公寓"

## 示例

### 示例1：北京地区
- ✅ 正确：`北京市清华大学`
- ✅ 正确：`清华大学`
- ❌ 错误：`学校`、`宿舍`、`北京`

### 示例2：上海地区
- ✅ 正确：`上海市复旦大学`
- ✅ 正确：`复旦大学`
- ❌ 错误：`上海`、`学校`

### 示例3：详细地址
- ✅ 正确：`北京市海淀区清华大学学生宿舍`
- ✅ 正确：`上海市杨浦区复旦大学`
- ❌ 错误：`宿舍`、`教学楼`

## 技术说明

系统使用高德地图API进行地址解析：
1. **地理编码（Geocoding）**：将文本地址转换为经纬度坐标
2. **POI搜索**：当地理编码失败时，使用关键词搜索地点
3. **自动重试**：如果一种方法失败，会自动尝试另一种方法

## 注意事项

1. **地址准确性**：地址越准确，解析成功率越高
2. **城市信息**：包含城市信息可以大大提高解析成功率
3. **标准名称**：使用学校或地点的标准名称，避免使用简称或别名
4. **实时更新**：如果地址解析失败，可以尝试刷新地图或修改地址格式

