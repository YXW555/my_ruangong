{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\common\\DisputeManagement.vue?vue&type=template&id=6f768773&scoped=true&","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\common\\DisputeManagement.vue","mtime":1767338000399},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["\n<div class=\"dispute-management-container\">\n    <el-card shadow=\"never\">\n        <div slot=\"header\" class=\"clearfix\">\n            <span>交易纠纷与售后管理</span>\n            <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"loadAllData\">刷新</el-button>\n        </div>\n\n        <!-- 筛选条件 -->\n        <div class=\"filter-container\">\n            <el-radio-group v-model=\"filterStatus\" @change=\"handleStatusChange\" size=\"small\">\n                <el-radio-button :label=\"null\">全部</el-radio-button>\n                <el-radio-button :label=\"0\">待处理</el-radio-button>\n                <el-radio-button :label=\"2\">已解决</el-radio-button>\n            </el-radio-group>\n            <el-radio-group v-model=\"filterType\" @change=\"handleTypeChange\" size=\"small\" style=\"margin-left: 20px;\">\n                <el-radio-button :label=\"null\">全部类型</el-radio-button>\n                <el-radio-button :label=\"'dispute'\">交易纠纷</el-radio-button>\n                <el-radio-button :label=\"'afterSale'\">售后申请</el-radio-button>\n            </el-radio-group>\n        </div>\n\n        <!-- 空状态提示 -->\n        <div v-if=\"!loading && allItems.length === 0\" style=\"text-align: center; padding: 40px;\">\n            <el-empty description=\"暂无数据\">\n                <el-button type=\"primary\" @click=\"loadAllData\">刷新</el-button>\n            </el-empty>\n        </div>\n\n        <!-- 纠纷和售后列表 -->\n        <el-table\n            v-else\n            :data=\"allItems\"\n            v-loading=\"loading\"\n            style=\"width: 100%\"\n            :header-cell-style=\"{ background: '#f5f7fa', color: '#303133', fontWeight: 'bold' }\"\n            border>\n            <el-table-column\n                label=\"类型\"\n                width=\"100\">\n                <template slot-scope=\"scope\">\n                    <el-tag :type=\"scope.row.type === 'afterSale' ? 'warning' : 'primary'\" size=\"small\">\n                        {{ scope.row.type === 'afterSale' ? '售后申请' : '交易纠纷' }}\n                    </el-tag>\n                </template>\n            </el-table-column>\n            <el-table-column\n                prop=\"id\"\n                label=\"ID\"\n                width=\"80\">\n            </el-table-column>\n            <el-table-column\n                label=\"订单号\"\n                width=\"180\"\n                show-overflow-tooltip>\n                <template slot-scope=\"scope\">\n                    {{ scope.row.order && scope.row.order.orderNumber }}\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"商品名称\"\n                show-overflow-tooltip>\n                <template slot-scope=\"scope\">\n                    {{ scope.row.order && scope.row.order.idleItem && scope.row.order.idleItem.idleName }}\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"申请人\"\n                width=\"120\">\n                <template slot-scope=\"scope\">\n                    {{ scope.row.type === 'afterSale' ? (scope.row.buyer && scope.row.buyer.nickname) : (scope.row.applicant && scope.row.applicant.nickname) }}\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"申请类型/纠纷类型\"\n                width=\"140\">\n                <template slot-scope=\"scope\">\n                    <el-tag size=\"small\" v-if=\"scope.row.type === 'afterSale'\">\n                        {{ getApplicationTypeText(scope.row.applicationType) }}\n                    </el-tag>\n                    <el-tag size=\"small\" v-else>\n                        {{ getDisputeTypeText(scope.row.disputeType) }}\n                    </el-tag>\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"原因/描述\"\n                show-overflow-tooltip\n                min-width=\"200\">\n                <template slot-scope=\"scope\">\n                    {{ scope.row.type === 'afterSale' ? scope.row.problemDescription : scope.row.disputeReason }}\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"状态\"\n                width=\"140\">\n                <template slot-scope=\"scope\">\n                    <el-tag :type=\"getItemStatusType(scope.row)\" size=\"small\">\n                        {{ getItemStatusText(scope.row) }}\n                    </el-tag>\n                </template>\n            </el-table-column>\n            <el-table-column\n                prop=\"createTime\"\n                label=\"申请时间\"\n                width=\"180\">\n                <template slot-scope=\"scope\">\n                    {{ scope.row.createTime | formatDate }}\n                </template>\n            </el-table-column>\n            <el-table-column\n                label=\"操作\"\n                width=\"120\"\n                align=\"center\">\n                <template slot-scope=\"scope\">\n                    <el-button\n                        v-if=\"canHandle(scope.row)\"\n                        type=\"primary\"\n                        size=\"mini\"\n                        @click=\"viewDetails(scope.row)\">\n                        处理\n                    </el-button>\n                    <el-button\n                        v-else\n                        type=\"info\"\n                        size=\"mini\"\n                        @click=\"viewDetails(scope.row)\">\n                        查看\n                    </el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <!-- 分页 -->\n        <div class=\"pagination-container\">\n            <el-pagination\n                @current-change=\"handlePageChange\"\n                :current-page=\"currentPage\"\n                :page-size=\"pageSize\"\n                layout=\"total, prev, pager, next, jumper\"\n                :total=\"total\">\n            </el-pagination>\n        </div>\n    </el-card>\n\n    <!-- 处理对话框 -->\n    <el-dialog\n        :title=\"getDialogTitle()\"\n        :visible.sync=\"dialogVisible\"\n        width=\"70%\"\n        @close=\"currentItem = null\">\n        <div v-if=\"currentItem\" class=\"item-detail\">\n            <!-- 售后申请详情 -->\n            <template v-if=\"currentItem.type === 'afterSale'\">\n                <!-- 订单信息 -->\n                <el-card shadow=\"never\" class=\"detail-section\">\n                    <div slot=\"header\">\n                        <span>订单信息</span>\n                    </div>\n                    <el-descriptions :column=\"2\" border>\n                        <el-descriptions-item label=\"订单号\">{{ currentItem.order && currentItem.order.orderNumber }}</el-descriptions-item>\n                        <el-descriptions-item label=\"订单金额\">¥{{ currentItem.order && currentItem.order.orderPrice }}</el-descriptions-item>\n                        <el-descriptions-item label=\"商品名称\">{{ currentItem.order && currentItem.order.idleItem && currentItem.order.idleItem.idleName }}</el-descriptions-item>\n                        <el-descriptions-item label=\"订单状态\">\n                            <el-tag size=\"small\">{{ getOrderStatusText(currentItem.order && currentItem.order.orderStatus) }}</el-tag>\n                        </el-descriptions-item>\n                        <el-descriptions-item label=\"支付状态\">\n                            <el-tag :type=\"currentItem.order && currentItem.order.paymentStatus ? 'success' : 'warning'\" size=\"small\">\n                                {{ currentItem.order && currentItem.order.paymentStatus ? '已支付' : '未支付' }}\n                            </el-tag>\n                        </el-descriptions-item>\n                        <el-descriptions-item label=\"创建时间\">{{ currentItem.order && currentItem.order.createTime | formatDate }}</el-descriptions-item>\n                    </el-descriptions>\n                </el-card>\n\n                <!-- 售后申请信息 -->\n                <el-card shadow=\"never\" class=\"detail-section\">\n                    <div slot=\"header\">\n                        <span>售后申请信息</span>\n                    </div>\n                    <el-descriptions :column=\"2\" border>\n                        <el-descriptions-item label=\"买家\">{{ currentItem.buyer && currentItem.buyer.nickname }}</el-descriptions-item>\n                        <el-descriptions-item label=\"卖家\">{{ currentItem.seller && currentItem.seller.nickname }}</el-descriptions-item>\n                        <el-descriptions-item label=\"申请类型\">\n                            <el-tag size=\"small\">{{ getApplicationTypeText(currentItem.applicationType) }}</el-tag>\n                        </el-descriptions-item>\n                        <el-descriptions-item label=\"申请状态\">\n                            <el-tag :type=\"getItemStatusType(currentItem)\" size=\"small\">\n                                {{ getItemStatusText(currentItem) }}\n                            </el-tag>\n                        </el-descriptions-item>\n                        <el-descriptions-item label=\"退款金额\">\n                            <span style=\"color: #f56c6c; font-weight: bold;\">¥{{ currentItem.refundAmount }}</span>\n                        </el-descriptions-item>\n                        <el-descriptions-item label=\"申请时间\">{{ currentItem.createTime | formatDate }}</el-descriptions-item>\n                        <el-descriptions-item label=\"问题描述\" :span=\"2\">{{ currentItem.problemDescription }}</el-descriptions-item>\n                    </el-descriptions>\n\n                    <!-- 买家证据图片 -->\n                    <div v-if=\"currentItem.evidenceImages\" class=\"evidence-images\">\n                        <el-divider>买家证据图片</el-divider>\n                        <div class=\"image-list\">\n                            <el-image\n                                v-for=\"(img, index) in getEvidenceImages(currentItem.evidenceImages)\"\n                                :key=\"index\"\n                                :src=\"img\"\n                                :preview-src-list=\"getEvidenceImages(currentItem.evidenceImages)\"\n                                fit=\"cover\"\n                                class=\"evidence-image\">\n                            </el-image>\n                        </div>\n                    </div>\n\n                    <!-- 卖家审核信息 -->\n                    <div v-if=\"currentItem.sellerReviewTime\" style=\"margin-top: 20px;\">\n                        <el-divider>卖家审核信息</el-divider>\n                        <p><strong>审核结果：</strong>\n                            <el-tag :type=\"currentItem.sellerReviewResult === 1 ? 'success' : 'danger'\" size=\"small\">\n                                {{ currentItem.sellerReviewResult === 1 ? '同意' : '拒绝' }}\n                            </el-tag>\n                        </p>\n                        <p v-if=\"currentItem.sellerRejectReason\"><strong>拒绝原因：</strong>{{ currentItem.sellerRejectReason }}</p>\n                        <p><strong>审核时间：</strong>{{ currentItem.sellerReviewTime | formatDate }}</p>\n                        <div v-if=\"currentItem.sellerEvidenceImages\" class=\"evidence-images\">\n                            <p><strong>卖家举证图片：</strong></p>\n                            <div class=\"image-list\">\n                                <el-image\n                                    v-for=\"(img, index) in getEvidenceImages(currentItem.sellerEvidenceImages)\"\n                                    :key=\"index\"\n                                    :src=\"img\"\n                                    :preview-src-list=\"getEvidenceImages(currentItem.sellerEvidenceImages)\"\n                                    fit=\"cover\"\n                                    class=\"evidence-image\">\n                                </el-image>\n                            </div>\n                        </div>\n                    </div>\n                </el-card>\n\n                <!-- 处理操作（待处理时显示） -->\n                <el-card v-if=\"canHandle(currentItem)\" shadow=\"never\" class=\"detail-section\">\n                    <div slot=\"header\">\n                        <span>处理操作</span>\n                    </div>\n                    <el-form :model=\"handleForm\" label-width=\"120px\">\n                        <el-form-item label=\"处理结果\" required>\n                            <el-radio-group v-model=\"handleForm.handleResult\">\n                                <el-radio :label=\"1\">同意退款</el-radio>\n                                <el-radio :label=\"2\">驳回申请</el-radio>\n                            </el-radio-group>\n                        </el-form-item>\n                        <el-form-item label=\"处理说明\" v-if=\"handleForm.handleResult === 2\" required>\n                            <el-input\n                                type=\"textarea\"\n                                :rows=\"4\"\n                                v-model=\"handleForm.handleDescription\"\n                                placeholder=\"请填写驳回原因\">\n                            </el-input>\n                        </el-form-item>\n                        <el-form-item>\n                            <el-button type=\"primary\" @click=\"submitAfterSaleHandle\">提交处理</el-button>\n                            <el-button @click=\"dialogVisible = false\">取消</el-button>\n                        </el-form-item>\n                    </el-form>\n                </el-card>\n\n                <!-- 处理结果（已处理时显示） -->\n                <el-card v-if=\"!canHandle(currentItem) && (currentItem.applicationStatus === 5 || currentItem.applicationStatus === 6)\" shadow=\"never\" class=\"detail-section\">\n                    <div slot=\"header\">\n                        <span>处理结果</span>\n                    </div>\n                    <el-descriptions :column=\"2\" border>\n                        <el-descriptions-item label=\"处理结果\">\n                            <el-tag :type=\"currentItem.applicationStatus === 5 ? 'success' : 'danger'\" size=\"small\">\n                                {{ currentItem.applicationStatus === 5 ? '已同意退款' : '已驳回' }}\n                            </el-tag>\n                        </el-descriptions-item>\n                        <el-descriptions-item label=\"处理时间\">{{ currentItem.updateTime | formatDate }}</el-descriptions-item>\n                        <el-descriptions-item label=\"处理说明\" :span=\"2\">{{ currentItem.sellerRejectReason || '无' }}</el-descriptions-item>\n                    </el-descriptions>\n                </el-card>\n            </template>\n\n            <!-- 交易纠纷详情 -->\n            <template v-else>\n            <!-- 订单信息 -->\n            <el-card shadow=\"never\" class=\"detail-section\">\n                <div slot=\"header\">\n                    <span>订单信息</span>\n                </div>\n                <el-descriptions :column=\"2\" border>\n                    <el-descriptions-item label=\"订单号\">{{ currentItem.order && currentItem.order.orderNumber }}</el-descriptions-item>\n                    <el-descriptions-item label=\"订单金额\">¥{{ currentItem.order && currentItem.order.orderPrice }}</el-descriptions-item>\n                    <el-descriptions-item label=\"商品名称\">{{ currentItem.order && currentItem.order.idleItem && currentItem.order.idleItem.idleName }}</el-descriptions-item>\n                    <el-descriptions-item label=\"订单状态\">\n                        <el-tag size=\"small\">{{ getOrderStatusText(currentItem.order && currentItem.order.orderStatus) }}</el-tag>\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"支付状态\">\n                        <el-tag :type=\"currentItem.order && currentItem.order.paymentStatus ? 'success' : 'warning'\" size=\"small\">\n                            {{ currentItem.order && currentItem.order.paymentStatus ? '已支付' : '未支付' }}\n                        </el-tag>\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"创建时间\">{{ currentItem.order && currentItem.order.createTime | formatDate }}</el-descriptions-item>\n                </el-descriptions>\n            </el-card>\n\n            <!-- 纠纷信息 -->\n            <el-card shadow=\"never\" class=\"detail-section\">\n                <div slot=\"header\">\n                    <span>纠纷信息</span>\n                </div>\n                <el-descriptions :column=\"2\" border>\n                    <el-descriptions-item label=\"申请人\">{{ currentItem.applicant && currentItem.applicant.nickname }}</el-descriptions-item>\n                    <el-descriptions-item label=\"申请时间\">{{ currentItem.createTime | formatDate }}</el-descriptions-item>\n                    <el-descriptions-item label=\"纠纷类型\">\n                        <el-tag size=\"small\">{{ getDisputeTypeText(currentItem.disputeType) }}</el-tag>\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"纠纷状态\">\n                        <el-tag :type=\"getStatusType(currentItem.disputeStatus)\" size=\"small\">\n                            {{ getStatusText(currentItem.disputeStatus) }}\n                        </el-tag>\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"纠纷原因\" :span=\"2\">{{ currentItem.disputeReason }}</el-descriptions-item>\n                </el-descriptions>\n\n                <!-- 证据图片 -->\n                <div v-if=\"currentItem.evidenceImages\" class=\"evidence-images\">\n                    <el-divider>证据图片</el-divider>\n                    <div class=\"image-list\">\n                        <el-image\n                            v-for=\"(img, index) in getEvidenceImages(currentItem.evidenceImages)\"\n                            :key=\"index\"\n                            :src=\"img\"\n                            :preview-src-list=\"getEvidenceImages(currentItem.evidenceImages)\"\n                            fit=\"cover\"\n                            class=\"evidence-image\">\n                        </el-image>\n                    </div>\n                </div>\n            </el-card>\n\n            <!-- 处理结果（已处理时显示） -->\n            <el-card v-if=\"currentItem.disputeStatus === 2\" shadow=\"never\" class=\"detail-section\">\n                <div slot=\"header\">\n                    <span>处理结果</span>\n                </div>\n                <el-descriptions :column=\"2\" border>\n                    <el-descriptions-item label=\"处理结果\">\n                        <el-tag type=\"success\" size=\"small\">{{ getHandleResultText(currentItem.handleResult) }}</el-tag>\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"处理时间\">{{ currentItem.handleTime | formatDate }}</el-descriptions-item>\n                    <el-descriptions-item label=\"处理说明\" :span=\"2\">{{ currentItem.handleDescription || '无' }}</el-descriptions-item>\n                </el-descriptions>\n            </el-card>\n\n            <!-- 处理操作（待处理时显示） -->\n            <el-card v-if=\"currentItem.disputeStatus === 0\" shadow=\"never\" class=\"detail-section\">\n                <div slot=\"header\">\n                    <span>处理操作</span>\n                </div>\n                <el-form :model=\"handleForm\" label-width=\"120px\">\n                    <el-form-item label=\"处理结果\" required>\n                        <el-radio-group v-model=\"handleForm.handleResult\">\n                            <el-radio :label=\"1\">退款给买家</el-radio>\n                            <el-radio :label=\"2\">驳回申请</el-radio>\n                            <el-radio :label=\"3\">要求退货退款</el-radio>\n                            <el-radio :label=\"4\">警告用户</el-radio>\n                            <el-radio :label=\"5\">其他</el-radio>\n                        </el-radio-group>\n                    </el-form-item>\n                    <el-form-item label=\"处理说明\">\n                        <el-input\n                            type=\"textarea\"\n                            :rows=\"4\"\n                            v-model=\"handleForm.handleDescription\"\n                            placeholder=\"请输入处理说明\">\n                        </el-input>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"submitHandle\">提交处理</el-button>\n                        <el-button @click=\"dialogVisible = false\">取消</el-button>\n                    </el-form-item>\n                </el-form>\n            </el-card>\n            </template>\n        </div>\n    </el-dialog>\n</div>\n",null]}