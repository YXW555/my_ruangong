{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\merchant-apply.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\merchant-apply.vue","mtime":1766902026483},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AppHead from \"../common/AppHeader.vue\";\nimport AppBody from \"../common/AppPageBody.vue\";\nimport AppFoot from \"../common/AppFoot.vue\";\nexport default {\n  name: \"merchant-apply\",\n  components: {\n    AppHead: AppHead,\n    AppBody: AppBody,\n    AppFoot: AppFoot\n  },\n  data: function data() {\n    return {\n      applicationForm: {\n        shopName: '',\n        contactPhone: '',\n        contactAddress: '',\n        idCardFront: '',\n        idCardBack: '',\n        businessLicense: '',\n        applicationReason: ''\n      },\n      applicationStatus: null,\n      submitting: false,\n      rules: {\n        shopName: [{\n          required: true,\n          message: '请输入店铺名称',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 32,\n          message: '长度在 2 到 32 个字符',\n          trigger: 'blur'\n        }],\n        contactPhone: [{\n          required: true,\n          message: '请输入联系电话',\n          trigger: 'blur'\n        }, {\n          pattern: /^1[3-9]\\d{9}$/,\n          message: '请输入正确的手机号码',\n          trigger: 'blur'\n        }],\n        contactAddress: [{\n          required: true,\n          message: '请输入联系地址',\n          trigger: 'blur'\n        }, {\n          min: 5,\n          max: 128,\n          message: '长度在 5 到 128 个字符',\n          trigger: 'blur'\n        }],\n        idCardFront: [{\n          required: true,\n          message: '请上传身份证正面',\n          trigger: 'change'\n        }],\n        idCardBack: [{\n          required: true,\n          message: '请上传身份证反面',\n          trigger: 'change'\n        }],\n        applicationReason: [{\n          max: 512,\n          message: '最多512个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created: function created() {\n    this.loadApplicationStatus();\n  },\n  methods: {\n    loadApplicationStatus: function loadApplicationStatus() {\n      var _this = this;\n\n      this.$api.getMyMerchantApplication().then(function (res) {\n        if (res.status_code === 1 && res.data) {\n          _this.applicationStatus = res.data;\n\n          if (res.data.status === 0) {\n            // 待审核状态，填充表单数据\n            _this.applicationForm = {\n              shopName: res.data.shopName || '',\n              contactPhone: res.data.contactPhone || '',\n              contactAddress: res.data.contactAddress || '',\n              idCardFront: res.data.idCardFront || '',\n              idCardBack: res.data.idCardBack || '',\n              businessLicense: res.data.businessLicense || '',\n              applicationReason: res.data.applicationReason || ''\n            };\n          }\n        }\n      }).catch(function () {});\n    },\n    handleImageSuccess: function handleImageSuccess(res, field) {\n      if (res.status_code === 1) {\n        this.applicationForm[field] = res.data;\n        this.$refs.applicationForm.validateField(field);\n      } else {\n        this.$message.error('图片上传失败');\n      }\n    },\n    submitApplication: function submitApplication() {\n      var _this2 = this;\n\n      this.$refs.applicationForm.validate(function (valid) {\n        if (valid) {\n          _this2.submitting = true;\n\n          _this2.$api.submitMerchantApplication(_this2.applicationForm).then(function (res) {\n            if (res.status_code === 1) {\n              _this2.$message({\n                message: '申请提交成功，请等待审核！',\n                type: 'success'\n              });\n\n              _this2.loadApplicationStatus();\n            } else {\n              _this2.$message.error('申请提交失败：' + (res.msg || '未知错误'));\n            }\n          }).catch(function () {\n            _this2.$message.error('申请提交失败！');\n          }).finally(function () {\n            _this2.submitting = false;\n          });\n        }\n      });\n    },\n    resetForm: function resetForm() {\n      this.$refs.applicationForm.resetFields();\n    },\n    getStatusTitle: function getStatusTitle() {\n      if (!this.applicationStatus) return '';\n      var status = this.applicationStatus.status;\n      if (status === 0) return '审核中';\n      if (status === 1) return '审核通过';\n      if (status === 2) return '审核未通过';\n      return '';\n    },\n    getStatusType: function getStatusType() {\n      if (!this.applicationStatus) return 'info';\n      var status = this.applicationStatus.status;\n      if (status === 0) return 'warning';\n      if (status === 1) return 'success';\n      if (status === 2) return 'error';\n      return 'info';\n    },\n    getStatusDescription: function getStatusDescription() {\n      if (!this.applicationStatus) return '';\n      var status = this.applicationStatus.status;\n\n      if (status === 0) {\n        return '您的申请正在审核中，请耐心等待...';\n      }\n\n      if (status === 1) {\n        return '恭喜！您已成为经营性卖家，可以享受批量发布、库存管理等高级功能。';\n      }\n\n      if (status === 2) {\n        return this.applicationStatus.adminComment || '很抱歉，您的申请未通过审核，可以重新提交申请。';\n      }\n\n      return '';\n    }\n  }\n};",{"version":3,"sources":["merchant-apply.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA,OAAA,OAAA;AACA,OAAA,OAAA;AACA,OAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,OAAA,EAAA,OAFA;AAGA,IAAA,OAAA,EAAA;AAHA,GAFA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,eAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,YAAA,EAAA,EAFA;AAGA,QAAA,cAAA,EAAA,EAHA;AAIA,QAAA,WAAA,EAAA,EAJA;AAKA,QAAA,UAAA,EAAA,EALA;AAMA,QAAA,eAAA,EAAA,EANA;AAOA,QAAA,iBAAA,EAAA;AAPA,OADA;AAUA,MAAA,iBAAA,EAAA,IAVA;AAWA,MAAA,UAAA,EAAA,KAXA;AAYA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,EAEA;AAAA,UAAA,GAAA,EAAA,CAAA;AAAA,UAAA,GAAA,EAAA,EAAA;AAAA,UAAA,OAAA,EAAA,gBAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAFA,CADA;AAKA,QAAA,YAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,EAEA;AAAA,UAAA,OAAA,EAAA,eAAA;AAAA,UAAA,OAAA,EAAA,YAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAFA,CALA;AASA,QAAA,cAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,EAEA;AAAA,UAAA,GAAA,EAAA,CAAA;AAAA,UAAA,GAAA,EAAA,GAAA;AAAA,UAAA,OAAA,EAAA,iBAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAFA,CATA;AAaA,QAAA,WAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,UAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CAbA;AAgBA,QAAA,UAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,UAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CAhBA;AAmBA,QAAA,iBAAA,EAAA,CACA;AAAA,UAAA,GAAA,EAAA,GAAA;AAAA,UAAA,OAAA,EAAA,UAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA;AAnBA;AAZA,KAAA;AAoCA,GA5CA;AA6CA,EAAA,OA7CA,qBA6CA;AACA,SAAA,qBAAA;AACA,GA/CA;AAgDA,EAAA,OAAA,EAAA;AACA,IAAA,qBADA,mCACA;AAAA;;AACA,WAAA,IAAA,CAAA,wBAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,WAAA,KAAA,CAAA,IAAA,GAAA,CAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,iBAAA,GAAA,GAAA,CAAA,IAAA;;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA;AACA,YAAA,KAAA,CAAA,eAAA,GAAA;AACA,cAAA,QAAA,EAAA,GAAA,CAAA,IAAA,CAAA,QAAA,IAAA,EADA;AAEA,cAAA,YAAA,EAAA,GAAA,CAAA,IAAA,CAAA,YAAA,IAAA,EAFA;AAGA,cAAA,cAAA,EAAA,GAAA,CAAA,IAAA,CAAA,cAAA,IAAA,EAHA;AAIA,cAAA,WAAA,EAAA,GAAA,CAAA,IAAA,CAAA,WAAA,IAAA,EAJA;AAKA,cAAA,UAAA,EAAA,GAAA,CAAA,IAAA,CAAA,UAAA,IAAA,EALA;AAMA,cAAA,eAAA,EAAA,GAAA,CAAA,IAAA,CAAA,eAAA,IAAA,EANA;AAOA,cAAA,iBAAA,EAAA,GAAA,CAAA,IAAA,CAAA,iBAAA,IAAA;AAPA,aAAA;AASA;AACA;AACA,OAhBA,EAgBA,KAhBA,CAgBA,YAAA,CACA,CAjBA;AAkBA,KApBA;AAqBA,IAAA,kBArBA,8BAqBA,GArBA,EAqBA,KArBA,EAqBA;AACA,UAAA,GAAA,CAAA,WAAA,KAAA,CAAA,EAAA;AACA,aAAA,eAAA,CAAA,KAAA,IAAA,GAAA,CAAA,IAAA;AACA,aAAA,KAAA,CAAA,eAAA,CAAA,aAAA,CAAA,KAAA;AACA,OAHA,MAGA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,QAAA;AACA;AACA,KA5BA;AA6BA,IAAA,iBA7BA,+BA6BA;AAAA;;AACA,WAAA,KAAA,CAAA,eAAA,CAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,UAAA,GAAA,IAAA;;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,yBAAA,CAAA,MAAA,CAAA,eAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,gBAAA,GAAA,CAAA,WAAA,KAAA,CAAA,EAAA;AACA,cAAA,MAAA,CAAA,QAAA,CAAA;AACA,gBAAA,OAAA,EAAA,eADA;AAEA,gBAAA,IAAA,EAAA;AAFA,eAAA;;AAIA,cAAA,MAAA,CAAA,qBAAA;AACA,aANA,MAMA;AACA,cAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,aAAA,GAAA,CAAA,GAAA,IAAA,MAAA,CAAA;AACA;AACA,WAVA,EAUA,KAVA,CAUA,YAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,SAAA;AACA,WAZA,EAYA,OAZA,CAYA,YAAA;AACA,YAAA,MAAA,CAAA,UAAA,GAAA,KAAA;AACA,WAdA;AAeA;AACA,OAnBA;AAoBA,KAlDA;AAmDA,IAAA,SAnDA,uBAmDA;AACA,WAAA,KAAA,CAAA,eAAA,CAAA,WAAA;AACA,KArDA;AAsDA,IAAA,cAtDA,4BAsDA;AACA,UAAA,CAAA,KAAA,iBAAA,EAAA,OAAA,EAAA;AACA,UAAA,MAAA,GAAA,KAAA,iBAAA,CAAA,MAAA;AACA,UAAA,MAAA,KAAA,CAAA,EAAA,OAAA,KAAA;AACA,UAAA,MAAA,KAAA,CAAA,EAAA,OAAA,MAAA;AACA,UAAA,MAAA,KAAA,CAAA,EAAA,OAAA,OAAA;AACA,aAAA,EAAA;AACA,KA7DA;AA8DA,IAAA,aA9DA,2BA8DA;AACA,UAAA,CAAA,KAAA,iBAAA,EAAA,OAAA,MAAA;AACA,UAAA,MAAA,GAAA,KAAA,iBAAA,CAAA,MAAA;AACA,UAAA,MAAA,KAAA,CAAA,EAAA,OAAA,SAAA;AACA,UAAA,MAAA,KAAA,CAAA,EAAA,OAAA,SAAA;AACA,UAAA,MAAA,KAAA,CAAA,EAAA,OAAA,OAAA;AACA,aAAA,MAAA;AACA,KArEA;AAsEA,IAAA,oBAtEA,kCAsEA;AACA,UAAA,CAAA,KAAA,iBAAA,EAAA,OAAA,EAAA;AACA,UAAA,MAAA,GAAA,KAAA,iBAAA,CAAA,MAAA;;AACA,UAAA,MAAA,KAAA,CAAA,EAAA;AACA,eAAA,oBAAA;AACA;;AACA,UAAA,MAAA,KAAA,CAAA,EAAA;AACA,eAAA,kCAAA;AACA;;AACA,UAAA,MAAA,KAAA,CAAA,EAAA;AACA,eAAA,KAAA,iBAAA,CAAA,YAAA,IAAA,yBAAA;AACA;;AACA,aAAA,EAAA;AACA;AAnFA;AAhDA,CAAA","sourcesContent":["<template>\r\n    <div>\r\n        <app-head></app-head>\r\n        <app-body>\r\n            <div class=\"merchant-apply-container\">\r\n                <el-card class=\"apply-card\" shadow=\"hover\">\r\n                    <div slot=\"header\" class=\"card-header\">\r\n                        <span><i class=\"el-icon-s-shop\"></i> 商家认证申请</span>\r\n                    </div>\r\n\r\n                    <!-- 申请状态提示 -->\r\n                    <div v-if=\"applicationStatus\" class=\"status-info\">\r\n                        <el-alert\r\n                            :title=\"getStatusTitle()\"\r\n                            :type=\"getStatusType()\"\r\n                            :description=\"getStatusDescription()\"\r\n                            show-icon\r\n                            :closable=\"false\">\r\n                        </el-alert>\r\n                    </div>\r\n\r\n                    <!-- 申请表单 -->\r\n                    <el-form\r\n                        :model=\"applicationForm\"\r\n                        :rules=\"rules\"\r\n                        ref=\"applicationForm\"\r\n                        label-width=\"120px\"\r\n                        class=\"apply-form\"\r\n                        v-if=\"!applicationStatus || applicationStatus.status === 2\">\r\n                        <el-form-item label=\"店铺名称\" prop=\"shopName\">\r\n                            <el-input\r\n                                v-model=\"applicationForm.shopName\"\r\n                                placeholder=\"请输入店铺名称\"\r\n                                maxlength=\"32\"\r\n                                show-word-limit>\r\n                            </el-input>\r\n                        </el-form-item>\r\n\r\n                        <el-form-item label=\"联系电话\" prop=\"contactPhone\">\r\n                            <el-input\r\n                                v-model=\"applicationForm.contactPhone\"\r\n                                placeholder=\"请输入联系电话\"\r\n                                maxlength=\"16\">\r\n                            </el-input>\r\n                        </el-form-item>\r\n\r\n                        <el-form-item label=\"联系地址\" prop=\"contactAddress\">\r\n                            <el-input\r\n                                v-model=\"applicationForm.contactAddress\"\r\n                                type=\"textarea\"\r\n                                :rows=\"2\"\r\n                                placeholder=\"请输入详细联系地址\"\r\n                                maxlength=\"128\"\r\n                                show-word-limit>\r\n                            </el-input>\r\n                        </el-form-item>\r\n\r\n                        <el-form-item label=\"身份证正面\" prop=\"idCardFront\">\r\n                            <el-upload\r\n                                action=\"/file/\"\r\n                                :on-success=\"(res) => handleImageSuccess(res, 'idCardFront')\"\r\n                                :show-file-list=\"false\"\r\n                                accept=\"image/*\"\r\n                                class=\"image-uploader\">\r\n                                <el-image\r\n                                    v-if=\"applicationForm.idCardFront\"\r\n                                    :src=\"applicationForm.idCardFront\"\r\n                                    fit=\"cover\"\r\n                                    class=\"uploaded-image\">\r\n                                </el-image>\r\n                                <i v-else class=\"el-icon-plus image-uploader-icon\"></i>\r\n                            </el-upload>\r\n                            <div class=\"upload-tip\">请上传身份证正面照片</div>\r\n                        </el-form-item>\r\n\r\n                        <el-form-item label=\"身份证反面\" prop=\"idCardBack\">\r\n                            <el-upload\r\n                                action=\"/file/\"\r\n                                :on-success=\"(res) => handleImageSuccess(res, 'idCardBack')\"\r\n                                :show-file-list=\"false\"\r\n                                accept=\"image/*\"\r\n                                class=\"image-uploader\">\r\n                                <el-image\r\n                                    v-if=\"applicationForm.idCardBack\"\r\n                                    :src=\"applicationForm.idCardBack\"\r\n                                    fit=\"cover\"\r\n                                    class=\"uploaded-image\">\r\n                                </el-image>\r\n                                <i v-else class=\"el-icon-plus image-uploader-icon\"></i>\r\n                            </el-upload>\r\n                            <div class=\"upload-tip\">请上传身份证反面照片</div>\r\n                        </el-form-item>\r\n\r\n                        <el-form-item label=\"营业执照\" prop=\"businessLicense\">\r\n                            <el-upload\r\n                                action=\"/file/\"\r\n                                :on-success=\"(res) => handleImageSuccess(res, 'businessLicense')\"\r\n                                :show-file-list=\"false\"\r\n                                accept=\"image/*\"\r\n                                class=\"image-uploader\">\r\n                                <el-image\r\n                                    v-if=\"applicationForm.businessLicense\"\r\n                                    :src=\"applicationForm.businessLicense\"\r\n                                    fit=\"cover\"\r\n                                    class=\"uploaded-image\">\r\n                                </el-image>\r\n                                <i v-else class=\"el-icon-plus image-uploader-icon\"></i>\r\n                            </el-upload>\r\n                            <div class=\"upload-tip\">请上传营业执照（可选）</div>\r\n                        </el-form-item>\r\n\r\n                        <el-form-item label=\"申请理由\" prop=\"applicationReason\">\r\n                            <el-input\r\n                                v-model=\"applicationForm.applicationReason\"\r\n                                type=\"textarea\"\r\n                                :rows=\"4\"\r\n                                placeholder=\"请简要说明申请成为经营性卖家的理由...\"\r\n                                maxlength=\"512\"\r\n                                show-word-limit>\r\n                            </el-input>\r\n                        </el-form-item>\r\n\r\n                        <el-form-item>\r\n                            <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"submitApplication\" :loading=\"submitting\">\r\n                                提交申请\r\n                            </el-button>\r\n                            <el-button @click=\"resetForm\">重置</el-button>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </el-card>\r\n            </div>\r\n            <app-foot></app-foot>\r\n        </app-body>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import AppHead from '../common/AppHeader.vue';\r\n    import AppBody from '../common/AppPageBody.vue';\r\n    import AppFoot from '../common/AppFoot.vue';\r\n\r\n    export default {\r\n        name: \"merchant-apply\",\r\n        components: {\r\n            AppHead,\r\n            AppBody,\r\n            AppFoot\r\n        },\r\n        data() {\r\n            return {\r\n                applicationForm: {\r\n                    shopName: '',\r\n                    contactPhone: '',\r\n                    contactAddress: '',\r\n                    idCardFront: '',\r\n                    idCardBack: '',\r\n                    businessLicense: '',\r\n                    applicationReason: ''\r\n                },\r\n                applicationStatus: null,\r\n                submitting: false,\r\n                rules: {\r\n                    shopName: [\r\n                        { required: true, message: '请输入店铺名称', trigger: 'blur' },\r\n                        { min: 2, max: 32, message: '长度在 2 到 32 个字符', trigger: 'blur' }\r\n                    ],\r\n                    contactPhone: [\r\n                        { required: true, message: '请输入联系电话', trigger: 'blur' },\r\n                        { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号码', trigger: 'blur' }\r\n                    ],\r\n                    contactAddress: [\r\n                        { required: true, message: '请输入联系地址', trigger: 'blur' },\r\n                        { min: 5, max: 128, message: '长度在 5 到 128 个字符', trigger: 'blur' }\r\n                    ],\r\n                    idCardFront: [\r\n                        { required: true, message: '请上传身份证正面', trigger: 'change' }\r\n                    ],\r\n                    idCardBack: [\r\n                        { required: true, message: '请上传身份证反面', trigger: 'change' }\r\n                    ],\r\n                    applicationReason: [\r\n                        { max: 512, message: '最多512个字符', trigger: 'blur' }\r\n                    ]\r\n                }\r\n            };\r\n        },\r\n        created() {\r\n            this.loadApplicationStatus();\r\n        },\r\n        methods: {\r\n            loadApplicationStatus() {\r\n                this.$api.getMyMerchantApplication().then(res => {\r\n                    if (res.status_code === 1 && res.data) {\r\n                        this.applicationStatus = res.data;\r\n                        if (res.data.status === 0) {\r\n                            // 待审核状态，填充表单数据\r\n                            this.applicationForm = {\r\n                                shopName: res.data.shopName || '',\r\n                                contactPhone: res.data.contactPhone || '',\r\n                                contactAddress: res.data.contactAddress || '',\r\n                                idCardFront: res.data.idCardFront || '',\r\n                                idCardBack: res.data.idCardBack || '',\r\n                                businessLicense: res.data.businessLicense || '',\r\n                                applicationReason: res.data.applicationReason || ''\r\n                            };\r\n                        }\r\n                    }\r\n                }).catch(() => {\r\n                });\r\n            },\r\n            handleImageSuccess(res, field) {\r\n                if (res.status_code === 1) {\r\n                    this.applicationForm[field] = res.data;\r\n                    this.$refs.applicationForm.validateField(field);\r\n                } else {\r\n                    this.$message.error('图片上传失败');\r\n                }\r\n            },\r\n            submitApplication() {\r\n                this.$refs.applicationForm.validate((valid) => {\r\n                    if (valid) {\r\n                        this.submitting = true;\r\n                        this.$api.submitMerchantApplication(this.applicationForm).then(res => {\r\n                            if (res.status_code === 1) {\r\n                                this.$message({\r\n                                    message: '申请提交成功，请等待审核！',\r\n                                    type: 'success'\r\n                                });\r\n                                this.loadApplicationStatus();\r\n                            } else {\r\n                                this.$message.error('申请提交失败：' + (res.msg || '未知错误'));\r\n                            }\r\n                        }).catch(() => {\r\n                            this.$message.error('申请提交失败！');\r\n                        }).finally(() => {\r\n                            this.submitting = false;\r\n                        });\r\n                    }\r\n                });\r\n            },\r\n            resetForm() {\r\n                this.$refs.applicationForm.resetFields();\r\n            },\r\n            getStatusTitle() {\r\n                if (!this.applicationStatus) return '';\r\n                const status = this.applicationStatus.status;\r\n                if (status === 0) return '审核中';\r\n                if (status === 1) return '审核通过';\r\n                if (status === 2) return '审核未通过';\r\n                return '';\r\n            },\r\n            getStatusType() {\r\n                if (!this.applicationStatus) return 'info';\r\n                const status = this.applicationStatus.status;\r\n                if (status === 0) return 'warning';\r\n                if (status === 1) return 'success';\r\n                if (status === 2) return 'error';\r\n                return 'info';\r\n            },\r\n            getStatusDescription() {\r\n                if (!this.applicationStatus) return '';\r\n                const status = this.applicationStatus.status;\r\n                if (status === 0) {\r\n                    return '您的申请正在审核中，请耐心等待...';\r\n                }\r\n                if (status === 1) {\r\n                    return '恭喜！您已成为经营性卖家，可以享受批量发布、库存管理等高级功能。';\r\n                }\r\n                if (status === 2) {\r\n                    return this.applicationStatus.adminComment || '很抱歉，您的申请未通过审核，可以重新提交申请。';\r\n                }\r\n                return '';\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .merchant-apply-container {\r\n        min-height: 85vh;\r\n        padding: 20px;\r\n    }\r\n\r\n    .apply-card {\r\n        max-width: 900px;\r\n        margin: 0 auto;\r\n    }\r\n\r\n    .card-header {\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n    }\r\n\r\n    .status-info {\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .apply-form {\r\n        padding: 20px 0;\r\n    }\r\n\r\n    .image-uploader {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n        width: 178px;\r\n        height: 178px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n\r\n    .image-uploader:hover {\r\n        border-color: #409EFF;\r\n    }\r\n\r\n    .image-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n    }\r\n\r\n    .uploaded-image {\r\n        width: 178px;\r\n        height: 178px;\r\n    }\r\n\r\n    .upload-tip {\r\n        font-size: 12px;\r\n        color: #909399;\r\n        margin-top: 5px;\r\n    }\r\n</style>\r\n\r\n"],"sourceRoot":"src/components/page"}]}