{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\merchant-apply.vue?vue&type=style&index=0&id=0666bc49&scoped=true&lang=css&","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\merchant-apply.vue","mtime":1767591365557},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\css-loader\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.merchant-apply-container {\n    min-height: 85vh;\n    padding: 20px;\n}\n\n.apply-card {\n    max-width: 900px;\n    margin: 0 auto;\n}\n\n.card-header {\n    font-size: 18px;\n    font-weight: 600;\n}\n\n.status-info {\n    margin-bottom: 20px;\n}\n\n.apply-form {\n    padding: 20px 0;\n}\n\n.image-uploader {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n    width: 178px;\n    height: 178px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.image-uploader:hover {\n    border-color: #409EFF;\n}\n\n.image-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n}\n\n.uploaded-image {\n    width: 178px;\n    height: 178px;\n}\n\n.upload-tip {\n    font-size: 12px;\n    color: #909399;\n    margin-top: 5px;\n}\n",{"version":3,"sources":["merchant-apply.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsRA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"merchant-apply.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\n    <div>\n        <app-head></app-head>\n        <app-body>\n            <div class=\"merchant-apply-container\">\n                <el-card class=\"apply-card\" shadow=\"hover\">\n                    <div slot=\"header\" class=\"card-header\">\n                        <span><i class=\"el-icon-s-shop\"></i> 商家认证申请</span>\n                    </div>\n\n                    <!-- 申请状态提示 -->\n                    <div v-if=\"applicationStatus\" class=\"status-info\">\n                        <el-alert\n                            :title=\"getStatusTitle()\"\n                            :type=\"getStatusType()\"\n                            :description=\"getStatusDescription()\"\n                            show-icon\n                            :closable=\"false\">\n                        </el-alert>\n                    </div>\n\n                    <!-- 申请表单 -->\n                    <el-form\n                        :model=\"applicationForm\"\n                        :rules=\"rules\"\n                        ref=\"applicationForm\"\n                        label-width=\"120px\"\n                        class=\"apply-form\"\n                        v-if=\"!applicationStatus || applicationStatus.status === 2\">\n                        <el-form-item label=\"店铺名称\" prop=\"shopName\">\n                            <el-input\n                                v-model=\"applicationForm.shopName\"\n                                placeholder=\"请输入店铺名称\"\n                                maxlength=\"32\"\n                                show-word-limit>\n                            </el-input>\n                        </el-form-item>\n\n                        <el-form-item label=\"联系电话\" prop=\"contactPhone\">\n                            <el-input\n                                v-model=\"applicationForm.contactPhone\"\n                                placeholder=\"请输入联系电话\"\n                                maxlength=\"16\">\n                            </el-input>\n                        </el-form-item>\n\n                        <el-form-item label=\"联系地址\" prop=\"contactAddress\">\n                            <el-input\n                                v-model=\"applicationForm.contactAddress\"\n                                type=\"textarea\"\n                                :rows=\"2\"\n                                placeholder=\"请输入详细联系地址\"\n                                maxlength=\"128\"\n                                show-word-limit>\n                            </el-input>\n                        </el-form-item>\n\n                        <el-form-item label=\"身份证正面\" prop=\"idCardFront\">\n                            <el-upload\n                                action=\"/api/file\"\n                                :on-success=\"(res) => handleImageSuccess(res, 'idCardFront')\"\n                                :show-file-list=\"false\"\n                                accept=\"image/*\"\n                                class=\"image-uploader\">\n                                <el-image\n                                    v-if=\"applicationForm.idCardFront\"\n                                    :src=\"applicationForm.idCardFront\"\n                                    fit=\"cover\"\n                                    class=\"uploaded-image\">\n                                </el-image>\n                                <i v-else class=\"el-icon-plus image-uploader-icon\"></i>\n                            </el-upload>\n                            <div class=\"upload-tip\">请上传身份证正面照片</div>\n                        </el-form-item>\n\n                        <el-form-item label=\"身份证反面\" prop=\"idCardBack\">\n                            <el-upload\n                                action=\"/api/file\"\n                                :on-success=\"(res) => handleImageSuccess(res, 'idCardBack')\"\n                                :show-file-list=\"false\"\n                                accept=\"image/*\"\n                                class=\"image-uploader\">\n                                <el-image\n                                    v-if=\"applicationForm.idCardBack\"\n                                    :src=\"applicationForm.idCardBack\"\n                                    fit=\"cover\"\n                                    class=\"uploaded-image\">\n                                </el-image>\n                                <i v-else class=\"el-icon-plus image-uploader-icon\"></i>\n                            </el-upload>\n                            <div class=\"upload-tip\">请上传身份证反面照片</div>\n                        </el-form-item>\n\n                        <el-form-item label=\"营业执照\" prop=\"businessLicense\">\n                            <el-upload\n                                action=\"/api/file\"\n                                :on-success=\"(res) => handleImageSuccess(res, 'businessLicense')\"\n                                :show-file-list=\"false\"\n                                accept=\"image/*\"\n                                class=\"image-uploader\">\n                                <el-image\n                                    v-if=\"applicationForm.businessLicense\"\n                                    :src=\"applicationForm.businessLicense\"\n                                    fit=\"cover\"\n                                    class=\"uploaded-image\">\n                                </el-image>\n                                <i v-else class=\"el-icon-plus image-uploader-icon\"></i>\n                            </el-upload>\n                            <div class=\"upload-tip\">请上传营业执照（可选）</div>\n                        </el-form-item>\n\n                        <el-form-item label=\"申请理由\" prop=\"applicationReason\">\n                            <el-input\n                                v-model=\"applicationForm.applicationReason\"\n                                type=\"textarea\"\n                                :rows=\"4\"\n                                placeholder=\"请简要说明申请成为经营性卖家的理由...\"\n                                maxlength=\"512\"\n                                show-word-limit>\n                            </el-input>\n                        </el-form-item>\n\n                        <el-form-item>\n                            <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"submitApplication\" :loading=\"submitting\">\n                                提交申请\n                            </el-button>\n                            <el-button @click=\"resetForm\">重置</el-button>\n                        </el-form-item>\n                    </el-form>\n                </el-card>\n            </div>\n            <app-foot></app-foot>\n        </app-body>\n    </div>\n</template>\n\n<script>\n    import AppHead from '../common/AppHeader.vue';\n    import AppBody from '../common/AppPageBody.vue';\n    import AppFoot from '../common/AppFoot.vue';\n\n    export default {\n        name: \"merchant-apply\",\n        components: {\n            AppHead,\n            AppBody,\n            AppFoot\n        },\n        data() {\n            return {\n                applicationForm: {\n                    shopName: '',\n                    contactPhone: '',\n                    contactAddress: '',\n                    idCardFront: '',\n                    idCardBack: '',\n                    businessLicense: '',\n                    applicationReason: ''\n                },\n                applicationStatus: null,\n                submitting: false,\n                rules: {\n                    shopName: [\n                        { required: true, message: '请输入店铺名称', trigger: 'blur' },\n                        { min: 2, max: 32, message: '长度在 2 到 32 个字符', trigger: 'blur' }\n                    ],\n                    contactPhone: [\n                        { required: true, message: '请输入联系电话', trigger: 'blur' },\n                        { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号码', trigger: 'blur' }\n                    ],\n                    contactAddress: [\n                        { required: true, message: '请输入联系地址', trigger: 'blur' },\n                        { min: 5, max: 128, message: '长度在 5 到 128 个字符', trigger: 'blur' }\n                    ],\n                    idCardFront: [\n                        { required: true, message: '请上传身份证正面', trigger: 'change' }\n                    ],\n                    idCardBack: [\n                        { required: true, message: '请上传身份证反面', trigger: 'change' }\n                    ],\n                    applicationReason: [\n                        { max: 512, message: '最多512个字符', trigger: 'blur' }\n                    ]\n                }\n            };\n        },\n        created() {\n            this.loadApplicationStatus();\n        },\n        methods: {\n            loadApplicationStatus() {\n                this.$api.getMyMerchantApplication().then(res => {\n                    if (res.status_code === 1 && res.data) {\n                        this.applicationStatus = res.data;\n                        if (res.data.status === 0) {\n                            // 待审核状态，填充表单数据\n                            this.applicationForm = {\n                                shopName: res.data.shopName || '',\n                                contactPhone: res.data.contactPhone || '',\n                                contactAddress: res.data.contactAddress || '',\n                                idCardFront: res.data.idCardFront || '',\n                                idCardBack: res.data.idCardBack || '',\n                                businessLicense: res.data.businessLicense || '',\n                                applicationReason: res.data.applicationReason || ''\n                            };\n                        }\n                    }\n                }).catch(() => {\n                });\n            },\n            handleImageSuccess(res, field) {\n                if (res.status_code === 1) {\n                    this.applicationForm[field] = res.data;\n                    this.$refs.applicationForm.validateField(field);\n                } else {\n                    this.$message.error('图片上传失败');\n                }\n            },\n            submitApplication() {\n                this.$refs.applicationForm.validate((valid) => {\n                    if (valid) {\n                        this.submitting = true;\n                        this.$api.submitMerchantApplication(this.applicationForm).then(res => {\n                            if (res.status_code === 1) {\n                                this.$message({\n                                    message: '申请提交成功，请等待审核！',\n                                    type: 'success'\n                                });\n                                this.loadApplicationStatus();\n                            } else {\n                                this.$message.error('申请提交失败：' + (res.msg || '未知错误'));\n                            }\n                        }).catch(() => {\n                            this.$message.error('申请提交失败！');\n                        }).finally(() => {\n                            this.submitting = false;\n                        });\n                    }\n                });\n            },\n            resetForm() {\n                this.$refs.applicationForm.resetFields();\n            },\n            getStatusTitle() {\n                if (!this.applicationStatus) return '';\n                const status = this.applicationStatus.status;\n                if (status === 0) return '审核中';\n                if (status === 1) return '审核通过';\n                if (status === 2) return '审核未通过';\n                return '';\n            },\n            getStatusType() {\n                if (!this.applicationStatus) return 'info';\n                const status = this.applicationStatus.status;\n                if (status === 0) return 'warning';\n                if (status === 1) return 'success';\n                if (status === 2) return 'error';\n                return 'info';\n            },\n            getStatusDescription() {\n                if (!this.applicationStatus) return '';\n                const status = this.applicationStatus.status;\n                if (status === 0) {\n                    return '您的申请正在审核中，请耐心等待...';\n                }\n                if (status === 1) {\n                    return '恭喜！您已成为经营性卖家，可以享受批量发布、库存管理等高级功能。';\n                }\n                if (status === 2) {\n                    return this.applicationStatus.adminComment || '很抱歉，您的申请未通过审核，可以重新提交申请。';\n                }\n                return '';\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .merchant-apply-container {\n        min-height: 85vh;\n        padding: 20px;\n    }\n\n    .apply-card {\n        max-width: 900px;\n        margin: 0 auto;\n    }\n\n    .card-header {\n        font-size: 18px;\n        font-weight: 600;\n    }\n\n    .status-info {\n        margin-bottom: 20px;\n    }\n\n    .apply-form {\n        padding: 20px 0;\n    }\n\n    .image-uploader {\n        border: 1px dashed #d9d9d9;\n        border-radius: 6px;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n        width: 178px;\n        height: 178px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n\n    .image-uploader:hover {\n        border-color: #409EFF;\n    }\n\n    .image-uploader-icon {\n        font-size: 28px;\n        color: #8c939d;\n    }\n\n    .uploaded-image {\n        width: 178px;\n        height: 178px;\n    }\n\n    .upload-tip {\n        font-size: 12px;\n        color: #909399;\n        margin-top: 5px;\n    }\n</style>\n\n"]}]}