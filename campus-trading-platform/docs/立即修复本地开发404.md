# 立即修复本地开发 404 错误

## 问题

请求发送到 `http://localhost:8081/api/idle/lable`，返回 404。

**原因**：代理配置没有生效，请求直接发送到了后端端口。

## 立即修复步骤

### 第 1 步：检查后端服务

```bash
cd campus-trading-platform
docker-compose ps
```

确保 `campus-trading-backend` 容器在运行。

### 第 2 步：测试后端接口（直接访问）

```bash
# 测试后端接口（注意：没有 /api 前缀）
curl "http://localhost:8081/idle/lable?idleLabel=1&page=1&nums=8"
```

如果这个能返回数据，说明后端正常。

### 第 3 步：重启前端开发服务器（重要！）

**必须完全重启**前端开发服务器：

```bash
# 1. 停止前端开发服务器（在运行前端的终端按 Ctrl+C）

# 2. 重新启动
cd campus-trading-platform/frontend
npm run serve
```

### 第 4 步：清除浏览器缓存

1. 打开浏览器开发者工具（F12）
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"

或者按 `Ctrl+Shift+R` 硬刷新。

## 验证代理是否生效

重启后，在浏览器开发者工具的 Network 标签中：

1. **应该看到请求 URL 是**：`http://localhost:8080/api/idle/lable?...`
2. **不应该看到**：`http://localhost:8081/api/idle/lable?...`

如果还是看到 `8081`，说明代理没有生效。

## 如果还是不行

### 检查代理配置

确认 `vue.config.js` 文件内容：

```javascript
devServer: {
    port: 8080,
    proxy: {
        '/api': {
            target: 'http://localhost:8081',
            changeOrigin: true,
            pathRewrite: {
                '^/api': ''
            }
        }
    }
}
```

### 检查后端日志

```bash
docker-compose logs backend | tail -30
```

查看是否有请求到达后端。

### 临时方案：直接使用后端地址

如果代理一直不生效，可以临时修改 `request.js`：

```javascript
// 临时方案：开发环境直接使用后端地址
const baseURL = process.env.NODE_ENV === 'development' 
    ? 'http://localhost:8081' 
    : '/api';
```

但这不是推荐方案，最好让代理生效。

