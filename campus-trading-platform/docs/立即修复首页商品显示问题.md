# 立即修复首页商品显示问题

## 问题原因

后端查询逻辑中，首页只显示 `idle_status = 1`（发布状态）的商品。

SQL 查询条件：
```sql
WHERE i.idle_label = #{idleLabel} AND i.idle_status = 1
```

如果商品状态不是 1，就不会在首页显示。

## 立即修复

在服务器上执行：

```bash
cd /opt/campus-trading-platform

echo "=== 1. 检查商品状态 ==="
sudo docker compose exec mysql mysql -u trading_user -ptrading123456 -e "USE second_hand_trading; SELECT id, idle_name, idle_status, idle_label FROM sh_idle_item ORDER BY id DESC LIMIT 10;" 2>&1

echo ""
echo "=== 2. 将商品状态改为 1（发布）==="
sudo docker compose exec mysql mysql -u root -proot123456 second_hand_trading << 'EOF'
-- 将所有商品状态改为 1（发布状态）
UPDATE sh_idle_item 
SET idle_status = 1 
WHERE idle_status != 1 AND idle_status != 0;
-- 注意：idle_status = 0 是删除状态，不要改
EOF

echo ""
echo "=== 3. 验证更新 ==="
sudo docker compose exec mysql mysql -u trading_user -ptrading123456 -e "USE second_hand_trading; SELECT id, idle_name, idle_status, idle_label FROM sh_idle_item ORDER BY id DESC LIMIT 10;" 2>&1

echo ""
echo "=== 4. 检查发布状态的商品数量 ==="
sudo docker compose exec mysql mysql -u trading_user -ptrading123456 -e "USE second_hand_trading; SELECT COUNT(*) as published_count FROM sh_idle_item WHERE idle_status = 1;" 2>&1
```

## 商品状态说明

- `1` = 发布（应该在首页显示）✅
- `2` = 下架（不应该在首页显示）❌
- `0` = 删除（不应该在首页显示）❌

## 验证修复

修复后：

1. **刷新前端首页**
2. **应该能看到商品了**
3. **如果还是看不到，检查商品分类（idle_label）**

## 如果还是看不到

检查商品分类：

```bash
# 查看商品分类
sudo docker compose exec mysql mysql -u trading_user -ptrading123456 -e "USE second_hand_trading; SELECT id, idle_name, idle_label, idle_status FROM sh_idle_item WHERE idle_status = 1;" 2>&1

# 分类说明：
# 1 = 数码科技
# 2 = 生活用品
# 3 = 运动相关
# 4 = 图书笔记
# 5 = 公告展示
```

如果商品分类不对，需要修改：

```bash
# 修改商品分类（例如改为分类1：数码科技）
sudo docker compose exec mysql mysql -u root -proot123456 second_hand_trading << 'EOF'
UPDATE sh_idle_item 
SET idle_label = 1 
WHERE id = 你的商品ID;
EOF
```

