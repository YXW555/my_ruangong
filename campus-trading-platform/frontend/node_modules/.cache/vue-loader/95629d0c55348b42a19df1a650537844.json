{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\chat.vue?vue&type=template&id=810d4210&scoped=true&","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\chat.vue","mtime":1767248562324},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["\n<div>\n    <app-head></app-head>\n    <app-body>\n        <div class=\"chat-container\">\n            <!-- 会话列表 -->\n            <div class=\"chat-session-list\">\n                <div class=\"session-list-header\">\n                    <span>消息</span>\n                </div>\n                <div v-if=\"sessionList.length === 0\" class=\"session-empty\">\n                    暂无会话，去商品页发起私聊吧～\n                </div>\n                <div v-else>\n                    <div\n                            v-for=\"(session,index) in sessionList\"\n                            :key=\"session.id\"\n                            :class=\"['session-item', currentSessionKey === getSessionKey(session) ? 'active' : '']\"\n                            @click=\"selectSession(session)\"\n                    >\n                        <el-image\n                                class=\"session-avatar\"\n                                :src=\"getDisplayUser(session).avatar\"\n                                fit=\"cover\"\n                        ></el-image>\n                        <div class=\"session-info\">\n                            <div class=\"session-top\">\n                                <span class=\"session-name\">{{ getDisplayUser(session).nickname }}</span>\n                                <span class=\"session-time\">{{ formatTime(session.createTime) }}</span>\n                            </div>\n                            <div class=\"session-bottom\">\n                                <span class=\"session-last\">{{ session.content }}</span>\n                                <span v-if=\"session.idle\" class=\"session-goods-name\">\n                                    · {{ session.idle.idleName }}\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- 聊天窗口 -->\n            <div class=\"chat-session-panel\">\n                <div class=\"chat-header\" v-if=\"currentChatTarget\">\n                    <div class=\"chat-header-left\">\n                        <el-avatar :size=\"40\" :src=\"currentChatTarget.avatar\"></el-avatar>\n                        <div class=\"chat-header-text\">\n                            <div class=\"chat-header-name\">{{ currentChatTarget.nickname }}</div>\n                            <div class=\"chat-header-sub\" v-if=\"currentIdle\">\n                                正在沟通：{{ currentIdle.idleName }}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"chat-header\" v-else>\n                    <div class=\"chat-header-empty\">\n                        请选择左侧的会话或从商品详情页点击\"私聊\"发起会话\n                    </div>\n                </div>\n\n                <div class=\"chat-message-list\" ref=\"messageListRef\">\n                    <div v-if=\"messageList.length === 0\" class=\"chat-message-empty\">\n                        暂无聊天记录\n                    </div>\n                    <div\n                            v-else\n                            v-for=\"msg in messageList\"\n                            :key=\"msg.id\"\n                            :class=\"['chat-message-row', msg.fromUser == currentUserId ? 'self' : 'other']\"\n                    >\n                        <el-avatar\n                                :size=\"32\"\n                                :src=\"msg.fromU && msg.fromU.avatar\"\n                                class=\"chat-message-avatar\"\n                        ></el-avatar>\n                        <div class=\"chat-message-bubble\">\n                            <template v-if=\"msg.imageUrl\">\n                                <el-image\n                                        class=\"chat-image\"\n                                        :src=\"msg.imageUrl\"\n                                        :preview-src-list=\"[msg.imageUrl]\"\n                                        fit=\"cover\"\n                                ></el-image>\n                            </template>\n                            <template v-else>\n                                <div class=\"chat-message-content\" v-html=\"msg.content\"></div>\n                            </template>\n                            <div class=\"chat-message-time\">{{ formatTime(msg.createTime) }}</div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"chat-input-bar\">\n                    <el-input\n                            type=\"textarea\"\n                            :rows=\"3\"\n                            placeholder=\"请输入要发送的内容...\"\n                            v-model=\"inputContent\"\n                            maxlength=\"200\"\n                            show-word-limit\n                            @keyup.enter.native.exact.prevent=\"handleSend\"\n                    ></el-input>\n                    <div class=\"chat-input-actions\">\n                        <el-upload\n                                class=\"image-uploader\"\n                                :action=\"'/api/file'\"\n                                :show-file-list=\"false\"\n                                :on-success=\"handleUploadSuccess\"\n                                :on-error=\"handleUploadError\"\n                                :before-upload=\"beforeUpload\"\n                                accept=\"image/*\">\n                            <el-button icon=\"el-icon-picture-outline\" title=\"发送图片\"></el-button>\n                        </el-upload>\n                        <el-button type=\"primary\" icon=\"el-icon-s-promotion\" @click=\"handleSend\" :disabled=\"!currentTargetUserId\">\n                            发送\n                        </el-button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <app-foot></app-foot>\n    </app-body>\n</div>\n",null]}