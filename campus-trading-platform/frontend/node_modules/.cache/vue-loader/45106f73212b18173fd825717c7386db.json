{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\announcement-detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\page\\announcement-detail.vue","mtime":1767617320536},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  name: 'AnnouncementDetail',\r\n  data() {\r\n    return {\r\n      announcement: null\r\n    };\r\n  },\r\n  created() {\r\n    const id = this.$route.query.id;\r\n    if (id) {\r\n      this.load(id);\r\n    }\r\n  },\r\n  methods: {\r\n    load(id) {\r\n      this.$api.getAnnouncement({ id }).then(res => {\r\n        if (res.status_code === 1 && res.data) {\r\n          this.announcement = res.data;\r\n        } else {\r\n          this.$message.error(res.msg || '加载公告失败');\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('网络错误，加载公告失败');\r\n      });\r\n    },\r\n    formatTime(t) {\r\n      if (!t) return '';\r\n      return t.toString().substring(0, 19).replace('T', ' ');\r\n    },\r\n    getFirstImageFromContent(html) {\r\n      if (!html) return null;\r\n      const m = html.match(/<img\\s+[^>]*src=[\"']([^\"']+)[\"'][^>]*>/i);\r\n      return m ? m[1] : null;\r\n    },\r\n    roleLabel(role) {\r\n      if (role === 2) return '管理员';\r\n      if (role === 1) return '商家';\r\n      return '公告发布者';\r\n    }\r\n  },\r\n  computed: {\r\n    thumbnail() {\r\n      if (!this.announcement) return null;\r\n      return this.getFirstImageFromContent(this.announcement.content);\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["announcement-detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"announcement-detail.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\r\n  <div class=\"announcement-detail page-card\">\r\n    <el-card class=\"mt-16\" v-if=\"announcement\">\r\n      <div style=\"display:flex;justify-content:space-between;align-items:flex-start;\">\r\n        <div style=\"display:flex;align-items:center;\">\r\n          <img v-if=\"thumbnail\" :src=\"thumbnail\" style=\"width:56px;height:56px;object-fit:cover;border-radius:6px;margin-right:12px\" />\r\n          <div>\r\n            <div style=\"font-size:18px;font-weight:700\">{{ announcement.title }}</div>\r\n            <div style=\"color:#909399;font-size:12px;margin-top:4px;\">\r\n              {{ formatTime(announcement.createTime) }} · {{ roleLabel(announcement.creatorRole) }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"mt-12\" v-html=\"announcement.content\"></div>\r\n    </el-card>\r\n    <div v-else class=\"mt-40\" style=\"text-align:center;color:#909399\">正在加载公告...</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'AnnouncementDetail',\r\n  data() {\r\n    return {\r\n      announcement: null\r\n    };\r\n  },\r\n  created() {\r\n    const id = this.$route.query.id;\r\n    if (id) {\r\n      this.load(id);\r\n    }\r\n  },\r\n  methods: {\r\n    load(id) {\r\n      this.$api.getAnnouncement({ id }).then(res => {\r\n        if (res.status_code === 1 && res.data) {\r\n          this.announcement = res.data;\r\n        } else {\r\n          this.$message.error(res.msg || '加载公告失败');\r\n        }\r\n      }).catch(() => {\r\n        this.$message.error('网络错误，加载公告失败');\r\n      });\r\n    },\r\n    formatTime(t) {\r\n      if (!t) return '';\r\n      return t.toString().substring(0, 19).replace('T', ' ');\r\n    },\r\n    getFirstImageFromContent(html) {\r\n      if (!html) return null;\r\n      const m = html.match(/<img\\s+[^>]*src=[\"']([^\"']+)[\"'][^>]*>/i);\r\n      return m ? m[1] : null;\r\n    },\r\n    roleLabel(role) {\r\n      if (role === 2) return '管理员';\r\n      if (role === 1) return '商家';\r\n      return '公告发布者';\r\n    }\r\n  },\r\n  computed: {\r\n    thumbnail() {\r\n      if (!this.announcement) return null;\r\n      return this.getFirstImageFromContent(this.announcement.content);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.announcement-detail {\r\n  max-width: 980px;\r\n  margin: 24px auto;\r\n}\r\n</style>\r\n\r\n"]}]}