{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\common\\DisputeManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\common\\DisputeManagement.vue","mtime":1766993616441},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'DisputeManagement',\n  data: function data() {\n    return {\n      disputes: [],\n      loading: false,\n      currentPage: 1,\n      pageSize: 8,\n      total: 0,\n      filterStatus: null,\n      // null=全部, 0=待处理, 2=已解决\n      dialogVisible: false,\n      currentDispute: null,\n      handleForm: {\n        handleResult: 1,\n        handleDescription: ''\n      }\n    };\n  },\n  created: function created() {\n    this.loadDisputes();\n  },\n  filters: {\n    formatDate: function formatDate(dateStr) {\n      if (!dateStr) return '';\n      var date = new Date(dateStr);\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    }\n  },\n  methods: {\n    loadDisputes: function loadDisputes() {\n      var _this = this;\n\n      this.loading = true;\n      this.$api.adminGetDisputeList({\n        status: this.filterStatus,\n        page: this.currentPage,\n        nums: this.pageSize\n      }).then(function (res) {\n        if (res.status_code === 1) {\n          _this.disputes = res.data.list || [];\n          _this.total = res.data.count || 0;\n        } else {\n          _this.$message.error('加载纠纷列表失败');\n        }\n      }).catch(function (err) {\n        console.error('加载纠纷列表失败', err);\n\n        _this.$message.error('加载纠纷列表失败');\n      }).finally(function () {\n        _this.loading = false;\n      });\n    },\n    handleStatusChange: function handleStatusChange() {\n      this.currentPage = 1;\n      this.loadDisputes();\n    },\n    handlePageChange: function handlePageChange(page) {\n      this.currentPage = page;\n      this.loadDisputes();\n    },\n    viewDetails: function viewDetails(dispute) {\n      this.currentDispute = dispute;\n      this.handleForm.handleResult = 1;\n      this.handleForm.handleDescription = '';\n      this.dialogVisible = true;\n    },\n    submitHandle: function submitHandle() {\n      var _this2 = this;\n\n      if (!this.handleForm.handleResult) {\n        this.$message.warning('请选择处理结果');\n        return;\n      }\n\n      this.$confirm('确认提交处理结果？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this2.$api.adminHandleDispute({\n          id: _this2.currentDispute.id,\n          handleResult: _this2.handleForm.handleResult,\n          handleDescription: _this2.handleForm.handleDescription\n        }).then(function (res) {\n          if (res.status_code === 1) {\n            _this2.$message.success('处理成功');\n\n            _this2.dialogVisible = false;\n\n            _this2.loadDisputes();\n          } else {\n            _this2.$message.error(res.msg || '处理失败');\n          }\n        }).catch(function (err) {\n          console.error('处理纠纷失败', err);\n\n          _this2.$message.error('处理失败');\n        });\n      }).catch(function () {});\n    },\n    getDisputeTypeText: function getDisputeTypeText(type) {\n      var types = {\n        1: '商品描述不符',\n        2: '商品质量问题',\n        3: '未收到货',\n        4: '退款问题',\n        5: '其他'\n      };\n      return types[type] || '未知';\n    },\n    getStatusText: function getStatusText(status) {\n      var statuses = {\n        0: '待处理',\n        1: '处理中',\n        2: '已解决',\n        3: '已关闭'\n      };\n      return statuses[status] || '未知';\n    },\n    getStatusType: function getStatusType(status) {\n      var types = {\n        0: 'warning',\n        1: 'info',\n        2: 'success',\n        3: 'info'\n      };\n      return types[status] || '';\n    },\n    getHandleResultText: function getHandleResultText(result) {\n      var results = {\n        1: '退款给买家',\n        2: '驳回申请',\n        3: '要求退货退款',\n        4: '警告用户',\n        5: '其他'\n      };\n      return results[result] || '未知';\n    },\n    getOrderStatusText: function getOrderStatusText(status) {\n      var statuses = {\n        0: '待确认',\n        1: '已确认',\n        2: '已发货',\n        3: '已完成',\n        4: '已取消'\n      };\n      return statuses[status] || '未知';\n    },\n    getEvidenceImages: function getEvidenceImages(imagesStr) {\n      if (!imagesStr) return [];\n\n      try {\n        return JSON.parse(imagesStr);\n      } catch (e) {\n        return [];\n      }\n    }\n  }\n};",{"version":3,"sources":["DisputeManagement.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"dispute-management-container\">\r\n        <el-card shadow=\"never\">\r\n            <div slot=\"header\" class=\"clearfix\">\r\n                <span>交易纠纷管理</span>\r\n                <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"loadDisputes\">刷新</el-button>\r\n            </div>\r\n\r\n            <!-- 筛选条件 -->\r\n            <div class=\"filter-container\">\r\n                <el-radio-group v-model=\"filterStatus\" @change=\"handleStatusChange\" size=\"small\">\r\n                    <el-radio-button :label=\"null\">全部</el-radio-button>\r\n                    <el-radio-button :label=\"0\">待处理</el-radio-button>\r\n                    <el-radio-button :label=\"2\">已解决</el-radio-button>\r\n                </el-radio-group>\r\n            </div>\r\n\r\n            <!-- 纠纷列表 -->\r\n            <el-table\r\n                :data=\"disputes\"\r\n                v-loading=\"loading\"\r\n                style=\"width: 100%\"\r\n                :header-cell-style=\"{ background: '#f5f7fa', color: '#303133', fontWeight: 'bold' }\"\r\n                border>\r\n                <el-table-column\r\n                    prop=\"id\"\r\n                    label=\"纠纷ID\"\r\n                    width=\"80\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"order.orderNumber\"\r\n                    label=\"订单号\"\r\n                    width=\"180\"\r\n                    show-overflow-tooltip>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"order.idleItem.idleName\"\r\n                    label=\"商品名称\"\r\n                    show-overflow-tooltip>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"applicant.nickname\"\r\n                    label=\"申请人\"\r\n                    width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"纠纷类型\"\r\n                    width=\"120\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-tag size=\"small\">{{ getDisputeTypeText(scope.row.disputeType) }}</el-tag>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"disputeReason\"\r\n                    label=\"纠纷原因\"\r\n                    show-overflow-tooltip\r\n                    min-width=\"200\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"状态\"\r\n                    width=\"100\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-tag :type=\"getStatusType(scope.row.disputeStatus)\" size=\"small\">\r\n                            {{ getStatusText(scope.row.disputeStatus) }}\r\n                        </el-tag>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    prop=\"createTime\"\r\n                    label=\"申请时间\"\r\n                    width=\"180\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{ scope.row.createTime | formatDate }}\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column\r\n                    label=\"操作\"\r\n                    width=\"120\"\r\n                    align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button\r\n                            v-if=\"scope.row.disputeStatus === 0\"\r\n                            type=\"primary\"\r\n                            size=\"mini\"\r\n                            @click=\"viewDetails(scope.row)\">\r\n                            处理\r\n                        </el-button>\r\n                        <el-button\r\n                            v-else\r\n                            type=\"info\"\r\n                            size=\"mini\"\r\n                            @click=\"viewDetails(scope.row)\">\r\n                            查看\r\n                        </el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n\r\n            <!-- 分页 -->\r\n            <div class=\"pagination-container\">\r\n                <el-pagination\r\n                    @current-change=\"handlePageChange\"\r\n                    :current-page=\"currentPage\"\r\n                    :page-size=\"pageSize\"\r\n                    layout=\"total, prev, pager, next, jumper\"\r\n                    :total=\"total\">\r\n                </el-pagination>\r\n            </div>\r\n        </el-card>\r\n\r\n        <!-- 处理纠纷对话框 -->\r\n        <el-dialog\r\n            :title=\"currentDispute && currentDispute.disputeStatus === 0 ? '处理交易纠纷' : '查看纠纷详情'\"\r\n            :visible.sync=\"dialogVisible\"\r\n            width=\"70%\"\r\n            @close=\"currentDispute = null\">\r\n            <div v-if=\"currentDispute\" class=\"dispute-detail\">\r\n                <!-- 订单信息 -->\r\n                <el-card shadow=\"never\" class=\"detail-section\">\r\n                    <div slot=\"header\">\r\n                        <span>订单信息</span>\r\n                    </div>\r\n                    <el-descriptions :column=\"2\" border>\r\n                        <el-descriptions-item label=\"订单号\">{{ currentDispute.order.orderNumber }}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"订单金额\">¥{{ currentDispute.order.orderPrice }}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"商品名称\">{{ currentDispute.order.idleItem.idleName }}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"订单状态\">\r\n                            <el-tag size=\"small\">{{ getOrderStatusText(currentDispute.order.orderStatus) }}</el-tag>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"支付状态\">\r\n                            <el-tag :type=\"currentDispute.order.paymentStatus ? 'success' : 'warning'\" size=\"small\">\r\n                                {{ currentDispute.order.paymentStatus ? '已支付' : '未支付' }}\r\n                            </el-tag>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"创建时间\">{{ currentDispute.order.createTime | formatDate }}</el-descriptions-item>\r\n                    </el-descriptions>\r\n                </el-card>\r\n\r\n                <!-- 纠纷信息 -->\r\n                <el-card shadow=\"never\" class=\"detail-section\">\r\n                    <div slot=\"header\">\r\n                        <span>纠纷信息</span>\r\n                    </div>\r\n                    <el-descriptions :column=\"2\" border>\r\n                        <el-descriptions-item label=\"申请人\">{{ currentDispute.applicant.nickname }}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"申请时间\">{{ currentDispute.createTime | formatDate }}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"纠纷类型\">\r\n                            <el-tag size=\"small\">{{ getDisputeTypeText(currentDispute.disputeType) }}</el-tag>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"纠纷状态\">\r\n                            <el-tag :type=\"getStatusType(currentDispute.disputeStatus)\" size=\"small\">\r\n                                {{ getStatusText(currentDispute.disputeStatus) }}\r\n                            </el-tag>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"纠纷原因\" :span=\"2\">{{ currentDispute.disputeReason }}</el-descriptions-item>\r\n                    </el-descriptions>\r\n\r\n                    <!-- 证据图片 -->\r\n                    <div v-if=\"currentDispute.evidenceImages\" class=\"evidence-images\">\r\n                        <el-divider>证据图片</el-divider>\r\n                        <div class=\"image-list\">\r\n                            <el-image\r\n                                v-for=\"(img, index) in getEvidenceImages(currentDispute.evidenceImages)\"\r\n                                :key=\"index\"\r\n                                :src=\"img\"\r\n                                :preview-src-list=\"getEvidenceImages(currentDispute.evidenceImages)\"\r\n                                fit=\"cover\"\r\n                                class=\"evidence-image\">\r\n                            </el-image>\r\n                        </div>\r\n                    </div>\r\n                </el-card>\r\n\r\n                <!-- 处理结果（已处理时显示） -->\r\n                <el-card v-if=\"currentDispute.disputeStatus === 2\" shadow=\"never\" class=\"detail-section\">\r\n                    <div slot=\"header\">\r\n                        <span>处理结果</span>\r\n                    </div>\r\n                    <el-descriptions :column=\"2\" border>\r\n                        <el-descriptions-item label=\"处理结果\">\r\n                            <el-tag type=\"success\" size=\"small\">{{ getHandleResultText(currentDispute.handleResult) }}</el-tag>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item label=\"处理时间\">{{ currentDispute.handleTime | formatDate }}</el-descriptions-item>\r\n                        <el-descriptions-item label=\"处理说明\" :span=\"2\">{{ currentDispute.handleDescription || '无' }}</el-descriptions-item>\r\n                    </el-descriptions>\r\n                </el-card>\r\n\r\n                <!-- 处理操作（待处理时显示） -->\r\n                <el-card v-if=\"currentDispute.disputeStatus === 0\" shadow=\"never\" class=\"detail-section\">\r\n                    <div slot=\"header\">\r\n                        <span>处理操作</span>\r\n                    </div>\r\n                    <el-form :model=\"handleForm\" label-width=\"120px\">\r\n                        <el-form-item label=\"处理结果\" required>\r\n                            <el-radio-group v-model=\"handleForm.handleResult\">\r\n                                <el-radio :label=\"1\">退款给买家</el-radio>\r\n                                <el-radio :label=\"2\">驳回申请</el-radio>\r\n                                <el-radio :label=\"3\">要求退货退款</el-radio>\r\n                                <el-radio :label=\"4\">警告用户</el-radio>\r\n                                <el-radio :label=\"5\">其他</el-radio>\r\n                            </el-radio-group>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"处理说明\">\r\n                            <el-input\r\n                                type=\"textarea\"\r\n                                :rows=\"4\"\r\n                                v-model=\"handleForm.handleDescription\"\r\n                                placeholder=\"请输入处理说明\">\r\n                            </el-input>\r\n                        </el-form-item>\r\n                        <el-form-item>\r\n                            <el-button type=\"primary\" @click=\"submitHandle\">提交处理</el-button>\r\n                            <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </el-card>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'DisputeManagement',\r\n    data() {\r\n        return {\r\n            disputes: [],\r\n            loading: false,\r\n            currentPage: 1,\r\n            pageSize: 8,\r\n            total: 0,\r\n            filterStatus: null, // null=全部, 0=待处理, 2=已解决\r\n            dialogVisible: false,\r\n            currentDispute: null,\r\n            handleForm: {\r\n                handleResult: 1,\r\n                handleDescription: ''\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.loadDisputes();\r\n    },\r\n    filters: {\r\n        formatDate(dateStr) {\r\n            if (!dateStr) return '';\r\n            const date = new Date(dateStr);\r\n            return date.toLocaleString('zh-CN', {\r\n                year: 'numeric',\r\n                month: '2-digit',\r\n                day: '2-digit',\r\n                hour: '2-digit',\r\n                minute: '2-digit'\r\n            });\r\n        }\r\n    },\r\n    methods: {\r\n        loadDisputes() {\r\n            this.loading = true;\r\n            this.$api.adminGetDisputeList({\r\n                status: this.filterStatus,\r\n                page: this.currentPage,\r\n                nums: this.pageSize\r\n            }).then(res => {\r\n                if (res.status_code === 1) {\r\n                    this.disputes = res.data.list || [];\r\n                    this.total = res.data.count || 0;\r\n                } else {\r\n                    this.$message.error('加载纠纷列表失败');\r\n                }\r\n            }).catch(err => {\r\n                console.error('加载纠纷列表失败', err);\r\n                this.$message.error('加载纠纷列表失败');\r\n            }).finally(() => {\r\n                this.loading = false;\r\n            });\r\n        },\r\n        handleStatusChange() {\r\n            this.currentPage = 1;\r\n            this.loadDisputes();\r\n        },\r\n        handlePageChange(page) {\r\n            this.currentPage = page;\r\n            this.loadDisputes();\r\n        },\r\n        viewDetails(dispute) {\r\n            this.currentDispute = dispute;\r\n            this.handleForm.handleResult = 1;\r\n            this.handleForm.handleDescription = '';\r\n            this.dialogVisible = true;\r\n        },\r\n        submitHandle() {\r\n            if (!this.handleForm.handleResult) {\r\n                this.$message.warning('请选择处理结果');\r\n                return;\r\n            }\r\n            \r\n            this.$confirm('确认提交处理结果？', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.$api.adminHandleDispute({\r\n                    id: this.currentDispute.id,\r\n                    handleResult: this.handleForm.handleResult,\r\n                    handleDescription: this.handleForm.handleDescription\r\n                }).then(res => {\r\n                    if (res.status_code === 1) {\r\n                        this.$message.success('处理成功');\r\n                        this.dialogVisible = false;\r\n                        this.loadDisputes();\r\n                    } else {\r\n                        this.$message.error(res.msg || '处理失败');\r\n                    }\r\n                }).catch(err => {\r\n                    console.error('处理纠纷失败', err);\r\n                    this.$message.error('处理失败');\r\n                });\r\n            }).catch(() => {});\r\n        },\r\n        getDisputeTypeText(type) {\r\n            const types = {\r\n                1: '商品描述不符',\r\n                2: '商品质量问题',\r\n                3: '未收到货',\r\n                4: '退款问题',\r\n                5: '其他'\r\n            };\r\n            return types[type] || '未知';\r\n        },\r\n        getStatusText(status) {\r\n            const statuses = {\r\n                0: '待处理',\r\n                1: '处理中',\r\n                2: '已解决',\r\n                3: '已关闭'\r\n            };\r\n            return statuses[status] || '未知';\r\n        },\r\n        getStatusType(status) {\r\n            const types = {\r\n                0: 'warning',\r\n                1: 'info',\r\n                2: 'success',\r\n                3: 'info'\r\n            };\r\n            return types[status] || '';\r\n        },\r\n        getHandleResultText(result) {\r\n            const results = {\r\n                1: '退款给买家',\r\n                2: '驳回申请',\r\n                3: '要求退货退款',\r\n                4: '警告用户',\r\n                5: '其他'\r\n            };\r\n            return results[result] || '未知';\r\n        },\r\n        getOrderStatusText(status) {\r\n            const statuses = {\r\n                0: '待确认',\r\n                1: '已确认',\r\n                2: '已发货',\r\n                3: '已完成',\r\n                4: '已取消'\r\n            };\r\n            return statuses[status] || '未知';\r\n        },\r\n        getEvidenceImages(imagesStr) {\r\n            if (!imagesStr) return [];\r\n            try {\r\n                return JSON.parse(imagesStr);\r\n            } catch (e) {\r\n                return [];\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.dispute-management-container {\r\n    padding: 20px;\r\n}\r\n\r\n.filter-container {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.pagination-container {\r\n    margin-top: 20px;\r\n    text-align: right;\r\n}\r\n\r\n.detail-section {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.evidence-images {\r\n    margin-top: 20px;\r\n}\r\n\r\n.image-list {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 10px;\r\n}\r\n\r\n.evidence-image {\r\n    width: 150px;\r\n    height: 150px;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src/components/common"}]}