{"remainingRequest":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\common\\AppHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\src\\components\\common\\AppHeader.vue","mtime":1767574753804},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678197338000},{"path":"D:\\Git\\my_ruangong\\campus-trading-platform\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1678197338000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'Header',\n  props: ['searchInput', 'nicknameValue', 'avatarValue'],\n  data: function data() {\n    return {\n      searchValue: this.searchInput,\n      nickname: '登录',\n      avatar: 'https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png',\n      isLogin: false,\n      unreadCount: 0,\n      // 未读消息数量\n      unreadTimer: null,\n      // 未读消息定时器\n      // 搜索建议关键词（可以从后端获取热门搜索词）\n      searchSuggestions: [{\n        value: '笔记本电脑'\n      }, {\n        value: '手机'\n      }, {\n        value: '耳机'\n      }, {\n        value: '书籍'\n      }, {\n        value: '运动鞋'\n      }, {\n        value: '自行车'\n      }, {\n        value: '键盘'\n      }, {\n        value: '鼠标'\n      }]\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // console.log(\"header\");\n    if (!this.$globalData.userInfo.nickname) {\n      this.$api.getUserInfo().then(function (res) {\n        console.log('Header getUserInfo:', res);\n\n        if (res.status_code === 1) {\n          _this.nickname = res.data.nickname;\n          _this.avatar = res.data.avatar;\n          res.data.signInTime = res.data.signInTime.substring(0, 10);\n          _this.$globalData.userInfo = res.data;\n          _this.isLogin = true;\n        }\n      });\n    } else {\n      this.nickname = this.$globalData.userInfo.nickname;\n      this.avatar = this.$globalData.userInfo.avatar;\n      this.isLogin = true;\n    } // 加载未读消息数量\n\n\n    this.loadUnreadCount(); // 每30秒刷新一次未读消息数量\n\n    this.unreadTimer = setInterval(function () {\n      _this.loadUnreadCount();\n    }, 30000);\n  },\n  beforeDestroy: function beforeDestroy() {\n    // 清除定时器\n    if (this.unreadTimer) {\n      clearInterval(this.unreadTimer);\n    }\n  },\n  computed: {\n    userRole: function userRole() {\n      return this.$globalData.userInfo.userRole || 0;\n    },\n    releaseButtonText: function releaseButtonText() {\n      // userRole: 1 代表经营性卖家\n      return this.userRole === 1 ? '店铺管理' : '发布闲置';\n    }\n  },\n  methods: {\n    querySearch: function querySearch(queryString, cb) {\n      // 根据输入提供搜索建议\n      var suggestions = this.searchSuggestions;\n      var results = queryString ? suggestions.filter(function (item) {\n        return item.value.toLowerCase().includes(queryString.toLowerCase());\n      }) : suggestions; // 限制显示数量\n\n      cb(results.slice(0, 8));\n    },\n    handleSelect: function handleSelect(item) {\n      this.searchValue = item.value;\n      this.searchIdle();\n    },\n    searchIdle: function searchIdle() {\n      if (this.searchValue && this.searchValue.trim() !== '') {\n        if ('/search' !== this.$route.path) {\n          this.$router.push({\n            path: '/search',\n            query: {\n              searchValue: this.searchValue\n            }\n          });\n        } else {\n          this.$router.replace({\n            path: '/search',\n            query: {\n              searchValue: this.searchValue\n            }\n          });\n          this.$router.go(0);\n        }\n      } else {\n        this.$message.warning('请输入搜索关键词');\n      }\n    },\n    toMe: function toMe() {\n      if ('/me' !== this.$route.path) {\n        this.$router.push({\n          path: '/me'\n        });\n      }\n    },\n    toMessage: function toMessage() {\n      if ('/message' !== this.$route.path) {\n        this.$router.push({\n          path: '/message'\n        });\n      }\n    },\n    toRelease: function toRelease() {\n      // userRole: 1 代表经营性卖家\n      if (this.userRole === 1) {\n        if ('/merchant/manage' !== this.$route.path) {\n          this.$router.push({\n            path: '/merchant/manage'\n          });\n        }\n      } else {\n        if ('/release' !== this.$route.path) {\n          this.$router.push({\n            path: '/release'\n          });\n        }\n      }\n    },\n    loginOut: function loginOut() {\n      var _this2 = this;\n\n      this.$api.logout().then(function (res) {\n        if (res.status_code === 1) {\n          _this2.$globalData.userInfo = {};\n          console.log(\"login out\");\n\n          _this2.$message.success('退出登录成功');\n\n          if ('/index' === _this2.$route.path) {\n            _this2.$router.go(0);\n          } else {\n            _this2.$router.push({\n              path: '/index'\n            });\n          }\n        } else {\n          _this2.$message.error('网络或系统异常，退出登录失败！');\n        }\n      });\n    },\n    // 加载未读消息数量\n    loadUnreadCount: function loadUnreadCount() {\n      var _this3 = this;\n\n      if (!this.isLogin) {\n        this.unreadCount = 0;\n        return;\n      }\n\n      this.$api.getChatUnreadCount().then(function (res) {\n        if (res.status_code === 1 && res.data !== undefined) {\n          _this3.unreadCount = res.data || 0;\n        } else {\n          _this3.unreadCount = 0;\n        }\n      }).catch(function (err) {\n        console.error('加载未读消息数量失败:', err);\n        _this3.unreadCount = 0;\n      });\n    }\n  }\n};",{"version":3,"sources":["AppHeader.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"header\">\n        <div class=\"header-container\">\n            <div class=\"app-name\">\n                <router-link to=\"/\">\n                    <i class=\"el-icon-s-shop\"></i>\n                    <span class=\"app-name-text\">拾光换物-校园二手交易商城</span>\n                </router-link>\n            </div>\n            <div class=\"search-container\">\n                <div class=\"search-wrapper\">\n                    <el-autocomplete\n                        v-model=\"searchValue\"\n                        :fetch-suggestions=\"querySearch\"\n                        placeholder=\"搜索你想要的商品...\"\n                        :trigger-on-focus=\"false\"\n                        @select=\"handleSelect\"\n                        @keyup.enter.native=\"searchIdle\"\n                        prefix-icon=\"el-icon-search\"\n                        clearable\n                        class=\"search-input\"\n                        popper-class=\"search-suggestions\">\n                        <template slot-scope=\"{ item }\">\n                            <div class=\"suggestion-item\">\n                                <i class=\"el-icon-goods\"></i>\n                                <span class=\"suggestion-text\">{{ item.value }}</span>\n                            </div>\n                        </template>\n                    </el-autocomplete>\n                    <el-button icon=\"el-icon-search\" @click=\"searchIdle\" class=\"search-btn\">搜索</el-button>\n                </div>\n            </div>\n            <div class=\"action-buttons\">\n                <el-button type=\"primary\" icon=\"el-icon-plus\" class=\"publish-btn\" @click=\"toRelease\">{{ releaseButtonText }}</el-button>\n                <el-badge :value=\"unreadCount\" :hidden=\"unreadCount === 0\" class=\"message-badge\">\n                    <el-button type=\"info\" icon=\"el-icon-chat-dot-round\" class=\"message-btn\" @click=\"toMessage\">消息</el-button>\n                </el-badge>\n                \n                <router-link v-if=\"!isLogin\" class=\"user-name-text login-btn\" to=\"/login\">\n                    <i class=\"el-icon-user\"></i> 登录\n                </router-link>\n                \n                <el-dropdown trigger=\"click\" v-else class=\"user-dropdown\">\n                    <div class=\"user-info\">\n                        <div class=\"user-name\">{{nicknameValue?nicknameValue:nickname}}</div>\n                        <el-avatar :size=\"32\" :src=\"avatarValue?avatarValue:avatar\" class=\"user-avatar\"></el-avatar>\n                    </div>\n                    <el-dropdown-menu slot=\"dropdown\" class=\"dropdown-menu\">\n                        <el-dropdown-item>\n                            <div @click=\"toMe\" class=\"dropdown-item\">\n                                <i class=\"el-icon-user-solid\"></i> 个人中心\n                            </div>\n                        </el-dropdown-item>\n                        <el-dropdown-item divided>\n                            <div @click=\"loginOut\" class=\"dropdown-item logout\">\n                                <i class=\"el-icon-switch-button\"></i> 退出登录\n                            </div>\n                        </el-dropdown-item>\n                    </el-dropdown-menu>\n                </el-dropdown>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n\n    export default {\n        name: 'Header',\n        props: ['searchInput','nicknameValue','avatarValue'],\n        data() {\n            return {\n                searchValue: this.searchInput,\n                nickname:'登录',\n                avatar:'https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png',\n                isLogin:false,\n                unreadCount: 0, // 未读消息数量\n                unreadTimer: null, // 未读消息定时器\n                // 搜索建议关键词（可以从后端获取热门搜索词）\n                searchSuggestions: [\n                    { value: '笔记本电脑' },\n                    { value: '手机' },\n                    { value: '耳机' },\n                    { value: '书籍' },\n                    { value: '运动鞋' },\n                    { value: '自行车' },\n                    { value: '键盘' },\n                    { value: '鼠标' }\n                ]\n            };\n        },\n        created(){\n            // console.log(\"header\");\n            if(! this.$globalData.userInfo.nickname){\n                this.$api.getUserInfo().then(res=>{\n                    console.log('Header getUserInfo:',res);\n                    if(res.status_code===1){\n                        this.nickname=res.data.nickname;\n                        this.avatar=res.data.avatar;\n                        \n                        res.data.signInTime=res.data.signInTime.substring(0,10);\n                        this.$globalData.userInfo=res.data;\n                        this.isLogin=true;\n                    }\n                })\n            }else {\n                this.nickname=this.$globalData.userInfo.nickname;\n                this.avatar=this.$globalData.userInfo.avatar;\n                \n                this.isLogin=true;\n            }\n            // 加载未读消息数量\n            this.loadUnreadCount();\n            // 每30秒刷新一次未读消息数量\n            this.unreadTimer = setInterval(() => {\n                this.loadUnreadCount();\n            }, 30000);\n        },\n        beforeDestroy() {\n            // 清除定时器\n            if (this.unreadTimer) {\n                clearInterval(this.unreadTimer);\n            }\n        },\n        computed: {\n            userRole() {\n                return this.$globalData.userInfo.userRole || 0;\n            },\n            releaseButtonText() {\n                // userRole: 1 代表经营性卖家\n                return this.userRole === 1 ? '店铺管理' : '发布闲置';\n            }\n        },\n        methods: {\n            querySearch(queryString, cb) {\n                // 根据输入提供搜索建议\n                const suggestions = this.searchSuggestions;\n                const results = queryString \n                    ? suggestions.filter(item => item.value.toLowerCase().includes(queryString.toLowerCase()))\n                    : suggestions;\n                // 限制显示数量\n                cb(results.slice(0, 8));\n            },\n            handleSelect(item) {\n                this.searchValue = item.value;\n                this.searchIdle();\n            },\n            searchIdle() {\n                if(this.searchValue && this.searchValue.trim() !== '') {\n                    if ('/search' !== this.$route.path) {\n                        this.$router.push({path: '/search', query: {searchValue: this.searchValue}});\n                    } else {\n                        this.$router.replace({path: '/search', query: {searchValue: this.searchValue}});\n                        this.$router.go(0);\n                    }\n                } else {\n                    this.$message.warning('请输入搜索关键词');\n                }\n            },\n            toMe() {\n                if ('/me' !== this.$route.path) {\n                    this.$router.push({path: '/me'});\n                }\n            },\n            toMessage(){\n                if ('/message' !== this.$route.path) {\n                    this.$router.push({path: '/message'});\n                }\n            },\n            toRelease(){\n                // userRole: 1 代表经营性卖家\n                if (this.userRole === 1) {\n                    if ('/merchant/manage' !== this.$route.path) {\n                        this.$router.push({path: '/merchant/manage'});\n                    }\n                } else {\n                if ('/release' !== this.$route.path) {\n                    this.$router.push({path: '/release'});\n                    }\n                }\n            },\n            loginOut(){\n                this.$api.logout().then(res=>{\n                    if(res.status_code===1){\n                        this.$globalData.userInfo={};\n                        console.log(\"login out\");\n                        this.$message.success('退出登录成功');\n                        if ('/index' === this.$route.path) {\n                            this.$router.go(0);\n                        }else {\n                            this.$router.push({path: '/index'});\n                        }\n                    }else {\n                        this.$message.error('网络或系统异常，退出登录失败！');\n                    }\n                });\n\n            },\n            // 加载未读消息数量\n            loadUnreadCount() {\n                if (!this.isLogin) {\n                    this.unreadCount = 0;\n                    return;\n                }\n                \n                this.$api.getChatUnreadCount().then(res => {\n                    if (res.status_code === 1 && res.data !== undefined) {\n                        this.unreadCount = res.data || 0;\n                    } else {\n                        this.unreadCount = 0;\n                    }\n                }).catch(err => {\n                    console.error('加载未读消息数量失败:', err);\n                    this.unreadCount = 0;\n                });\n            }\n        }\n    };\n</script>\n<style scoped>\n    .header {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        height: 64px;\n        background: linear-gradient(135deg, #ffffff 0%, #f8fffe 100%);\n        display: flex;\n        justify-content: center;\n        border-bottom: 2px solid rgba(79, 192, 141, 0.2);\n        box-shadow: 0 4px 20px rgba(79, 192, 141, 0.1);\n        z-index: 1000;\n        backdrop-filter: blur(10px);\n    }\n\n    .header-container {\n        width: 1200px;\n        max-width: 95%;\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    .app-name {\n        flex-shrink: 0;\n        margin-right: 15px;\n    }\n\n    .app-name a {\n        background: linear-gradient(135deg, #2d8259 0%, #4fc08d 50%, #66d19e 100%);\n        -webkit-background-clip: text;\n        -webkit-text-fill-color: transparent;\n        background-clip: text;\n        font-size: 22px;\n        font-weight: 700;\n        text-decoration: none;\n        display: flex;\n        align-items: center;\n        transition: all 0.3s;\n        text-shadow: 0 2px 4px rgba(79, 192, 141, 0.3);\n        letter-spacing: 1px;\n    }\n\n    .app-name a:hover {\n        background: linear-gradient(135deg, #3ba674 0%, #5fd19f 50%, #7ae8b2 100%);\n        -webkit-background-clip: text;\n        -webkit-text-fill-color: transparent;\n        background-clip: text;\n        transform: translateY(-1px);\n        text-shadow: 0 3px 8px rgba(79, 192, 141, 0.4);\n    }\n\n    .app-name i {\n        margin-right: 10px;\n        font-size: 28px;\n        color: #4fc08d;\n        filter: drop-shadow(0 2px 4px rgba(79, 192, 141, 0.3));\n        transition: all 0.3s;\n    }\n\n    .app-name a:hover i {\n        color: #5fd19f;\n        transform: scale(1.1) rotate(5deg);\n        filter: drop-shadow(0 3px 6px rgba(79, 192, 141, 0.4));\n    }\n    .app-name-text {\n        white-space: nowrap;\n    }\n\n    .search-container {\n        flex-grow: 1;\n        max-width: 600px;\n        margin: 0 20px;\n    }\n    .search-wrapper {\n        display: flex;\n        align-items: center;\n        background: #fff;\n        border-radius: 25px;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n        overflow: hidden;\n        transition: all 0.3s ease;\n    }\n    .search-wrapper:focus-within {\n        box-shadow: 0 4px 16px rgba(79, 192, 141, 0.3);\n        border: 1px solid rgba(79, 192, 141, 0.3);\n    }\n    .search-input {\n        flex: 1;\n    }\n    .search-input :deep(.el-input__inner) {\n        border: none;\n        border-radius: 25px 0 0 25px;\n        height: 40px;\n        font-size: 14px;\n        padding-left: 40px;\n        transition: all 0.3s ease;\n    }\n    .search-input :deep(.el-input__inner):focus {\n        box-shadow: none;\n    }\n    .search-input :deep(.el-input__prefix) {\n        left: 12px;\n    }\n    .search-btn {\n        border-radius: 0 25px 25px 0;\n        height: 40px;\n        padding: 0 30px;\n        background: linear-gradient(90deg, #2d8259, #4fc08d) !important;\n        border: none !important;\n        font-weight: 600;\n        transition: all 0.3s ease;\n        margin-left: 0;\n    }\n    .search-btn:hover {\n        background: linear-gradient(90deg, #3ba674, #5fd19f) !important;\n        transform: translateY(-1px);\n        box-shadow: 0 4px 12px rgba(79, 192, 141, 0.3);\n    }\n    /* 搜索建议下拉框样式 */\n    :deep(.search-suggestions) {\n        border-radius: 12px;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n        border: 1px solid #e4e7ed;\n        margin-top: 5px;\n    }\n    :deep(.search-suggestions .el-autocomplete-suggestion__list) {\n        padding: 8px 0;\n    }\n    .suggestion-item {\n        display: flex;\n        align-items: center;\n        padding: 10px 20px;\n        cursor: pointer;\n        transition: background-color 0.2s;\n    }\n    .suggestion-item:hover {\n        background-color: #f5f7fa;\n    }\n    .suggestion-item i {\n        color: #4fc08d;\n        margin-right: 10px;\n        font-size: 18px;\n    }\n    .suggestion-text {\n        color: #606266;\n        font-size: 14px;\n    }\n\n    .action-buttons {\n        display: flex;\n        align-items: center;\n        flex-shrink: 0;\n    }\n\n    .message-badge {\n        margin-right: 10px;\n    }\n    .publish-btn {\n        margin-right: 10px;\n        border-radius: 20px;\n        background: linear-gradient(135deg, #2d8259, #4fc08d) !important;\n        border: none !important;\n        font-weight: 600;\n        transition: all 0.3s ease;\n    }\n\n    .publish-btn:hover {\n        background: linear-gradient(135deg, #3ba674, #5fd19f) !important;\n        transform: translateY(-1px);\n        box-shadow: 0 4px 12px rgba(79, 192, 141, 0.3);\n    }\n\n    .publish-btn i {\n        font-size: 16px;\n        margin-right: 6px;\n    }\n\n    .message-btn {\n        margin-right: 10px;\n        border-radius: 20px;\n        border: 2px solid #4fc08d !important;\n        background: #fff !important;\n        color: #4fc08d !important;\n        transition: all 0.3s ease;\n    }\n\n    .message-btn:hover {\n        background: #4fc08d !important;\n        color: #fff !important;\n        transform: translateY(-1px);\n        box-shadow: 0 4px 12px rgba(79, 192, 141, 0.2);\n    }\n\n    .message-btn i {\n        font-size: 16px;\n        margin-right: 6px;\n    }\n\n    .user-name-text {\n        font-size: 16px;\n        font-weight: 600;\n        color: #4fc08d;\n        cursor: pointer;\n        text-decoration: none;\n        display: flex;\n        align-items: center;\n        transition: all 0.3s;\n    }\n\n    .user-name-text:hover {\n        color: #5fd19f;\n    }\n\n    .login-btn i {\n        margin-right: 8px;\n        color: #4fc08d;\n        font-size: 18px;\n    }\n\n    .user-dropdown {\n        cursor: pointer;\n    }\n\n    .user-info {\n        display: flex;\n        align-items: center;\n        padding: 0 5px;\n        border-radius: 20px;\n        transition: all 0.3s;\n    }\n\n    .user-info:hover {\n        background-color: #f5f7fa;\n    }\n\n    .user-name {\n        font-size: 15px;\n        color: #4fc08d;\n        margin-right: 8px;\n        font-weight: 600;\n    }\n\n    .user-avatar {\n        border: 2px solid #ebeef5;\n    }\n\n    .dropdown-menu {\n        min-width: 130px;\n    }\n\n    .dropdown-item {\n        display: flex;\n        align-items: center;\n        font-size: 14px;\n    }\n\n    .dropdown-item i {\n        margin-right: 8px;\n        color: #4fc08d;\n        font-size: 16px;\n    }\n\n    .logout {\n        color: #f56c6c;\n    }\n\n    /* 响应式调整 */\n    @media (max-width: 992px) {\n        .header {\n            height: 60px;\n        }\n\n        .app-name a {\n            font-size: 20px;\n        }\n\n        .app-name i {\n            font-size: 26px;\n        }\n\n        .search-container {\n            max-width: 300px;\n        }\n\n        .publish-btn, .message-btn {\n            padding: 9px 12px;\n        }\n    }\n\n    @media (max-width: 768px) {\n        .header {\n            height: 56px;\n        }\n\n        .app-name a span {\n            display: none;\n        }\n\n        .app-name i {\n            margin-right: 0;\n            font-size: 24px;\n        }\n\n        .search-container {\n            max-width: 200px;\n        }\n\n        .publish-btn, .message-btn {\n            padding: 8px 12px;\n            font-size: 13px;\n        }\n\n        .user-name {\n            font-size: 14px;\n            margin-right: 5px;\n        }\n\n        .user-name-text {\n            font-size: 14px;\n        }\n    }\n</style>\n"],"sourceRoot":"src/components/common"}]}